:toc: left
:doctype: book

= Documentación de Grafana

== Comenzando

=== Comenzando

Esta sección proporciona una mirada de alto nivel a Grafana, el proceso de Grafana y las características de Grafana. Es un buen lugar para aprender a usar el software Grafana.

==== ¿Qué es Grafana?

Grafana es un software de análisis y visualización de código abierto. Le permite consultar, visualizar, alertar y explorar sus métricas sin importar dónde estén almacenadas. En un lenguaje sencillo, le proporciona herramientas para convertir los datos de su base de datos de series de tiempo (TSDB) en hermosos gráficos y visualizaciones.

Después de crear un tablero como lo hace en Comenzando, hay muchas cosas posibles que puede hacer a continuación. Todo depende de sus necesidades y su caso de uso.

Por ejemplo, si desea ver datos meteorológicos y estadísticas sobre su hogar inteligente, puede crear una lista de reproducción. Si es el administrador de una corporación y administra Grafana para varios equipos, es posible que deba configurar el aprovisionamiento y la autenticación.

Las siguientes secciones proporcionan una descripción general de las cosas que podría querer hacer con su base de datos y enlaces de Grafana para que pueda obtener más información. Para obtener más orientación e ideas, consulte los foros de la comunidad de Grafana.

==== Explore métricas y registros

Explore sus datos a través de consultas ad-hoc y desglose dinámico. Visualice y compare diferentes rangos de tiempo, consultas y fuentes de datos en paralelo.

Consulte Explorar para obtener más información.

==== Alertas

Si está utilizando las alertas de Grafana, puede hacer que se envíen alertas a través de varios notificadores de alertas diferentes, incluidos PagerDuty, SMS, correo electrónico, VictorOps, OpsGenie o Slack.

Los ganchos de alerta le permiten crear diferentes notificadores con un poco de código si prefiere otros canales de comunicación. Defina visualmente reglas de alerta para sus métricas más importantes.

==== Anotaciones

Anote gráficos con eventos enriquecidos de diferentes fuentes de datos. Desplácese sobre los eventos para ver toda la metadata del evento y las etiquetas.

Esta función, que se muestra como un marcador de gráfico en Grafana, es útil para correlacionar datos en caso de que algo salga mal. Puede crear las anotaciones manualmente, simplemente presione la tecla Control y haga clic en un gráfico e ingrese algo de texto, o puede obtener datos de cualquier fuente de datos.

Consulte Anotaciones para obtener más información.

==== Variables del tablero

Las variables de plantilla le permiten crear tableros que se pueden reutilizar para muchos casos de uso diferentes. Los valores no están codificados con estas plantillas, por lo que, por ejemplo, si tiene un servidor de producción y un servidor de prueba, puede usar el mismo tablero para ambos.

La creación de plantillas le permite profundizar en sus datos, por ejemplo, desde todos los datos hasta los datos de América del Norte, hasta los datos de Texas y más. También puede compartir estos tableros entre equipos dentro de su organización, o si crea una excelente plantilla de tablero para una fuente de datos popular, puede contribuir a que toda la comunidad la personalice y use.

==== Configurar Grafana

Si es administrador de Grafana, querrá familiarizarse a fondo con las opciones de configuración de Grafana y la CLI de Grafana.

La configuración cubre tanto los archivos de configuración como las variables de entorno. Puede configurar puertos predeterminados, niveles de registro, direcciones IP de correo electrónico, seguridad y más.

==== Importar paneles y complementos

Descubra cientos de tableros y complementos en la biblioteca oficial. Gracias a la pasión y el impulso de los miembros de la comunidad, se agregan nuevos cada semana.

==== Autenticación

Grafana admite diferentes métodos de autenticación, como LDAP y OAuth, y le permite asignar usuarios a organizaciones. Consulte la descripción general de la autenticación de usuario para obtener más información.

En Grafana Enterprise, también puede asignar usuarios a equipos: si su empresa tiene su propio sistema de autenticación, Grafana le permite asignar los equipos de sus sistemas internos a los equipos de Grafana. De esa manera, puede otorgar automáticamente acceso a las personas a los tableros designados para sus equipos.

Consulte Grafana Enterprise para obtener más información.

==== Aprovisionamiento

Si bien es fácil hacer clic, arrastrar y soltar para crear un solo tablero, los usuarios avanzados que necesitan muchos tableros querrán automatizar la configuración con un script. Puede programar cualquier cosa en Grafana.

Por ejemplo, si está creando un nuevo clúster de Kubernetes, también puede activar un Grafana automáticamente con un script que tendría el servidor, la dirección IP y las fuentes de datos correctos preestablecidos y bloqueados para que los usuarios no puedan cambiarlos. También es una forma de controlar muchos tableros.

Consulte Aprovisionamiento para obtener más información.

==== Permisos

Cuando las organizaciones tienen un Grafana y varios equipos, a menudo quieren tener la capacidad de mantener las cosas separadas y compartir tableros. Puede crear un equipo de usuarios y luego establecer permisos en carpetas, tableros y hasta el nivel de fuente de datos si está utilizando Grafana Enterprise.

==== Nube de Grafana

Grafana Cloud es una plataforma de registro y métricas OpenSaaS de alta disponibilidad, rápida y totalmente administrada. Todo lo que amas de Grafana, pero Grafana Labs lo aloja para ti y se encarga de todos los dolores de cabeza.

Obtenga más información sobre Grafana Cloud o pruebe la guía de inicio rápido del host de Grafana Cloud Linux.

==== Grafana Enterprise

Grafana Enterprise es una edición comercial de Grafana que incluye funciones adicionales que no se encuentran en la versión de código abierto.

Sobre la base de todo lo que ya sabe y ama sobre Grafana, Grafana Enterprise agrega fuentes de datos empresariales, opciones de autenticación avanzadas, más controles de permisos, soporte 24x7x365 y capacitación del equipo central de Grafana.

Obtenga más información sobre Grafana Enterprise. Para comprar Enterprise u obtener una licencia de prueba, comuníquese con el equipo de ventas de Grafana Labs.

=== Con Grafana

==== Comenzando con Grafana

Este tema lo ayuda a comenzar con Grafana y a crear su primer tablero. Para obtener más información sobre Grafana, consulte ¿Qué es Grafana ?.

*Nota:* Grafana también ofrece una cuenta gratuita con Grafana Cloud para ayudarlo a comenzar de manera aún más fácil y rápida. Puede instalar Grafana para autohospedarse u obtener una cuenta gratuita de Grafana Cloud.

===== Paso 1: instala Grafana

Grafana se puede instalar en muchos sistemas operativos diferentes. Para obtener una lista de los requisitos mínimos de hardware y software, así como instrucciones sobre cómo instalar Grafana, consulte Instalar Grafana.

===== Paso 2: iniciar sesión

Para iniciar sesión en Grafana por primera vez:

[arabic]
. Abra su navegador web y vaya a http://localhost:3000/. El puerto HTTP predeterminado que escucha Grafana es 3000 a menos que haya configurado un puerto diferente.
. En la página de inicio de sesión, ingrese admin como nombre de usuario y contraseña.
. Haga clic en *Iniciar sesión*. Si el inicio de sesión es exitoso, verá un mensaje para cambiar la contraseña.
. Haga clic en *Aceptar* en el mensaje, luego cambie su contraseña.

*Nota:* Le recomendamos encarecidamente que siga las mejores prácticas de Grafana y cambie la contraseña de administrador predeterminada. ¡No olvide registrar sus credenciales!

===== Paso 3: crear un tablero

Para crear su primer tablero:

[arabic]
. Haga clic en el icono *+* en el panel izquierdo, seleccione *Crear tablero* y luego haga clic en *Agregar un panel vacío*.
. En la vista Nuevo tablero / Editar panel, vaya a la pestaña *Consulta*.
. Configure su consulta seleccionando - - Grafana - - en el selector de fuente de datos. Esto genera el tablero de Random Walk.
. Haga clic en el icono *Guardar* en la esquina superior derecha de su pantalla para guardar el tablero.
. Agregue un nombre descriptivo y luego haga clic en *Guardar*.

Felicitaciones, ha creado su primer tablero y está mostrando resultados.

===== Próximos pasos

Continúe experimentando con lo que ha creado, pruebe el flujo de trabajo de exploración u otra función de visualización. Consulte Fuentes de datos para obtener una lista de fuentes de datos compatibles e instrucciones sobre cómo agregar una fuente de datos. Los siguientes temas serán de su interés:

* Paneles
* Tableros
* Atajos de teclado
* Complementos

====== Administradores

Los siguientes temas son de interés para los usuarios administradores del servidor Grafana:

* Configuración de Grafana
* Autenticación
* Permisos y roles de usuario
* Aprovisionamiento
* CLI de Grafana

=== Con Grafana y Prometheus

==== Comenzando con Grafana y Prometheus

Prometheus es un sistema de monitoreo de sistemas de código abierto para el cual Grafana brinda soporte listo para usar. Este tema lo guía a través de los pasos para crear una serie de tableros en Grafana para mostrar métricas del sistema para un servidor monitoreado por Prometheus.

También puede configurar una instancia de Grafana Cloud para mostrar las métricas del sistema sin tener que alojar Grafana usted mismo.

===== Paso 1. Instale Grafana y cree su primer tablero

Utilice las instrucciones de Comenzando con Grafana para:

* Instalar Grafana.
* Iniciar sesión en Grafana.
* Crear su primer tablero.

También puede configurar una instancia de Grafana Cloud para mostrar las métricas del sistema sin tener que alojar Grafana usted mismo.

===== Paso 2. Descargue Prometheus y node_exporter

Prometheus, como Grafana, se puede instalar en muchos sistemas operativos diferentes. Consulte la página de descarga de Prometheus, que enumera todas las versiones estables de los componentes de Prometheus. Descargue los siguientes componentes:

* Prometheus
* node_exporter

===== Paso 3. Instale Prometheus node_exporter

Prometheus node_exporter es una herramienta ampliamente utilizada que expone las métricas del sistema. Instale node_exporter en todos los hosts que desee supervisar. Para obtener instrucciones sobre cómo instalar node_exporter, consulte la sección Instalación y ejecución de node_exporter en la documentación de Prometheus.

*Nota:* Las instrucciones del tema al que se hace referencia están destinadas a usuarios de Linux. Puede que tenga que modificar ligeramente las instrucciones en función de su sistema operativo. Por ejemplo, si está en Windows, use windows_exporter en su lugar.

===== Paso 4. Instalar y configurar Prometheus

[arabic]
. Instale Prometheus siguiendo las instrucciones del tema Instalación en la documentación de Prometheus.
. Configure Prometheus para monitorear los hosts donde instaló node_exporter. Para hacer esto, modifique el archivo de configuración de Prometheus. Por defecto, Prometheus busca el archivo prometheus.yml en el directorio de trabajo actual. Este comportamiento se puede cambiar mediante la marca de línea de comando --config.file . Por ejemplo, algunos instaladores de Prometheus lo utilizan para establecer el archivo de configuración en /etc/prometheus/prometheus.yml . A continuación, se muestra un ejemplo del código que deberá agregar.

/* Una configuración de extracción que contiene exactamente un punto final para extraer de node_exporter que se ejecuta en un host:

scrape_configs:

/* El nombre del trabajo se agrega como una etiqueta `job = <job_name>` a cualquier serie temporal extraída de esta configuración.

- job_name: 'node'

/* metrics_path tiene como valor predeterminado '/ metrics'

/* scheme tiene como valor predeterminado 'http'.

static_configs:

- targets: ['<nombre de host>: 9100']

[arabic, start=3]
. Inicie el servicio Prometheus:

./prometheus --config.file =. / prometheus.yml

===== Paso 5. Verifique las métricas de Prometheus en la vista Explorar de Grafana

En su instancia de Grafana, vaya a la vista Explorar y cree consultas para experimentar con las métricas que desea monitorear. Aquí también puede depurar problemas relacionados con la recopilación de métricas de Prometheus. Preste especial atención a las funciones específicas de Prometheus para aprovechar la experiencia de consulta personalizada para Prometheus.

===== Paso 6. Empiece a crear tableros

Ahora que tiene una lista seleccionada de consultas, cree tableros para representar las métricas del sistema monitoreadas por Prometheus. Cuando instale Prometheus y node_exporter o windows_exporter, encontrará tableros recomendados para su uso.

La siguiente imagen muestra un tablero con tres paneles que muestran algunas métricas del sistema.

image:extracted-media\media\image1.png[https://grafana.com/static/img/docs/getting-started/simple_grafana_prom_dashboard.png,width=624,height=319]

=== Series de tiempo

==== Introducción a las series de tiempo

Imagina que quisiera saber cómo cambia la temperatura exterior a lo largo del día. Una vez cada hora, revisaría el termómetro y anotaría la hora junto con la temperatura actual. Después de un tiempo, tendrías algo como esto:

[cols=",",]
|===
|Tiempo |Valor
|9:00 |24 ° C
|10:00 |26 ° C
|11:00 |27 ° C
|===

Los datos de temperatura como este son un ejemplo de lo que llamamos una _serie de tiempo_: una secuencia de medidas, ordenadas en el tiempo. Cada fila de la tabla representa una medición individual en un momento específico.

Las tablas son útiles cuando desea identificar medidas individuales pero dificultan ver el panorama general. Una visualización más común para las series de tiempo es el _gráfico_, que en su lugar coloca cada medición a lo largo de un eje de tiempo. Las representaciones visuales como el gráfico facilitan el descubrimiento de patrones y características de los datos que de otro modo serían difíciles de ver.

image:extracted-media\media\image2.png[https://grafana.com/static/img/docs/example_graph.png,width=624,height=159]

Los datos de temperatura como el del ejemplo están lejos de ser el único ejemplo de una serie de tiempo. Otros ejemplos de series de tiempo son:

* Uso de CPU y memoria
* Datos de sensor
* Índice del mercado de valores

Si bien cada uno de estos ejemplos son secuencias de medidas ordenadas cronológicamente, también comparten otros atributos:

* Los datos nuevos se agregan al final, a intervalos regulares, por ejemplo, cada hora a las 09:00, 10:00, 11:00, etc.
* Las mediciones rara vez se actualizan después de agregarlas; por ejemplo, la temperatura de ayer no cambia.

Las series de tiempo son poderosas. Le ayudan a comprender el pasado permitiéndole analizar el estado del sistema en cualquier momento. Las series de tiempo pueden indicarle que el servidor se bloqueó momentos después de que el espacio libre en disco se redujera a cero.

Las series de tiempo también pueden ayudarlo a predecir el futuro al descubrir tendencias en sus datos. Si el número de usuarios registrados ha aumentado mensualmente en un 4% durante los últimos meses, puede predecir qué tan grande será su base de usuarios al final del año.

Algunas series de tiempo tienen patrones que se repiten durante un período conocido. Por ejemplo, la temperatura suele ser más alta durante el día, antes de bajar por la noche. Al identificar estas series de tiempo periódicas o _estacionales_, puede hacer predicciones confiables sobre el próximo período. Si sabemos que la carga del sistema alcanza su punto máximo todos los días alrededor de las 18:00, podemos agregar más máquinas justo antes.

===== Agregando series de tiempo

Dependiendo de lo que esté midiendo, los datos pueden variar mucho. ¿Y si quisiera comparar períodos más largos que el intervalo entre mediciones? Si midiera la temperatura una vez cada hora, terminaría con 24 puntos de datos por día. Para comparar la temperatura en agosto a lo largo de los años, tendría que combinar los 31 por 24 puntos de datos en uno.

La combinación de una colección de medidas se llama _agregación_. Hay varias formas de agregar datos de series de tiempo. Éstos son algunos de los más comunes:

* *Promedio* devuelve la suma de todos los valores dividida por el número total de valores.
* *Min* y *Max* devuelven el valor más pequeño y más grande de la colección.
* *Sum* devuelve la suma de todos los valores de la colección.
* *Contar* devuelve el número de valores de la colección.

Por ejemplo, al agregar los datos en un mes, puede determinar que agosto de 2017 fue, en promedio, más cálido que el año anterior. En cambio, para ver qué mes tuvo la temperatura más alta, compararía la temperatura máxima de cada mes.

La forma en que elige agregar sus datos de series de tiempo es una decisión importante y depende de la historia que quiera contar con sus datos. Es común utilizar diferentes agregaciones para visualizar los mismos datos de series de tiempo de diferentes formas.

===== Monitoreo y series de tiempo

En la industria de TI, los datos de series de tiempo a menudo se recopilan para monitorear cosas como la infraestructura, el hardware o los eventos de las aplicaciones. Los datos de series de tiempo generados por máquinas generalmente se recopilan con intervalos cortos, lo que le permite reaccionar ante cualquier cambio inesperado, momentos después de que ocurran. Como consecuencia, los datos se acumulan a un ritmo rápido, por lo que es vital tener una forma de almacenar y consultar datos de manera eficiente. Como resultado, las bases de datos optimizadas para datos de series de tiempo han experimentado un aumento en popularidad en los últimos años.

====== Bases de datos de series de tiempo

Una base de datos de series de tiempo (TSDB) es una base de datos diseñada explícitamente para datos de series de tiempo. Si bien es posible utilizar cualquier base de datos normal para almacenar mediciones, una TSDB viene con algunas optimizaciones útiles.

Las bases de datos de series de tiempo modernas aprovechan el hecho de que las mediciones solo se agregan y rara vez se actualizan o eliminan. Por ejemplo, las marcas de tiempo para cada medición cambian muy poco con el tiempo, lo que resulta en el almacenamiento de datos redundantes.

Mire esta secuencia de marcas de tiempo de Unix:

1572524345, 1572524375, 1572524404, 1572524434, 1572524464

Al observar estas marcas de tiempo, todas comienzan con 1572524, lo que conduce a un uso deficiente del espacio en disco. En su lugar, podríamos almacenar cada marca de tiempo subsiguiente como la diferencia, o delta, de la primera:

1572524345, +30, +29, +30, +30

Incluso podríamos dar un paso más, calculando los deltas de estos deltas:

1572524345, +30, -1, +1, +0

Si se toman medidas a intervalos regulares, la mayoría de estos deltas-de-deltas serán 0. Debido a optimizaciones como estas, las TSDB usan drásticamente menos espacio que otras bases de datos.

Otra característica de una TSDB es la capacidad de filtrar mediciones mediante _etiquetas_. Cada punto de datos está etiquetado con una etiqueta que agrega información de contexto, como dónde se tomó la medición. A continuación, se muestra un ejemplo del formato de datos de InfluxDB que demuestra cómo se almacena cada medición.

Estas son algunas de las TSDB compatibles con Grafana:

* Grafito
* InfluxDB
* Prometheus

clima, ubicación = us-midwest temperature = 82 1465839830100400200

| -------------------- -------------- |

| | | |

| | | |

+ ----------- + -------- + - + --------- + - + --------- +

| medición |, tag_set | | field_set | | marca de tiempo |

+ ----------- + -------- + - + --------- + - + --------- +

====== Recopilación de datos de series de tiempo

Ahora que tenemos un lugar para almacenar nuestra serie de tiempo, ¿cómo recopilamos las medidas? Para recopilar datos de series de tiempo, normalmente instalaría un _recopilador_ en el dispositivo, la máquina o la instancia que desea monitorear. Algunos recopiladores se crean con una base de datos específica en mente y algunos admiten diferentes destinos de salida.

A continuación, se muestran algunos ejemplos de recopiladores:

* collectd
* statsd
* Exportadores de Prometheus
* Telegraf

Un recopilador _envía_ datos a una base de datos o permite que la base de datos _extraiga_ los datos de ella. Ambos métodos tienen sus propios pros y contras:

[cols=",,",options="header",]
|===
|Pros |Contras |
|Enviar |Más fácil para replicar datos a múltiples destinos. |La TSDB no tiene control sobre la cantidad de datos que se envían.
|Extraer |Mejor control sobre la cantidad de datos que se ingieren y su autenticidad. |Los cortafuegos, las VPN o los equilibradores de carga pueden dificultar el acceso a los agentes.
|===

Dado que sería ineficaz escribir todas las mediciones en la base de datos, los recopiladores agregan previamente los datos y escriben en la base de datos de series de tiempo a intervalos regulares.

=== Dimensiones de las series de tiempo

==== Dimensiones de las series de tiempo

En Introducción a las series de tiempo, se introduce el concepto de _etiquetas_:

____
Otra característica de una TSDB es la capacidad de filtrar mediciones mediante _etiquetas_. Cada punto de datos está etiquetado con una etiqueta que agrega información de contexto, como dónde se tomó la medición.
____

Con los datos de series de tiempo, los datos a menudo contienen más de una serie y son un conjunto de multiples series de tiempo. Muchas fuentes de datos de Grafana admiten este tipo de datos.

image:extracted-media\media\image3.png[https://grafana.com/static/img/docs/example_graph_multi_dim.png,width=624,height=280]

El caso común es emitir una única consulta para una medición con una o más propiedades adicionales como dimensiones. Por ejemplo, consultar una medición de temperatura junto con una propiedad de ubicación. En este caso, se devuelven varias series desde esa única consulta y cada serie tiene una ubicación única como dimensión.

Para identificar series únicas dentro de un conjunto de series de tiempo, Grafana almacena dimensiones en _etiquetas_.

===== Etiquetas

Cada serie de tiempo en Grafana tiene opcionalmente etiquetas. Las etiquetas se establecen en pares clave / valor para identificar dimensiones. Las etiquetas de ejemplo podrían ser \{ubicación = us} o \{país = us, estado = ma, ciudad = boston}. Dentro de un conjunto de series de tiempo, la combinación de su nombre y etiquetas identifica cada serie. Por ejemplo, temperatura \{país = us, estado = ma, ciudad = boston}.

Las diferentes fuentes de datos de series de tiempo tienen dimensiones almacenadas de forma nativa o patrones de almacenamiento comunes que permiten extraer los datos en dimensiones.

Las bases de datos de series de tiempo (TSDB) suelen admitir de forma nativa la dimensionalidad. Prometheus también almacena dimensiones en _etiquetas_.

En bases de datos de tablas como SQL, estas dimensiones son generalmente los parámetros AGRUPAR POR de una consulta.

===== Varias dimensiones en formato de tabla

En SQL o bases de datos similares a SQL que devuelven respuestas de tabla, las dimensiones adicionales suelen ser columnas en la tabla de respuesta de la consulta.

====== Dimensión única

Por ejemplo, considere una consulta como:

SELECCIONE CUBETA(HoraDeInicio, 1h), AVG(Temperatura) AS Temp, Ubicación DESDE T

AGRUPAR POR CUBETA(HoraDeInicio, 1h), Ubicación

ORDENAR POR tiempo asc

Podría devolver una tabla con tres columnas, cada una de las cuales tiene respectivamente tipos de datos tiempo, número y cadena.

[cols=",,",options="header",]
|===
|HoraDeInicio |Temp |Ubicación
|9:00 |24 |LGA
|9:00 |20 |BOS
|10:00 |26 |LGA
|10:00 |22 |BOS
|===

El formato de la tabla es una serie de tiempo con formato _largo_, también llamado _alto_. Tiene marcas de tiempo repetidas y valores repetidos en Ubicación. En este caso, tenemos dos series de tiempo en el conjunto que se identificarían como Temp \{Ubicación = LGA} y Temp \{Ubicación = BOS}.

Las series de tiempo individuales del conjunto se extraen utilizando la columna con tipo de tiempo HoraDeInicio como índice de tiempo de la serie de tiempo, la columna de tipo numérico Temp como el nombre de la serie y el nombre y los valores de la columna de Ubicación con tipo de cadena para construir las etiquetas, como Ubicación = LGA.

====== Múltiples dimensiones

Si la consulta se actualiza para seleccionar y agrupar por más de una columna de cadena, por ejemplo, AGRUPAR POR CUBETA(HoraDeInicio, 1h), Ubicación, Sensor, entonces se agrega una dimensión adicional:

[cols=",,,",options="header",]
|===
|HoraDeInicio |Temp |Ubicación |Sensor
|9:00 |24 |LGA |A
|9:00 |24.1 |LGA |B
|9:00 |20 |BOS |A
|9:00 |20.2 |BOS |B
|10:00 |26 |LGA |A
|10:00 |26.1 |LGA |B
|10:00 |22 |BOS |A
|10:00 |22.2 |BOS |B
|===

En este caso, las etiquetas que representan las dimensiones tendrán dos claves basadas en las dos columnas con tipo de cadena Ubicación y Sensor. Estos datos dan como resultado cuatro series: Temp \{Ubicación = LGA, Sensor = A}, Temp \{Ubicación = LGA, Sensor = B}, Temp \{Ubicación= BOS, Sensor = A} y Temp \{Ubicación= BOS, Sensor = B} .

*Nota:* Actualmente, más de una dimensión solo se admite en las consultas de registros dentro del servicio Azure Monitor a partir de la versión 7.1.

*Nota:* No se admiten varias dimensiones de forma que se asignen a varias alertas en Grafana, sino que se tratan como varias condiciones para una sola alerta. Consulte la documentación sobre cómo crear alertas con varias series.

====== Múltiples valores

En el caso de fuentes de datos similares a SQL, se puede seleccionar más de una columna numérica, con o sin columnas de cadena adicionales para usar como dimensiones. Por ejemplo, AVG(Temperatura) AS AvgTemp, MAX(Temperatura) AS MaxTemp. Esto, si se combina con múltiples dimensiones, puede resultar en muchas series. Actualmente, la selección de varios valores solo está diseñada para usarse con visualización.

Se puede encontrar información técnica adicional sobre formatos tabulares de series de tiempo y cómo se extraen las dimensiones en la documentación del desarrollador sobre marcos de datos como series de tiempo.

=== Glosario

==== Glosario

Este tema enumera palabras y abreviaturas que se usan comúnmente en la documentación y la comunidad de Grafana.

[cols=",",options="header",]
|===
|Tablero |Un conjunto de uno o más paneles, organizados y dispuestos en una o más filas, que proporcionan un vistazo de la información relacionada.
|Fuente de datos |Un archivo, base de datos o servicio que proporciona los datos. Grafana admite varias fuentes de datos de forma predeterminada y se puede ampliar para admitir fuentes de datos adicionales a través de complementos.
|Ejemplar |Un ejemplar es cualquier dato que sirve como ejemplo detallado de una de las observaciones agregadas en una métrica. Un ejemplar contiene el valor observado junto con una marca de tiempo opcional y etiquetas arbitrarias, que normalmente se utilizan para hacer referencia a un rastreo.
|Explorar |Explorar permite que un usuario se centre en crear una consulta. Los usuarios pueden refinar la consulta para devolver las métricas esperadas antes de crear un tablero. Para obtener más información, consulte el tema Explorar.
|Exportar / Importar tablero |Grafana incluye la capacidad de exportar sus tableros a un archivo que contiene JSON. Los miembros de la comunidad a veces comparten sus tableros creados en la página Grafana Dashboards. Otros usuarios pueden importar tableros previamente exportados o encontrados en este sitio.
|Exportador |Un exportador traduce los datos que provienen de una fuente de datos a un formato que Prometheus puede digerir.
|Integración (Grafana Cloud) |Cada integración en Grafana Cloud utiliza el agente de nube para conectar su fuente de datos a Grafana Cloud para la visualización. Nota: Prometheus usa la palabra "integraciones" para referirse al software que expone las métricas de Prometheus sin necesidad de un exportador, que es un uso diferente de la misma palabra que usamos aquí.
|Gráfico |Una visualización de uso común que muestra datos como puntos, líneas o barras.
|Mixin |Un mixin es un conjunto de tableros de Grafana y reglas y alertas de Prometheus, escritos en Jsonnet y empaquetados en un paquete.
|Panel |Unidad fundamental de Grafana, compuesto por una consulta y una visualización. Se puede mover y cambiar de tamaño dentro de un tablero.
|Complemento a|
Una extensión de Grafana que permite a los usuarios proporcionar funcionalidad adicional para mejorar su experiencia. Los tipos de complementos admitidos actualmente son:

* *Complemento de la aplicación:* amplía Grafana con una experiencia personalizada. Incluye un conjunto de complementos de panel y fuente de datos, así como páginas personalizadas.
* *Complemento de fuente de datos:* amplía Grafana con soporte para fuentes de datos adicionales.
* *Complemento de panel:* amplía Grafana con opciones de visualización adicionales.

|Consulta |Se utiliza para solicitar datos de una fuente de datos. La estructura y el formato de la consulta dependen de la fuente de datos específica.
|Serie de tiempo |Una serie de medidas ordenadas por tiempo. Las series de tiempo se almacenan en fuentes de datos y se devuelven como resultado de una consulta.
|Rastreo |Una ruta de ejecución observada de una solicitud a través de un sistema distribuido. Para obtener más información, consulte ¿Qué es el rastreo distribuido?
|Transformación |Las transformaciones procesan el conjunto de resultados de una consulta antes de pasarla para su visualización. Para obtener más información, consulte el tema de descripción general Transformaciones.
|Visualización |Una representación gráfica de los resultados de la consulta.
|===

== Autenticación

=== Descripción general

==== Descripción general de la autenticación de usuario

Grafana ofrece muchas formas de autenticar a los usuarios. Algunas integraciones de autenticación también permiten sincronizar permisos de usuario y membresías de organizaciones.

A continuación, se muestra una tabla que muestra todos los proveedores de autenticación admitidos y las funciones disponibles para ellos. La sincronización de equipo y la sincronización activa solo están disponibles en Grafana Enterprise.

Consulte también Autenticación de Grafana.

[cols=",,,,",options="header",]
|===
|Provider |Support |Role mapping |Team sync (Enterprise only) |Active sync (Enterprise only)
| | | | |
|https://grafana.com/docs/grafana/latest/auth/auth-proxy/[Auth Proxy] |v2.1+ |- |v6.3+ |-
|https://grafana.com/docs/grafana/latest/auth/azuread/[Azure AD OAuth] |v6.7+ |v6.7+ |v6.7+ |-
|https://grafana.com/docs/grafana/latest/auth/generic-oauth/[Generic OAuth] |v4.0+ |v6.5+ |- |-
|https://grafana.com/docs/grafana/latest/auth/github/[GitHub OAuth] |v2.0+ |- |v6.3+ |-
|https://grafana.com/docs/grafana/latest/auth/gitlab/[GitLab OAuth] |v5.3+ |- |v6.4+ |-
|https://grafana.com/docs/grafana/latest/auth/google/[Google OAuth] |v2.0+ |- |- |-
|https://grafana.com/docs/grafana/latest/auth/ldap/[LDAP] |v2.1+ |v2.1+ |v5.3+ |v6.3+
|https://grafana.com/docs/grafana/latest/auth/okta/[Okta OAuth] |v7.0+ |v7.0+ |v7.0+ |-
|https://grafana.com/docs/grafana/latest/enterprise/saml/[SAML (Enterprise only)] |v6.3+ |v7.0+ |v7.0+ |-
|===

=== Autenticación de Grafana

==== Grafana Auth

Grafana, por supuesto, tiene un sistema de autenticación de usuario integrado con autenticación de contraseña habilitada de forma predeterminada. Puede deshabilitar la autenticación habilitando el acceso anónimo. También puede ocultar el formulario de inicio de sesión y solo permitir el inicio de sesión a través de un proveedor de autenticación (mencionado anteriormente). También hay opciones para permitir el registro automático.

===== Inicio de sesión y tokens de corta duración

Lo siguiente se aplica cuando se utiliza la autenticación de usuario integrada de Grafana, LDAP (sin proxy de autenticación) o la integración de OAuth.

Grafana está utilizando tokens de corta duración como mecanismo para verificar usuarios autenticados. Estos tokens de corta duración se rotan cada token_rotation_interval_minutes para un usuario autenticado activo.

Un usuario autenticado activo al que han rotado su token extenderá el tiempo login_maximum_inactive_lifetime_days desde "ahora" que Grafana recordará al usuario. Esto significa que un usuario puede cerrar su navegador y regresar antes de ahora + login_maximum_inactive_lifetime_days y aún estar autenticado. Esto es cierto siempre que el tiempo transcurrido desde el inicio de sesión del usuario sea inferior a login_maximum_lifetime_days.

====== Cierre de sesión remoto

Puede cerrar sesión desde otros dispositivos eliminando las sesiones iniciadas desde la parte inferior de la página de su perfil. Si es un usuario administrador de Grafana, también puede hacer lo mismo para cualquier usuario desde la vista Administrador del servidor / Editar usuario.

==== Ajustes

Ejemplo:

{empty}[auth]

/* Nombre de la cookie de inicio de sesión

login_cookie_name = grafana_session

/* El tiempo de vida (días) que un usuario autenticado puede estar inactivo antes de que se le solicite que inicie sesión en la próxima visita. El valor predeterminado es 7 días.

login_maximum_inactive_lifetime_days = 7

/* La vida máxima (días) que un usuario autenticado puede iniciar sesión desde el tiempo de inicio de sesión antes de que se le solicite iniciar sesión. El valor predeterminado es 30 días.

login_maximum_lifetime_days = 30

/* ¿Con qué frecuencia se deben rotar los tokens de autenticación para los usuarios autenticados cuando están activos? El valor predeterminado es cada 10 minutos.

token_rotation_interval_minutes = 10

/* La vida útil máxima (segundos) que se puede usar una clave api. Si se establece, todas las claves de la API deberían tener una vida útil limitada inferior a este valor.

api_key_max_seconds_to_live = -1

===== Autenticación anónima

Puede hacer que Grafana sea accesible sin necesidad de iniciar sesión habilitando el acceso anónimo en el archivo de configuración. Para obtener más información, consulte Implicaciones de permitir el acceso anónimo a los tableros.

Ejemplo:

{empty}[auth.anonymous]

enabled = true

/* Nombre de la organización que debe usarse para usuarios no autenticados

org_name = Main Org.

/* Rol para usuarios no autenticados, otros valores válidos son `Editor` y` Admin`

org_role = Viewer

Si cambia el nombre de su organización en la interfaz de usuario de Grafana, esta configuración debe actualizarse para que coincida con el nuevo nombre.

===== Autenticación básica

La autenticación básica está habilitada de forma predeterminada y funciona con el sistema integrado de autenticación de contraseña de usuario de Grafana y la integración de autenticación LDAP.

Para deshabilitar la autenticación básica:

{empty}[auth.basic]

enabled = false

===== Desactivar formulario de inicio de sesión

Puede ocultar el formulario de inicio de sesión de Grafana utilizando los siguientes ajustes de configuración.

{empty}[auth]

disable_login_form = true

===== Inicio de sesión automático de OAuth

Configure en verdadero para intentar iniciar sesión con OAuth automáticamente, omitiendo la pantalla de inicio de sesión. Esta configuración se ignora si se configuran varios proveedores de OAuth. El valor predeterminado es falso.

{empty}[auth]

oauth_auto_login = true

===== Ocultar el menú de cierre de sesión

Establezca la opción que se detalla a continuación en verdadero para ocultar el enlace del menú de cierre de sesión. Útil si usa un proxy de autenticación.

{empty}[auth]

disable_signout_menu = true

===== Redireccionamiento de URL después de cerrar sesión

URL a la que redirigir al usuario después de cerrar sesión en Grafana. Esto se puede utilizar, por ejemplo, para habilitar el cierre de sesión del proveedor de oauth.

{empty}[auth]

signout_redirect_url =

== Instalación

=== Instalar Grafana

Esta sección analiza los requisitos de hardware y software, así como el proceso de instalación de Grafana en diferentes sistemas operativos. Esta sección tiene los siguientes temas:

* Requisitos
* Instalar en Debian o Ubuntu
* Instalar en Linux basado en RPM (CentOS, Fedora, OpenSuse, RedHat)
* Instalar en macOS
* Instalar en Windows
* Ejecutar imagen de Docker
* Implementar Grafana en Kubernetes

Para obtener instrucciones de actualización, consulte Actualizar Grafana. Para reiniciar Grafana, consulte Reiniciar Grafana.

Para instalar Grafana Enterprise, consulte las instrucciones para instalar Grafana en su sistema. Luego, consulte Activar una licencia empresarial.

=== Requisitos

==== Requisitos de Grafana

Esta página enumera los requisitos mínimos de hardware y software para instalar Grafana.

Para ejecutar Grafana, debe tener un sistema operativo compatible, hardware que cumpla o supere los requisitos mínimos, una base de datos compatible y un navegador compatible.

Grafana utiliza otro software de código abierto. Consulte package.json para obtener una lista completa.

===== Sistemas operativos compatibles

Los siguientes sistemas operativos son compatibles con la instalación de Grafana:

* Debian / Ubuntu
* Linux basado en RPM (CentOS, Fedora, OpenSuse, RedHat)
* Mac OS
* Windows

La instalación de Grafana en otros sistemas operativos es posible, pero no se recomienda ni se admite.

===== Recomendaciones de hardware

Grafana no usa muchos recursos y es muy liviano en el uso de memoria y CPU.

Memoria mínima recomendada: 255 MB, CPU mínimo recomendado: 1

Algunas funciones pueden requerir más memoria o CPU. Las características que requieren más recursos incluyen:

* Representación de imágenes del lado del servidor
* Alertas
* Proxy de fuente de datos

===== Bases de datos compatibles

Grafana requiere una base de datos para almacenar sus datos de configuración, como usuarios, fuentes de datos y tableros. Los requisitos exactos dependen del tamaño de la instalación de Grafana y de las funciones utilizadas.

Grafana admite las siguientes bases de datos:

* SQLite
* MySQL
* PostgreSQL

De forma predeterminada, Grafana instala y usa SQLite, que es una base de datos incrustada almacenada en la ubicación de instalación de Grafana.

*Nota:* Las versiones 9.5.18, 9.4.23, 9.6.14, 10.9, 11.4 y 12-beta2 de PostgreSQL se ven afectadas por un error (registrado por el proyecto PostgreSQL como error /*15865) que impide que esas versiones se utilicen con Grafana. El error se ha corregido en versiones más recientes de PostgreSQL.

===== Navegadores web compatibles

Grafana es compatible con la versión actual de los siguientes navegadores. Es posible que las versiones anteriores de estos navegadores no sean compatibles, por lo que siempre debe actualizar a la última versión cuando utilice Grafana.

* Chrome / Chromium
* Firefox
* Safari
* Microsoft Edge
* Internet Explorer 11 solo es totalmente compatible con las versiones de Grafana anteriores a la v6.0.

*Nota:* habilite siempre JavaScript en su navegador. No se admite la ejecución de Grafana sin JavaScript habilitado en el navegador.

=== Instalar en Windows

==== Instalar en Windows

Puede descargar el paquete de instalación de Windows o un archivo binario de Windows independiente.

Lea Actualizando Grafana para obtener sugerencias y orientación sobre cómo actualizar una instalación existente.

[arabic]
. Navegue hasta Descargar Grafana.
. Seleccione la versión de Grafana que desee instalar.
* La versión más reciente de Grafana está seleccionada de forma predeterminada.
* El campo *Versión* muestra solo las versiones terminadas. Si desea instalar una versión beta, haga clic en *Nightly Builds* y luego seleccione una versión.
. Seleccione una *Edición*.
* *Enterprise*: descarga recomendada. Funcionalmente idéntico a la versión de código abierto, pero incluye características que puede desbloquear con una licencia si así lo desea.
* *Open Source*: funcionalmente idéntico a la versión empresarial, pero deberá descargar la versión empresarial si desea funciones empresariales.
. Haga clic en *Windows*.

Puede utilizar el instalador de Windows o puede instalar un binario de Windows independiente.

===== Instalar con el instalador de Windows (recomendado)

[arabic]
. Haz clic en *Descargar el instalador*.
. Abra y ejecute el instalador.

Para ejecutar Grafana, abra su navegador y vaya al puerto de Grafana (http:/ localhost:3000/ es el predeterminado) y luego siga las instrucciones en Comenzando.

===== Instalar binario de Windows independiente

[arabic]
. Haga clic en *Descargar el archivo zip*. *Importante:* Una vez que haya descargado el archivo zip y antes de extraerlo, asegúrese de abrir las propiedades de ese archivo (haga clic con el botón derecho en *Propiedades*) y seleccione la casilla de verificación desbloquear y luego haga clic en Aceptar.
. Extraiga esta carpeta a cualquier lugar desde donde desee que se ejecute Grafana.
. Inicie Grafana ejecutando grafana-server.exe, ubicado en el directorio bin, preferiblemente desde la línea de comandos. Si desea ejecutar Grafana como un servicio de Windows, descargue NSSM. Es muy fácil agregar Grafana como un servicio de Windows usando esa herramienta.

Para ejecutar Grafana, abra su navegador y vaya al puerto de Grafana (http://localhost:3000/ es el predeterminado) y luego siga las instrucciones en Comenzando.

*Nota:* El puerto Grafana predeterminado es 3000. Este puerto puede requerir permisos adicionales en Windows. Si no aparece en el puerto predeterminado, puede intentar cambiar a un puerto diferente.

[arabic]
. Vaya al directorio conf y copie sample.ini en custom.ini. *Nota:* debe editar custom.ini, nunca defaults.ini.
. Edite custom.ini y elimine el comentario de la opción de configuración http_port (; es el carácter de comentario en los archivos ini) y cámbielo a algo como 8080 o similar. Ese puerto no debería requerir privilegios adicionales de Windows. Lea más sobre las opciones de configuración.

=== Actualizar Grafana

==== Actualizar Grafana

Le recomendamos que actualice Grafana con frecuencia para mantenerse al día con las últimas correcciones y mejoras. Para que esto sea una realidad, las actualizaciones de Grafana son compatibles con versiones anteriores y el proceso de actualización es simple y rápido.

La actualización es generalmente segura (entre muchas versiones menores y una principal) y los tableros y los gráficos tendrán el mismo aspecto. Puede haber pequeños cambios importantes en algunos casos extremos, que se describen en las Notas de la versión y el Registro de cambios.

===== Respaldo

Le recomendamos que haga una copia de seguridad de algunas cosas en caso de que tenga que revertir la actualización.

* Complementos instalados: realice una copia de seguridad de ellos antes de actualizarlos en caso de que desee revertir la versión de Grafana y desee obtener exactamente las mismas versiones que estaba ejecutando antes de la actualización.
* No es necesario hacer una copia de seguridad de los archivos de configuración. Sin embargo, es posible que desee hacerlo en caso de que agregue nuevas opciones de configuración después de la actualización y luego retroceda.

====== Copia de seguridad de la base de datos

Antes de actualizar, puede ser una buena idea hacer una copia de seguridad de su base de datos de Grafana. Esto asegurará que siempre pueda volver a su versión anterior. Durante el inicio, Grafana migrará automáticamente el esquema de la base de datos (si hay cambios o tablas nuevas). A veces, esto puede causar problemas si luego desea cambiar a una versión anterior.

======= sqlite

Si usa sqlite, solo necesita hacer una copia de seguridad de su archivo grafana.db. Normalmente se encuentra en /var/lib/grafana/grafana.db en sistemas Unix. Si no está seguro de qué base de datos utiliza y dónde está almacenada, consulte el archivo de configuración de grafana. Si instaló grafana en una ubicación personalizada utilizando un tar / zip binario, generalmente se encuentra en <grafana_install_dir> / data.

======= mysql

backup:

> mysqldump -u root -p[root_password] [grafana]> grafana_backup.sql

restore:

> mysql -u root -p grafana < grafana_backup.sql

======= postgres

backup:

> pg_dump grafana > grafana_backup

restore:

> psql grafana < grafana_backup

====== Windows

Si descargó el paquete binario de Windows, puede descargar un paquete más nuevo y extraerlo en la misma ubicación (y sobrescribir los archivos existentes). Esto podría sobrescribir los cambios de configuración. Le recomendamos que guarde sus cambios de configuración en un archivo llamado <grafana_install_dir> /conf/custom.ini ya que esto facilitará las actualizaciones sin correr el riesgo de perder sus cambios de configuración.

===== Actualizar complementos

Una vez que haya actualizado, le recomendamos encarecidamente que actualice todos sus complementos, ya que una nueva versión de Grafana puede hacer que los complementos más antiguos dejen de funcionar correctamente.

Puede actualizar todos los complementos usando

grafana-cli plugins update-all

=== Reiniciar Grafana

==== Reiniciar Grafana

Los usuarios a menudo necesitan reiniciar Grafana después de haber realizado cambios de configuración. Este tema proporciona instrucciones detalladas sobre cómo reiniciar en los sistemas operativos compatibles con Grafana.

===== Windows

Para reiniciar Grafana:

[arabic]
. Abra la aplicación Servicios.
. Haga clic con el botón derecho en el servicio *Grafana*.
. En el menú contextual, haga clic en *Reiniciar*.

== Administración

=== Administración

Esta sección incluye información para administradores de Grafana, administradores de equipo y usuarios que realizan tareas administrativas:

* Cambiar preferencias
* Configuración
* Seguridad

=== Preferencias

==== Preferencias de Grafana

Las preferencias de Grafana son configuraciones básicas. Controlan el tema de la interfaz de usuario de Grafana, el panel de inicio, la zona horaria, etc.

Las preferencias a veces son confusas porque se pueden establecer en cuatro niveles diferentes, enumerados del nivel más alto al más bajo:

* *Servidor:* afecta a todos los usuarios del servidor de Grafana. Establecido por un administrador de servidor de Grafana.
* *Organización:* afecta a todos los usuarios de una organización. Establecido por un administrador de la organización.
* *Equipo:* afecta a todos los usuarios asignados a un equipo. Establecido por un administrador de organización o administrador de equipo. Para obtener más información sobre estos roles, consulte Roles de la organización.
* *Cuenta de usuario:* afecta al usuario individual. Establecido por el usuario en su propia cuenta.

El nivel más bajo siempre tiene prioridad. Por ejemplo, si un usuario establece su tema en Luz, entonces su visualización de Grafana muestra el tema de luz. Nada en ningún nivel superior puede anular eso.

Si el usuario es consciente del cambio y tiene la intención de hacerlo, ¡es genial! Pero si el usuario es un administrador de servidor que hizo el cambio en sus preferencias de usuario hace mucho tiempo, es posible que haya olvidado que lo hizo. Luego, si ese administrador del servidor está tratando de cambiar el tema a nivel del servidor, se frustrará ya que ninguno de sus cambios tiene ningún efecto que puedan ver. (Además, los usuarios del servidor pueden estar confundidos, ¡porque pueden ver los cambios en el nivel del servidor!)

==== Cambiar nombre y correo electrónico

===== Cambiar el nombre y el correo electrónico de Grafana

En Grafana, puede cambiar sus nombres y correos electrónicos asociados con grupos o cuentas en Configuración o Preferencias. Este tema proporciona instrucciones para cada tarea.

Algunas tareas requieren ciertos permisos. Para obtener más información sobre los roles, consulte Permisos.

====== Cambiar el nombre de la organización

Los administradores del servidor de Grafana y los administradores de la organización pueden cambiar los nombres de las organizaciones.

======= Cambiar el nombre de la organización como administrador del servidor de grafana

Siga estas instrucciones si es administrador del servidor de Grafana.

[arabic]
. Pase el cursor sobre el icono de *Administrador de Servidor* (escudo) hasta que aparezca un menú.
. Haga clic en *Organizaciones*.
. En la lista de organizaciones, haga clic en el nombre de la organización que desea cambiar.
. En *Nombre*, ingrese el nuevo nombre de la organización.
. Haga clic en *Actualizar*.

======= Cambiar el nombre de la organización como administrador de la organización

Si es administrador de una organización, siga estos pasos:

[arabic]
. Pase el cursor sobre el icono de *Configuración* (engranaje).
. Haga clic en *Preferencias*.
. En *Nombre de la organización*, ingrese el nuevo nombre.
. Haz clic en *Actualizar nombre de la organización*.

====== Cambiar el nombre o el correo electrónico del equipo

Los administradores de la organización y los administradores del equipo pueden cambiar los nombres y las direcciones de correo electrónico del equipo. Para cambiar el nombre del equipo o el correo electrónico, siga estos pasos:

[arabic]
. {blank}
+
____
Pase el cursor sobre el icono de *Configuración* (engranaje) en el menú lateral.
____
. {blank}
+
____
Haz clic en *Equipos*. Grafana muestra la lista de equipos.
____
. {blank}
+
____
En la lista de equipos, haga clic en el nombre del equipo que desea cambiar.
____
. {blank}
+
____
Haga clic en la pestaña *Configuración*.
____
. {blank}
+
____
En la sección Configuración del equipo, puede editar lo siguiente:
____

* {blank}
+
____
*Nombre:* edite este campo para cambiar el nombre asociado con el equipo.
____
* {blank}
+
____
*Correo electrónico:* edite este campo para cambiar la dirección de correo electrónico asociada con el equipo.
____

[arabic, start=6]
. {blank}
+
____
Haga clic en *Actualizar*.
____

====== Cambiar nombre de usuario o correo electrónico

Para saber cómo editar su información de usuario, consulte el Perfil de la cuenta de usuario de Grafana.

==== Cambiar el tema de la interfaz de usuario

===== Cambiar el tema de la interfaz de usuario de Grafana

En Grafana, puede modificar el tema de la interfaz de usuario configurado en Configuración o Preferencias. Configure el tema de la interfaz de usuario para el servidor, una organización, un equipo o su cuenta de usuario personal siguiendo las instrucciones de este tema.

Algunas tareas requieren ciertos permisos. Para obtener más información sobre los roles, consulte Permisos.

====== Opciones de tema

El tema afecta la forma en que Grafana muestra gráficos, menús y otros elementos de la interfaz de usuario.

======= Predeterminado

El valor por *predeterminado* es el tema de noche o el tema seleccionado en un nivel superior. Por ejemplo, si un administrador de la organización estableció el tema de *Claro*, entonces ese es el predeterminado para todos los equipos de esa organización.

======= Oscuro

Aquí hay un ejemplo del tema oscuro.

image:extracted-media\media\image4.png[Dark theme example,width=624,height=119]

======= Claro

Aquí hay un ejemplo del tema de claro.

image:extracted-media\media\image5.png[Light theme example,width=624,height=118]

====== Cambiar el tema de la interfaz de usuario del servidor

Los administradores del servidor de Grafana pueden cambiar el tema de la interfaz de usuario de Grafana para todos los usuarios del servidor configurando la opción default_theme en el archivo de configuración de Grafana.

Para ver cuál es la configuración actual, consulte Ver la configuración del servidor.

====== Cambiar el tema de la interfaz de usuario de la organización

Los administradores de la organización pueden cambiar el tema de la interfaz de usuario para todos los usuarios de una organización.

[arabic]
. Pase el cursor sobre el icono de *Configuración* (engranaje).
. Haga clic en *Preferencias*.
. En la sección Preferencias, seleccione el *tema de la interfaz de usuario*.
. Clic en *Guardar*.

====== Cambiar el tema de la interfaz de usuario del equipo

Los administradores de la organización y del equipo pueden cambiar el tema de la interfaz de usuario para todos los usuarios de un equipo.

[arabic]
. Pase el cursor sobre el icono de *Configuración* (engranaje) en el menú lateral.
. Haz clic en *Equipos*. Grafana muestra la lista de equipos.
. Haga clic en el equipo para el que desea cambiar el tema de la interfaz de usuario y luego navegue a la pestaña *Configuración*.
. En la sección Preferencias, seleccione el *tema de la interfaz de usuario*.
. Clic en *Guardar*.

====== Cambia tu tema de interfaz de usuario personal

Puede cambiar el tema de la interfaz de usuario para su cuenta de usuario. Esta configuración anula la configuración del tema de la interfaz de usuario en niveles superiores.

[arabic]
. En el menú de la izquierda, coloca el cursor sobre tu avatar y luego haz clic en *Preferencias*.
. En la sección Preferencias, seleccione el *tema de la interfaz de usuario*.
. Clic en *Guardar*.

==== Cambiar el tablero de inicio

===== Cambiar el tablero de inicio predeterminado

El tablero de inicio que configura es el que todos los usuarios verán de forma predeterminada cuando inicien sesión. Puede configurar el tablero de inicio para el servidor, una organización, un equipo o su cuenta de usuario personal. Este tema proporciona instrucciones para cada tarea.

Algunas tareas requieren ciertos permisos. Para obtener más información sobre los roles, consulte Permisos.

====== Navega hasta el tablero de inicio

El tablero de inicio es el primer tablero que ve un usuario cuando inicia sesión en Grafana. También puede navegar al tablero de inicio de forma manual.

[arabic]
. Coloque el cursor sobre el ícono *Tableros* (cuatro cuadrados).
. Haga clic en *Inicio*.

====== Configurar el tablero de inicio para el servidor

Los usuarios con la marca de administrador de servidor de Grafana en su cuenta o acceso al archivo de configuración pueden definir un archivo JSON para usar como tablero de inicio para todos los usuarios en el servidor.

======= [Opcional] Convierta un tablero existente en un archivo JSON

[arabic]
. Navegue a la página del tablero que desea utilizar como tablero de inicio.
. Haga clic en el icono *Compartir tablero* junto al título del tablero.
. En la pestaña Exportar, haga clic en *Guardar en archivo*. Grafana convierte el tablero en un archivo JSON y lo guarda localmente.

======= Utilice un archivo JSON como tablero de inicio

[arabic]
. Guarde su archivo JSON en algún lugar al que Grafana pueda acceder. Por ejemplo, en la carpeta data de Grafana.
. Actualice su archivo de configuración para establecer la ruta al archivo JSON. Consulte default_home_dashboard_path para obtener más información sobre cómo modificar los archivos de configuración de Grafana.

{empty}[dashboards]

/* Ruta al tablero de inicio predeterminado. Si este valor está vacío, entonces Grafana usa StaticRootPath + "dashboards/home.json"

default_home_dashboard_path = data/main-dashboard.json

====== Configure el tablero de inicio de su organización

Los administradores de la organización pueden elegir un tablero de inicio para su organización.

[arabic]
. Navegue hasta el tablero que desea establecer como tablero de inicio.
. Haga clic en la estrella junto al título del tablero para marcar el tablero como favorito si aún no lo está.
. Pase el cursor sobre el icono de *Configuración* (engranaje).
. Haga clic en *Preferencias*.
. En el campo *Tablero de inicio*, seleccione el tablero que desea utilizar para su tablero de inicio. Las opciones incluyen todos los tableros marcados con estrellas.
. Clic en *Guardar*.

====== Configure el tablero de inicio para su equipo

Los administradores de la organización y los administradores del equipo pueden elegir un tablero de inicio para un equipo.

[arabic]
. Navegue hasta el tablero que desea establecer como tablero de inicio.
. Haga clic en la estrella junto al título del tablero para marcar el tablero como favorito si aún no lo está.
. Pase el cursor sobre el icono de *Configuración* (engranaje) en el menú lateral.
. Haga clic en *Equipos*. Grafana muestra la lista de equipos.
. Haga clic en el equipo para el que desea cambiar el tablero de inicio y luego navegue hasta la pestaña *Configuración*.
. En el campo *Tablero de inicio*, seleccione el tablero que desea utilizar para su tablero de inicio. Las opciones incluyen todos los tablero marcados con estrellas.
. Clic en *Guardar*.

====== Configura tu tablero de inicio personal

Puede elegir su propio tablero de inicio personal. Esta configuración anula todos los tableros de inicio establecidos en niveles superiores.

[arabic]
. Navegue hasta el tablero que desea establecer como tablero de inicio.
. Haga clic en la estrella junto al título del tablero para marcar el tablero como favorito si aún no lo está.
. En el menú de la izquierda, coloque el cursor sobre su avatar y luego haga clic en *Preferencias*.
. En el campo *Tablero de inicio*, seleccione el tablero que desea utilizar para su tablero de inicio. Las opciones incluyen todos los tableros marcados con estrellas.
. Clic en *Guardar*.

==== Cambiar la zona horaria predeterminada

===== Cambiar la zona horaria predeterminada de Grafana

De forma predeterminada, Grafana usa la zona horaria en su navegador web. Sin embargo, puede anular esta configuración a nivel de servidor, organización, equipo o usuario individual. Este tema proporciona instrucciones para cada tarea.

Algunas tareas requieren ciertos permisos. Para obtener más información sobre los roles, consulte Permisos.

====== Establecer zona horaria del servidor

Los administradores del servidor de Grafana pueden elegir una zona horaria predeterminada para todos los usuarios del servidor configurando la opción default_timezone en el archivo de configuración de Grafana.

====== Establecer zona horaria de la organización

Los administradores de la organización pueden elegir una zona horaria predeterminada para su organización.

[arabic]
. Pase el cursor sobre el icono de *Configuración* (engranaje).
. Haga clic en *Preferencias*.
. Haga clic para seleccionar una opción en la lista *Zona horaria*. El valor *predeterminado* es la zona horaria local del navegador o la zona horaria seleccionada en un nivel superior. Consulte Controles de rango de tiempo para obtener más información sobre la configuración de tiempo de Grafana.
. Clic en *Guardar*.

====== Establecer zona horaria del equipo

Los administradores de la organización y los administradores del equipo pueden elegir una zona horaria predeterminada para todos los usuarios de un equipo.

[arabic]
. Pase el cursor sobre el icono de *Configuración* (engranaje) en el menú lateral.
. Haz clic en *Equipos*. Grafana muestra la lista de equipos.
. Haga clic en el equipo para el que desea cambiar la zona horaria y luego navegue a la pestaña *Configuración*.
. Haga clic para seleccionar una opción en la lista *Zona horaria*. El valor *predeterminado* es la zona horaria local del navegador o la zona horaria seleccionada en un nivel superior. Consulte Controles de rango de tiempo para obtener más información sobre la configuración de tiempo de Grafana.
. Clic en *Guardar*.

====== Establece tu zona horaria personal

Puede cambiar la zona horaria de su cuenta de usuario. Esta configuración anula la configuración de la zona horaria en los niveles más altos.

[arabic]
. En el menú de la izquierda, coloca el cursor sobre tu avatar y luego haz clic en *Preferencias*.
. Haga clic para seleccionar una opción en la lista *Zona horaria*. El valor *predeterminado* es la zona horaria local del navegador o la zona horaria seleccionada en un nivel superior. Consulte Controles de rango de tiempo para obtener más información sobre la configuración de tiempo de Grafana.
. Clic en *Guardar*.

=== Ver servidor

==== Ver información del servidor

Esta configuración contiene información sobre las herramientas que los administradores de servidores de Grafana pueden utilizar para obtener más información sobre sus servidores de Grafana.

==== Métricas internas de Grafana

===== Métricas internas de Grafana

Grafana recopila algunas métricas sobre sí mismo internamente. Grafana admite enviar métricas a Graphite o exponerlas para que Prometheus las extraiga.

Para obtener más información sobre las opciones de configuración relacionadas con las métricas de Grafana, consulte métricas y metrics.graphite en Configuración.

====== Métricas disponibles

Cuando está habilitado, Grafana expone una serie de métricas, que incluyen:

* Instancias activas de Grafana
* Número de tableros, usuarios y listas de reproducción
* Códigos de estado HTTP
* Solicitudes por grupo de enrutamiento
* Alertas activas de Grafana
* Rendimiento de Grafana

====== Extraiga métricas de Grafana a Prometheus

Estas instrucciones asumen que ya ha agregado Prometheus como fuente de datos en Grafana.

[arabic]
. Habilite Prometheus para extraer métricas de Grafana. En su archivo de configuración (grafana.ini o custom.ini según su sistema operativo) elimine el punto y coma para habilitar las siguientes opciones de configuración:

/* Métricas disponibles en la URL / métricas de la API HTTP

{empty}[metrics]

/* Deshabilitar / habilitar métricas internas

enabled = true

/* Deshabilitar las métricas de estadísticas totales (stat_totals_ *) que se generarán

disable_total_stats = false

[arabic, start=2]
. (opcional) Si desea solicitar autorización para ver el punto final de métricas, descomente y configure las siguientes opciones:

basic_auth_username =

basic_auth_password =

[arabic, start=3]
. Reinicie Grafana. Grafana ahora expone métricas en http://localhost:3000/metrics.
. Agregue la tarea a su archivo prometheus.yml. Ejemplo:

- job_name: 'grafana_metrics'

scrape_interval: 15s

scrape_timeout: 5s

static_configs:

- targets: ['localhost: 3000']

[arabic, start=5]
. Reinicie Prometheus. Su nueva tarea debería aparecer en la pestaña Objetivos.
. En Grafana, pase el mouse sobre el ícono de *Configuración* (engranaje) en la barra lateral izquierda y luego haga clic en *Fuentes de datos*.
. Seleccione la fuente de datos de *Prometheus*.
. En la pestaña Tableros, *Importe* el tablero de métricas de Grafana. Todas las métricas raspadas de Grafana están disponibles en el tablero.

====== Ver métricas de Grafana en Graphite

Estas instrucciones asumen que ya ha agregado Graphite como fuente de datos en Grafana.

[arabic]
. {blank}
+
____
Habilite el envío de métricas a Graphite. En su archivo de configuración (grafana.ini o custom.ini según su sistema operativo) elimine el punto y coma para habilitar las siguientes opciones de configuración:
____

/* Métricas disponibles en la URL / métricas de la API HTTP

{empty}[metrics]

/* Deshabilitar / habilitar métricas internas

enabled = true

/* Deshabilitar las métricas de estadísticas totales (stat_totals_*) que se generarán

disable_total_stats = false

[arabic, start=2]
. Habilite las opciones de [metrics.graphite]:

/* Envía métricas internas a Graphite

{empty}[metrics.graphite]

/* Habilite estableciendo la configuración de la dirección (ex localhost:2003)

address = <hostname or ip>:<port/*>

prefix = prod.grafana.%(instance_name)s.

[arabic, start=3]
. Reinicie Grafana. Grafana ahora expone métricas en http:/localhost:3000/metrics y las envía a la ubicación de Graphite que especificó.

==== Ver la configuración del servidor

===== Ver la configuración del servidor de Grafana

Si es un administrador del servidor Grafana, use la pestaña Configuración para ver la configuración que se aplica a su servidor Grafana a través del archivo de Configuración y cualquier variable ambiental.

*Nota:* Solo los administradores del servidor Grafana pueden acceder al menú *Administrador del servidor*. Para obtener más información sobre los permisos administrativos, consulte administrador del servidor de Grafana.

====== Ver la configuración del servidor

[arabic]
. Inicie sesión en su servidor de Grafana con una cuenta que tenga la marca de administrador de Grafana.
. Pase el cursor sobre el icono de *Administrador del servidor* (escudo) en el menú lateral y luego haga clic en la pestaña *Configuración*.

====== Configuraciones disponibles

Para obtener una lista completa de la configuración del servidor, consulte *Configuración*.

==== Ver estadísticas del servidor

===== Ver estadísticas del servidor Grafana

Si es administrador del servidor de Grafana, puede ver estadísticas útiles sobre su servidor Grafana en la pestaña Estadísticas.

*Nota:* Solo los administradores del servidor Grafana pueden acceder al menú *Administrador del servidor*. Para obtener más información sobre los permisos administrativos, consulte el administrador del servidor de Grafana.

====== Ver estadísticas del servidor

[arabic]
. Inicie sesión en su servidor de Grafana con una cuenta que tenga la marca de administrador de Grafana.
. Pase el cursor sobre el icono de *Administrador del servidor* (escudo) en el menú lateral y luego haga clic en la pestaña *Estadísticas*.

====== Estadísticas disponibles

Las siguientes estadísticas se muestran en la pestaña Estadísticas:

* Total de usuarios *Nota:* Total de usuarios = Total de administradores + Total de editores + Total de espectadores
* Total de administradores
* Total de editores
* Total de espectadores
* Usuarios activos (visto en los últimos 30 días) *Nota:* Usuarios activos = Administradores activos + Editores activos + Espectadores activos
* Administradores activos (visto en los últimos 30 días)
* Editores activos (vistos los últimos 30 días)
* Espectadores activos (visto en los últimos 30 días)
* Sesiones activas
* Total de tableros
* Total de organizaciones
* Total de listas de reproducción
* Total de instantáneas
* Total de etiquetas de tablero
* Total de paneles destacados
* Total de alertas

====== Contando usuarios

Si un usuario pertenece a varias organizaciones, ese usuario se cuenta una vez como usuario en el rol de organización más alto que se le asigne, independientemente de la cantidad de organizaciones a las que pertenezca.

Por ejemplo, si Sofía es espectadora en dos organizaciones, editora en dos organizaciones y administradora en tres organizaciones, entonces se reflejaría en las estadísticas como:

* Total de usuarios 1
* Total de administradores 1

=== Configuración

==== Configuración

Grafana tiene una serie de opciones de configuración que puede especificar en un archivo de configuración .ini o especificar mediante variables de entorno.

*Nota:* Debe reiniciar Grafana para que se apliquen los cambios de configuración.

Para ver todas las configuraciones actualmente aplicadas al servidor Grafana, consulte Ver configuración del servidor.

===== Ubicaciones de archivos de configuración

¡_No_ cambie defaults.ini! Los valores predeterminados de Grafana se almacenan en este archivo. Dependiendo de su sistema operativo, realice todos los cambios de configuración en custom.ini o grafana.ini.

* Configuración predeterminada desde $WORKING_DIR/conf/defaults.ini
* Configuración personalizada desde $WORKING_DIR/conf/custom.ini
* La ruta del archivo de configuración personalizada se puede anular mediante el parámetro –config

====== Windows

sample.ini está en el mismo directorio que defaults.ini y contiene todas las configuraciones comentadas. Copie sample.ini y asígnele el nombre custom.ini.

===== Comentarios en archivos .ini

El punto y coma (el símbolo ;) es la forma estándar de comentar líneas en un archivo .ini. Si desea cambiar una configuración, debe eliminar el punto y coma (;) delante de la configuración antes de que funcione.

====== Ejemplo

/* El puerto HTTP a usar

;http_port = 3000

Un problema común es olvidar descomentar una línea en el archivo custom.ini (o grafana.ini), lo que hace que se ignore la opción de configuración.

===== Configurar con variables de entorno

Todas las opciones en el archivo de configuración se pueden anular usando variables de entorno, usando la sintaxis:

GF_<SectionName>_<KeyName>

Donde el nombre de la sección es el texto entre corchetes. Todo debe estar en mayúsculas, . y - deben reemplazarse por _. Por ejemplo, si tiene estas opciones de configuración:

/* sección predeterminada

instance_name = $\{HOSTNAME}

{empty}[security]

admin_user = admin

{empty}[auth.google]

client_secret = 0ldS3cretKey

{empty}[plugin.grafana-image-renderer]

rendering_ignore_https_errors = true

Puede anularlos en máquinas Linux con:

exporta GF_DEFAULT_INSTANCE_NAME =my-instance

exporta GF_SECURITY_ADMIN_USER =owner

exporta GF_AUTH_GOOGLE_CLIENT_SECRET =newS3cretKey

exporta GF_PLUGIN_GRAFANA_IMAGE_RENDERER_RENDERING_IGNORE_HTTPS_ERRORS =true

===== Expansión variable

*Nota:* solo disponible en Grafana 7.1+.

Si alguna de sus opciones contiene la expresión $__<provider>\{<argument>} o $\{<enviroment variable>}, serán procesadas por el expansor de variables de Grafana. El expansor ejecuta el proveedor con el argumento proporcionado para obtener el valor final de la opción.

Hay tres proveedores: env, file y vault.

====== Proveedor de env

El proveedor de env se puede utilizar para expandir una variable de entorno. Si establece una opción en $__env\{PORT}, la variable de entorno PORT se utilizará en su lugar. Para las variables de entorno, también puede utilizar la sintaxis abreviada $\{PORT}. El directorio de registro de Grafana se establecería en el directorio grafana en el directorio detrás de la variable de entorno LOGDIR en el siguiente ejemplo.

{empty}[paths]

logs = $__env\{LOGDIR}/grafana

====== Proveedor de archivos

file lee un archivo del sistema de archivos. Recorta los espacios en blanco desde el principio y el final de los archivos. La contraseña de la base de datos en el siguiente ejemplo sería reemplazada por el contenido del archivo /etc/secrets/gf_sql_password:

{empty}[database]

password = $__file\{/etc/secrets/gf_sql_password}

====== Proveedor de bóveda

El proveedor vault le permite administrar sus secretos con Hashicorp Vault.

El proveedor Vault solo está disponible en Grafana Enterprise v7.1 +. Para obtener más información, consulte Integración de Vault en Grafana Enterprise.

===== app_mode

Las opciones son production y development. El valor predeterminado es production. _No_ cambie esta opción a menos que esté trabajando en el desarrollo de Grafana.

===== instance_name

Establezca el nombre de la instancia de grafana-server. Se utiliza en registros, métricas internas e información de agrupación. El valor predeterminado es: $\{HOSTNAME}, que se reemplazará con la variable de entorno HOSTNAME, si está vacía o no existe, Grafana intentará usar llamadas al sistema para obtener el nombre de la máquina.

===== [paths]

====== data

Ruta de acceso a donde Grafana almacena la base de datos sqlite3 (si se usa), sesiones basadas en archivos (si se usan) y otros datos. Esta ruta generalmente se especifica a través de la línea de comando en el script init.d o en el archivo de servicio systemd.

====== temp_data_lifetime

Cuánto tiempo se deben conservar las imágenes temporales en el directorio data. Predeterminado a: 24h. Modificadores admitidos: h (horas), m (minutos), por ejemplo: 168h, 30m, 10h30m.

Utilice 0 para no limpiar nunca archivos temporales.

====== logs

Ruta al lugar donde Grafana almacena los registros. Esta ruta generalmente se especifica a través de la línea de comando en el script init.d o en el archivo de servicio systemd. Puede anularlo en el archivo de configuración o en el archivo de variable de entorno predeterminado. Sin embargo, tenga en cuenta que al anular esto, la ruta de registro predeterminada se utilizará temporalmente hasta que Grafana se haya iniciado por completo.

Anule la ruta del registro utilizando el argumento de línea de comando cfg:default.paths.logs:

./grafana-server --config /custom/config.ini --homepath /custom/homepath cfg:default.paths.logs=/custom/path

====== plugins

Directorio donde Grafana escanea y busca complementos automáticamente. Para obtener información sobre la instalación manual o automática de complementos, consulte Instalar complementos de Grafana.

====== provisioning

Carpeta que contiene archivos de configuración de aprovisionamiento que Grafana aplicará al inicio. Los tableros se volverán a cargar cuando cambien los archivos json.

===== [server]

====== protocol

http, https, h2 o socket

====== http_addr

La dirección IP a la que enlazar. Si está vacío, se vinculará a todas las interfaces

====== http_port

El puerto al que se va a enlazar, por defecto es 3000. Para usar el puerto 80, debe otorgar el permiso binario de Grafana, por ejemplo:

$ sudo setcap 'cap_net_bind_service=+ep' /usr/sbin/grafana-server

O redirigir el puerto 80 al puerto de Grafana usando:

$ sudo iptables -t nat -A PREROUTING -p tcp --dport 80 -j REDIRECT --to-port 3000

Otra forma es poner un servidor web como Nginx o Apache frente a Grafana y hacer que hagan de proxy a las solicitudes hacia Grafana.

====== domain

Esta configuración solo se usa como parte de la configuración root_url (ver más abajo). Importante si usa GitHub o Google OAuth.

====== enforce_domain

Redirije al dominio correcto si el encabezado del host no coincide con el dominio. Evita los ataques de revinculación de DNS. El valor predeterminado es false.

====== root_url

Esta es la URL completa que se utiliza para acceder a Grafana desde un navegador web. Esto es importante si usa la autenticación de Google o GitHub OAuth (para que la URL de devolución de llamada sea correcta).

*Nota:* Esta configuración también es importante si tiene un proxy inverso frente a Grafana que lo expone a través de una subruta. En ese caso, agregue la subruta al final de esta configuración de URL.

====== serve_from_sub_path

Sirve Grafana desde la subruta especificada en la configuración root_url. De forma predeterminada, se establece en false por razones de compatibilidad.

Habilitando esta configuración y usando una subruta en root_url arriba, p. Ej. root_url = http://localhost:3000/grafana, se puede acceder a Grafana en http://localhost:3000 /grafana.

====== router_logging

Establézcalo en true para que Grafana registre todas las solicitudes HTTP (no solo los errores). Estos se registran como eventos de nivel de información en el registro de Grafana.

====== static_root_path

La ruta al directorio donde se encuentran los archivos de la interfaz (archivos HTML, JS y CSS). El valor predeterminado es public, por lo que el binario de Grafana debe ejecutarse con el directorio de trabajo configurado en la ruta de instalación.

====== enable_gzip

Establezca esta opción en true para habilitar la compresión HTTP, esto puede mejorar la velocidad de transferencia y la utilización del ancho de banda. Se recomienda que la mayoría de los usuarios lo establezcan como true. De forma predeterminada, se establece en false por razones de compatibilidad.

====== cert_file

Ruta al archivo de certificado (si protocol está configurado en https o h2).

====== cert_key

Ruta al archivo de la clave del certificado (si protocol está configurado en https o h2).

====== socket

Ruta donde se debe crear el socket cuando protocol=socket. Asegúrese de que Grafana tenga los permisos adecuados antes de cambiar esta configuración.

====== cdn_url

*Nota:* Disponible en Grafana v7.4 y versiones posteriores.

Especifique una dirección URL HTTP completa a la raíz de sus activos de Grafana CDN. Grafana agregará rutas de edición y versión.

Por ejemplo, dada una URL cdn como https://cdn.myserver.com, grafana intentará cargar un archivo javascript desde http://cdn.myserver.com/grafana-oss/7.4.0/public/build/app.%3chash%3e.js[http://cdn.myserver.com/grafana-oss/7.4.0/public/build/app.<hash>.js].

====== read_timeout

Establece el tiempo máximo usando un formato de duración (5s/5m/5ms) antes de que se agote el tiempo de lectura de una solicitud entrante y se cierren las conexiones inactivas. 0 significa que no hay tiempo de espera para leer la solicitud.

===== [database]

Grafana necesita una base de datos para almacenar usuarios y paneles (y otras cosas). De forma predeterminada, está configurado para usar sqlite3, que es una base de datos incrustada (incluida en el binario principal de Grafana).

====== type

Ya sea mysql, postgres o sqlite3, es su elección.

====== host

Solo aplicable a MySQL o Postgres. Incluye IP o nombre de host y puerto o, en caso de sockets Unix, la ruta hacia él. Por ejemplo, para MySQL ejecutándose en el mismo host que Grafana: host = 127.0.0.1:3306 o con sockets Unix: host = /var/run/mysqld/mysqld.sock

====== name

El nombre de la base de datos de Grafana. Déjelo configurado en grafana o algún otro nombre.

====== user

El usuario de la base de datos (no aplicable para sqlite3).

====== Password

La contraseña del usuario de la base de datos (no aplicable para sqlite3). Si la contraseña contiene /* o ; tienes que envolverlo con comillas triples. Por ejemplo, """/*password;"""

====== url

Use la URL o los otros campos a continuación para configurar la base de datos Ejemplo: mysql://user:secret@host:port/database

====== max_idle_conn

El número máximo de conexiones en el grupo de conexiones inactivas.

====== max_open_conn

El número máximo de conexiones abiertas a la base de datos.

====== conn_max_lifetime

Establece la cantidad máxima de tiempo que se puede reutilizar una conexión. El valor predeterminado es 14400 (lo que significa 14400 segundos o 4 horas). Para MySQL, esta configuración debería ser más corta que la variable wait_timeout.

====== log_queries

Establézcalo en true para registrar las llamadas SQL y los tiempos de ejecución.

====== ssl_mode

Para Postgres, use disable, require o verify-full. Para MySQL, use true, false o skip-verify.

====== isolation_level

Solo el controlador MySQL admite niveles de aislamiento en Grafana. En caso de que el valor esté vacío, se aplica el nivel de aislamiento predeterminado del controlador. Las opciones disponibles son “READ-UNCOMMITED”, “READ-COMMITTED”, “REPEATABLE-READ” o “SERIALIZABLE”.

====== ca_cert_path

La ruta al certificado de CA que se utilizará. En muchos sistemas Linux, los certificados se pueden encontrar en /etc/ssl/certs.

====== client_key_path

La ruta a la clave del cliente. Solo si el servidor requiere autenticación de cliente.

====== client_cert_path

La ruta al certificado de cliente. Solo si el servidor requiere autenticación de cliente.

====== server_cert_name

El campo de nombre común del certificado utilizado por el servidor mysql o postgres. No es necesario si ssl_mode está configurado para skip-verify.

====== path

Solo aplicable para la base de datos sqlite3. La ruta del archivo donde se almacenará la base de datos.

====== cache_mode

Solo para "sqlite3". Configuración de caché compartida utilizada para conectarse a la base de datos. (privado, compartido) Por defecto es private.

===== [remote_cache]

====== type

redis, memcached o database. Predeterminado database

====== connstr

La cadena de conexión de la caché remota. El formato depende del type de caché remota. Las opciones son database, redis y memcache.

====== database

Déjelo vacío cuando use database, ya que usará la base de datos primaria.

====== redis

____
Ejemplo connstr: addr=127.0.0.1:6379,pool_size=100,db=0,ssl=false
____

* addr es el host : puerto del servidor redis.
* pool_size (opcional) es el número de conexiones subyacentes que se pueden realizar a redis.
* db (opcional) es el identificador de número de la base de datos redis que desea utilizar.
* ssl (opcional) es si se debe usar SSL para conectarse al servidor redis. El valor puede ser true, false o insecure. Establecer el valor en insecure omite la verificación de la cadena de certificados y el nombre de host al realizar la conexión.

====== memcache

Ejemplo connstr: 127.0.0.1:11211

===== [dataproxy]

====== logging

Esto habilita el registro del proxy de datos, el valor predeterminado es false.

====== timeout

Cuánto tiempo debe esperar el proxy de datos antes de que se agote el tiempo de espera. El valor predeterminado es 30 segundos.

Esta configuración también se aplica a las fuentes de datos HTTP de backend centrales donde las solicitudes de consulta usan un cliente HTTP con un tiempo de espera establecido.

====== keep_alive_seconds

Intervalo entre sondas de mantener vivo. El valor predeterminado es 30 segundos. Para obtener más detalles, consulte la documentación de Dialer.KeepAlive.

====== tls_handshake_timeout_seconds

El período de tiempo que Grafana esperará para un protocolo de enlace TLS exitoso con la fuente de datos. El valor predeterminado es 10 segundos. Para obtener más detalles, consulte la documentación de Transport.TLSHandshakeTimeout.

====== expect_continue_timeout_seconds

El tiempo que Grafana esperará los encabezados de la primera respuesta de una fuente de datos después de escribir los encabezados de la solicitud, si la solicitud tiene un encabezado "Expect: 100-continue". Un valor de 0 dará como resultado que el cuerpo se envíe inmediatamente. El valor predeterminado es 1 segundo. Para obtener más detalles, consulte la documentación de Transport.ExpectContinueTimeout.

====== max_idle_connections

El número máximo de conexiones inactivas que mantendrá Grafana. El valor predeterminado es 100. Para obtener más detalles, consulte la documentación de Transport.MaxIdleConns.

====== idle_conn_timeout_seconds

El tiempo que Grafana mantiene las conexiones inactivas antes de cerrarlas. El valor predeterminado es 90 segundos. Para obtener más detalles, consulte la documentación de Transport.IdleConnTimeout.

====== send_user_header

Si está habilitado y el usuario no es anónimo, el proxy de datos agregará el encabezado X-Grafana-User con el nombre de usuario en la solicitud. El valor predeterminado es false.

===== [analytics]

====== reporting_enabled

Cuando está habilitado, Grafana enviará estadísticas de uso anónimas a stats.grafana.org. No se rastrea ninguna dirección IP, solo contadores simples para rastrear instancias en ejecución, versiones, tablero y recuentos de errores. Es muy útil para nosotros, así que déjelo habilitado. Los contadores se envían cada 24 horas. El valor predeterminado es true.

====== check_for_updates

Configure en false para deshabilitar todas las comprobaciones en https://grafana.com para las nuevas versiones de los complementos instalados y en el repositorio de Grafana GitHub para buscar una versión más reciente de Grafana. La información de la versión se utiliza en algunas vistas de la interfaz de usuario para notificar que existe una nueva actualización de Grafana o una actualización de complemento. Esta opción no genera actualizaciones automáticas ni envía información confidencial. La verificación se realiza cada 10 minutos.

====== google_analytics_ua_id

Si desea realizar un seguimiento del uso de Grafana a través de Google Analytics, especifique su ID de Universal Analytics aquí. De forma predeterminada, esta función está desactivada.

====== google_tag_manager_id

ID de Google Tag Manager, solo habilitado si ingresa un ID aquí.

===== [security]

====== disable_initial_admin_creation

Solo disponible en Grafana v6.5 +.

Desactive la creación de un usuario administrador en el primer inicio de Grafana. El valor predeterminado es false.

====== admin_user

El nombre del usuario administrador de Grafana predeterminado, que tiene todos los permisos. El valor predeterminado es admin.

====== admin_password

La contraseña del administrador de Grafana predeterminado. Establecer una vez en la primera ejecución. El valor predeterminado es admin.

====== secret_key

Usado para firmar algunas configuraciones de fuentes de datos como secretos y contraseñas, el formato de encriptación usado es AES-256 en modo CFB. No se puede cambiar sin necesidad de actualizar la configuración de la fuente de datos para volver a codificarlos.

====== disable_gravatar

Establézcalo en true para deshabilitar el uso de Gravatar para las imágenes de perfil de usuario. El valor predeterminado es false.

====== data_source_proxy_whitelist

Defina una lista blanca de direcciones IP o dominios permitidos, con puertos, que se utilizarán en las URL de origen de datos con el proxy de origen de datos de Grafana. Formato: ip_or_domain:port separado por espacios. Las fuentes de datos PostgreSQL, MySQL y MSSQL no utilizan el proxy y, por lo tanto, no se ven afectadas por esta configuración.

====== disable_brute_force_login_protection

Configúrelo en true para deshabilitar la protección de inicio de sesión por fuerza bruta. El valor predeterminado es false.

====== cookie_secure

Establézcalo en true si aloja Grafana detrás de HTTPS. El valor predeterminado es false.

====== cookie_samesite

Establece el atributo de cookie SameSite y evita que el navegador envíe esta cookie junto con solicitudes entre sitios. El objetivo principal es mitigar el riesgo de fuga de información de origen cruzado. Esta configuración también proporciona cierta protección contra ataques de falsificación de solicitudes entre sitios (CSRF). Lea más sobre SameSite aquí. Los valores válidos son lax, strict, none y disabled. El valor predeterminado es lax. El uso de valor disabled no agrega ningún atributo de SameSite a las cookies.

====== allow_embedding

Cuando es false, el encabezado HTTP X-Frame-Options: deny se establecerá en las respuestas HTTP de Grafana, lo que indicará a los navegadores que no permitan renderizar Grafana en un <frame>, <iframe>, <embed> u <object>. El objetivo principal es mitigar el riesgo de Clickjacking. El valor predeterminado es false.

====== strict_transport_security

Establézcalo en true si desea habilitar el encabezado de respuesta HTTP Strict-Transport-Security (HSTS). Esto solo se envía cuando HTTPS está habilitado en esta configuración. HSTS les dice a los navegadores que solo se debe acceder al sitio mediante HTTPS.

====== stric_transport_security_max_age_seconds

Establece cuánto tiempo un navegador debe almacenar en caché HSTS en segundos. Solo se aplica si strict_transport_security está habilitada. El valor predeterminado es 86400.

====== strict_transport_security_preload

Establézcalo en true para habilitar la opción preloading de HSTS. Solo se aplica si strict_transport_security está habilitada. El valor predeterminado es false.

====== strict_transport_security_subdomains

Establézcalo en true si desea habilitar la opción HSTS includeSubDomains. Solo se aplica si strict_transport_security está habilitada. El valor predeterminado es false.

====== x_content_type_options

Establézcalo en true para habilitar el encabezado de respuesta X-Content-Type-Options. El encabezado HTTP de respuesta X-Content-Type-Options es un marcador utilizado por el servidor para indicar que los tipos MIME anunciados en los encabezados Content-Type no deben cambiarse y seguirse. El valor predeterminado es false.

====== x_xss_protection

Configúrelo en false para deshabilitar el encabezado X-XSS-Protection, que le dice a los navegadores que dejen de cargar las páginas cuando detectan ataques de scripts entre sitios (XSS) reflejados. El valor predeterminado es false hasta la próxima versión secundaria, 6.3.

====== content_security_policy

Establézcalo en true para agregar el encabezado Content-Security-Policy a sus solicitudes. CSP permite controlar los recursos que el agente de usuario puede cargar y ayuda a prevenir ataques XSS.

====== content_security_policy_template

Establezca la plantilla de Política de seguridad de contenido utilizada al agregar el encabezado Content-Security-Policy a sus solicitudes. $NONCE en la plantilla incluye un nonce aleatorio.

===== [snapshots]

====== external_enabled

Establézcalo en false para deshabilitar el punto final de publicación de instantáneas externas (el valor predeterminado es true).

====== external_snapshot_url

Establezca la URL raíz en una instancia de Grafana donde desee publicar instantáneas externas (el valor predeterminado es https://snapshots-origin.raintank.io).

====== external_snapshot_name

Establecer nombre para el botón de instantánea externa. El valor predeterminado es Publish to snapshot.raintank.io.

====== public_mode

Establézcalo en true para permitir que esta instancia de Grafana actúe como un servidor de instantáneas externo y permita solicitudes no autenticadas para crear y eliminar instantáneas. El valor predeterminado es false.

====== snapshot_remove_expired

Habilite esta opción para eliminar automáticamente las instantáneas caducadas. El valor predeterminado es true.

===== [dashboards]

====== versions_to_keep

Número de versiones del tablero para conservar (por tablero). Predeterminado: 20, Mínimo: 1.

====== min_refresh_interval

Solo disponible en Grafana v6.7 +.

Esta función evita que los usuarios establezcan el intervalo de actualización del tablero en un valor menor que un valor de intervalo dado. El valor de intervalo predeterminado es de 5 segundos. La cadena de intervalo es una secuencia posiblemente firmada de números decimales, seguida de un sufijo de unidad (ms, s, m, h, d), p. Ej. 30s o 1m.

A partir de Grafana v7.3, esto también limita las opciones de intervalo de actualización en Explorar.

====== default_home_dashboard_path

Ruta al tablero de inicio predeterminado. Si este valor está vacío, entonces Grafana usa StaticRootPath + “dashboards/home.json”

===== [users]

====== allow_sign_up

Configúrelo en false para prohibir que los usuarios puedan registrarse/crear cuentas de usuario. El valor predeterminado es false. El usuario administrador aún puede crear usuarios desde las Páginas de Administrador de Grafana.

====== allow_org_create

Configúrelo en false para prohibir a los usuarios crear nuevas organizaciones. El valor predeterminado es false.

====== auto_assign_org

Configúrelo en true para agregar automáticamente nuevos usuarios a la organización principal (id 1). Cuando se establece en false, los nuevos usuarios automáticamente hacen que se cree una nueva organización para ese nuevo usuario. El valor predeterminado es true.

====== auto_assign_org_id

Establezca este valor para agregar automáticamente nuevos usuarios a la organización proporcionada. Esto requiere que auto_assign_org se establezca en true. Asegúrese de que esta organización ya exista. El valor predeterminado es 1.

====== auto_assign_org_role

El rol que se asignará a los nuevos usuarios en laorganización principal (si la configuración anterior se establece en true). El valor predeterminado es Viewer, otras opciones válidas son Admin y Editor. p.ej.:

auto_assign_org_role = Viewer

====== verify_email_enabled

Requiere validación por correo electrónico antes de que se complete el registro. El valor predeterminado es false.

====== login_hint

Texto utilizado como texto de marcador de posición en la página de inicio de sesión para la entrada de inicio de sesión/nombre de usuario.

====== password_hint

Texto utilizado como texto de marcador de posición en la página de inicio de sesión para ingresar la contraseña.

====== default_theme

Establezca el tema de la interfaz de usuario predeterminado: dark o light. El valor predeterminado es dark.

====== home_page

Ruta a una página de inicio personalizada. Los usuarios solo son redirigidos a esto si se usa el tablero de inicio predeterminado. Debe coincidir con una ruta de interfaz y contener una barra al principio.

====== Gestión de usuarios externos

Si administra usuarios de forma externa, puede reemplazar el botón de invitación de usuario para organizaciones con un enlace a un sitio externo junto con una descripción.

====== viewers_can_edit

Los espectadores pueden acceder y utilizar Explorar y realizar ediciones temporales en los paneles de los tableros a los que tienen acceso. No pueden guardar sus cambios. El valor predeterminado es false.

====== editors_can_admin

Los editores pueden administrar tableros, carpetas y equipos que creen. El valor predeterminado es false.

====== user_invite_max_lifetime_duration

La duración en el tiempo de una invitación de usuario válida antes de caducar. Esta configuración debe expresarse como una duración. Ejemplos: 6h (horas), 2d (días), 1w (semana). El valor predeterminado es 24h (24 horas). La duración mínima admitida es de 15m (15 minutos).

====== hidden_users

Esta es una lista de nombres de usuario separados por comas. Los usuarios especificados aquí están ocultos en la interfaz de usuario de Grafana. Todavía son visibles para los administradores de Grafana y para ellos mismos.

===== [auth]

Grafana ofrece muchas formas de autenticar a los usuarios. Consulte la Descripción general de la autenticación de Grafana y otra documentación de autenticación para obtener instrucciones detalladas sobre cómo configurar la autenticación.

====== login_cookie_name

El nombre de la cookie para almacenar el token de autenticación. El valor predeterminado es grafana_session.

====== login_maximum_inactive_lifetime_duration

La vida máxima (duración) que un usuario autenticado puede estar inactivo antes de que se le solicite que inicie sesión en la próxima visita. El valor predeterminado es 7 días (7d). Esta configuración debe expresarse como una duración, p. Ej. 5m (minutos), 6h (horas), 10d (días), 2w (semanas), 1M (mes). La vida útil se restablece en cada rotación de token exitosa (token_rotation_interval_minutes).

====== login_maximum_lifetime_duration

La vida máxima (duración) que un usuario autenticado puede estar dentro desde el tiempo de inicio de sesión antes de que se le solicite iniciar sesión. El valor predeterminado es 30 días (30d). Esta configuración debe expresarse como una duración, p. Ej. 5m (minutos), 6h (horas), 10d (días), 2w (semanas), 1M (mes).

====== token_rotation_interval_minutes

Con qué frecuencia se rotan los tokens de autenticación para usuarios autenticados cuando el usuario está activo. El valor predeterminado es cada 10 minutos.

====== disable_login_form

Establézcalo en true para deshabilitar (ocultar) el formulario de inicio de sesión, útil si usa OAuth. El valor predeterminado es false.

====== disable_signout_menu

Configúrelo en true para deshabilitar el enlace de cierre de sesión en el menú lateral. Esto es útil si usa auth.proxy. El valor predeterminado es false.

====== signout_redirect_url

URL a la que redirigir al usuario después de cerrar la sesión.

====== oauth_auto_login

Configure en true para intentar iniciar sesión con OAuth automáticamente, omitiendo la pantalla de inicio de sesión. Esta configuración se ignora si se configuran varios proveedores de OAuth. El valor predeterminado es false.

====== oauth_state_cookie_max_age

Cuántos segundos vive la cookie de estado de OAuth antes de ser eliminada. El valor predeterminado es 600 (segundos). Los administradores pueden aumentar este valor si experimentan errores de discrepancia en el estado de inicio de sesión de OAuth.

====== api_key_max_seconds_to_live

Límite de segundos de vida de la clave API antes de su vencimiento. El valor predeterminado es -1 (ilimitado).

====== sigv4_auth_enabled

Solo disponible en Grafana 7.3+.

Establézcalo en true para habilitar la opción de autenticación AWS Signature Version 4 para fuentes de datos basadas en HTTP. El valor predeterminado es false.

===== [auth.anonymous]

Consulte Autenticación Anónima para obtener instrucciones detalladas.

===== [auth.github]

Consulte la Autenticación de GitHub OAuth2 para obtener instrucciones detalladas.

===== [auth.gitlab]

Consulte la Autenticación de Gitlab OAuth2 para obtener instrucciones detalladas.

===== [auth.google]

Consulte la Autenticación de Google OAuth2 para obtener instrucciones detalladas.

===== [auth.grafananet]

Nombres de claves heredados, todavía en el archivo de configuración para que funcionen en variables env.

===== [auth.grafana_com]

Nombres de claves heredados, todavía en el archivo de configuración para que funcionen en variables env.

===== [auth.azuread]

Consulte la Autenticación de Azure AD OAuth2 para obtener instrucciones detalladas.

===== [auth.okta]

Consulte la Autenticación Okta OAuth2 para obtener instrucciones detalladas.

===== [auth.generic_oauth]

Consulte la Autenticación genética de OAuth para obtener instrucciones detalladas.

===== [auth.basic]

Consulte Autenticación Básica para obtener instrucciones detalladas.

===== [auth.proxy]

Consulte Autenticación de Proxy de Autenticación para obtener instrucciones detalladas.

===== [auth.ldap]

Consulte la Autenticación LDAP para obtener instrucciones detalladas.

===== [aws]

Puede configurar complementos de AWS principales y externos.

====== allowed_auth_providers

Especifique qué proveedores de autenticación permiten los complementos de AWS. Para obtener una lista de proveedores permitidos, consulte la página de configuración de la fuente de datos para un complemento determinado. Si configura un complemento mediante el aprovisionamiento, solo se permiten los proveedores que se especifican en allowed_auth_providers.

Opciones: default (AWS SDK predeterminado), keys (acceso y clave secreta), credentials (archivo de credenciales), ec2_iam_role (rol EC2 IAM)

====== assume_role_enabled

Establézcalo en false para deshabilitar la autenticación de AWS para que no use un rol asumido con credenciales de seguridad temporales. Para obtener detalles sobre asumir roles, consulte la documentación de referencia de la API de AWS sobre la operación AssumeRole.

Si esta opción está deshabilitada, los campos *Assume Role* y *External Id* se eliminan de la página de configuración de la fuente de datos de AWS. Si el complemento se configura mediante el aprovisionamiento, es posible utilizar un rol asumido siempre que assume_role_enabled esté establecido en true.

====== list_metrics_page_limit

Utilice la opción de Lista de Métricas API para cargar métricas para espacios de nombres personalizados en la fuente de datos de CloudWatch. De forma predeterminada, el límite de páginas es 500.

===== [auth.jwt]

Consulte la Autenticación JWT para obtener más información.

===== [smtp]

Configuración del servidor de correo electrónico.

====== enabled

Habilite esto para permitir que Grafana envíe correo electrónico. El valor predeterminado es false.

Si la contraseña contiene /* o ;, entonces debe envolverla con comillas triples. Ejemplo: “""/*password;”""

====== host

El valor predeterminado es localhost:25.

====== user

En caso de autenticación SMTP, el valor predeterminado es empty.

====== password

En caso de autenticación SMTP, el valor predeterminado es empty.

====== cert_file

Ruta de archivo a un archivo de certificado, el valor predeterminado es empty.

====== key_file

Ruta de archivo a un archivo de clave, el valor predeterminado es empty.

====== skip_verify

Verifique SSL para el servidor SMTP, el valor predeterminado es false.

====== from_address

Dirección utilizada al enviar correos electrónicos, la predeterminada es admin@grafana.localhost.

====== from_name

Nombre que se utilizará al enviar correos electrónicos, el predeterminado es Grafana.

====== ehlo_identity

Nombre que se utilizará como identidad de cliente para EHLO en el cuadro de diálogo SMTP, el valor predeterminado es <instance_name>.

====== startTLS_policy

Ya sea "OpportunisticStartTLS", "MandatoryStartTLS", "NoStartTLS". El valor predeterminado es empty.

===== [emails]

====== welcome_email_on_sign_up

El valor predeterminado es false.

====== templates_pattern

El valor predeterminado es emails/*.html.

===== [log]

Opciones de registro de Grafana.

====== mode

Las opciones son console, file y syslog. El valor predeterminado es console y file. Utilice espacios para separar varios modos, p. Ej. console file.

====== level

Las opciones son debug, info, warn, error y critical. El valor predeterminado es info.

====== filters

Configuraciones opcionales para establecer diferentes niveles para registradores específicos. Por ejemplo: filters = sqlstore:debug

===== [log.console]

Solo es aplicable cuando se utiliza console en modo [log].

====== level

Las opciones son debug, info, warn, error y critical. El valor predeterminado se hereda del nivel [log].

====== format

Formato de línea de registro, las opciones válidas son text, console y json. El valor predeterminado es la console.

===== [log.file]

Solo se aplica cuando se utiliza file en el modo [log].

====== level

Las opciones son debug, info, warn, error y critical. El valor predeterminado se hereda del nivel [log].

====== format

Formato de línea de registro, las opciones válidas son text, console y json. El valor predeterminado es text.

====== log_rotate

Habilite la rotación automática de registros, las opciones válidas son false o true. El valor predeterminado es true. Cuando está habilitado, use max_lines, max_size_shift, daily_rotate y max_days para configurar el comportamiento de la rotación del registro.

====== max_lines

Máximo de líneas por archivo antes de rotarlo. El valor predeterminado es 1000000.

====== max_size_shift

Tamaño máximo del archivo antes de rotarlo. El valor predeterminado es 28, lo que significa 1 << 28, 256 MB.

====== daily_rotate

Habilite la rotación diaria de archivos, las opciones válidas son false o true. El valor predeterminado es true.

====== max­_days

Número máximo de días para mantener los archivos de registro. El valor predeterminado es 7.

===== [log.syslog]

Solo se aplica cuando se utiliza syslog en el modo [log].

====== level

Las opciones son debug, info, warn, error y critical. El valor predeterminado se hereda del nivel [log].

====== format

Formato de línea de registro, las opciones válidas son text, console y json. El valor predeterminado es text.

====== network and address

Tipo y dirección de red de Syslog. Puede ser UDP, TCP o UNIX. Si se deja en blanco, se utilizan los puntos finales de UNIX predeterminados.

====== facility

Instalación de Syslog. Las opciones válidas son user, daemon o local0 hasta local7. El valor predeterminado es empty.

====== tag

Etiqueta de Syslog. De forma predeterminada, se utiliza el argv[0] del proceso.

===== [log.frontend]

*Nota:* esta función está disponible en Grafana 7.4+.

====== enabled

Se inicializa el agente javascript de Sentry. El valor predeterminado es false.

====== sentry_dsn

Sentry DSN si desea enviar eventos a Sentry

====== custom_endpoint

Punto final HTTP personalizado al que enviar eventos capturados por el agente Sentry. Por defecto, /log, registrará los eventos en stdout.

====== sample_rate

Tasa de eventos que se informarán entre 0 (ninguno) y 1 (todos, predeterminado), flotante.

====== log_endpoint_requests_per_second_limit

Límite de solicitudes por segundo aplicado por un período prolongado, para el punto de conexión de ingestión de registros de backend de Grafana, /log. El valor predeterminado es 3.

====== log_endpoint_burst_limit

Número máximo de solicitudes aceptadas por intervalo corto de tiempo para el punto de conexión de ingestión de registros de backend de Grafana, /log. El valor predeterminado es 15.

===== [quota]

Establezca cuotas en -1 para hacer ilimitadas.

====== enabled

Habilite las cuotas de uso. El valor predeterminado es false.

====== org_user

Limite la cantidad de usuarios permitidos por organización. El valor predeterminado es 10.

====== org_dashboard

Limite la cantidad de tableros permitidos por organización. El valor predeterminado es 100.

====== org_data_source

Limite la cantidad de fuentes de datos permitidas por organización. El valor predeterminado es 10.

====== org_api_key

Limite la cantidad de claves de API que se pueden ingresar por organización. El valor predeterminado es 10.

====== user_org

Limite el número de organizaciones que puede crear un usuario. El valor predeterminado es 10.

====== global_user

Establece un límite global de usuarios. El valor predeterminado es -1 (ilimitado).

====== global_org

Establece un límite global en el número de organizaciones que se pueden crear. El valor predeterminado es -1 (ilimitado).

====== global_dashboard

Establece un límite global en la cantidad de tableros que se pueden crear. El valor predeterminado es -1 (ilimitado).

====== global_api_key

Establece el límite global de claves API que se pueden ingresar. El valor predeterminado es -1 (ilimitado).

====== global_session

Establece un límite global en el número de usuarios que pueden iniciar sesión a la vez. El valor predeterminado es -1 (ilimitado).

===== [alerting]

Para obtener más información sobre la función de Alertas en Grafana, consulte Descripción general de las alertas.

====== enabled

Configúrelo en false para deshabilitar el motor de alertas y ocultar las alertas en la interfaz de usuario de Grafana. El valor predeterminado es true.

====== 

====== execute_alerts

Desactiva la ejecución de reglas de alerta, pero las alertas siguen estando visibles en la interfaz de usuario de Grafana.

====== error_or_timeout

Configuración predeterminada para nuevas reglas de alerta. De forma predeterminada, los errores y los tiempos de espera se clasifican como alertas. (alerting, keep_state)

====== nodata_or_nullvalues

Define cómo Grafana maneja nodata o valores nulos en las alertas. Las opciones son alerting, no_data, keep_state y ok. El valor predeterminado es no_data.

====== concurrent_render_limit

Las notificaciones de alerta pueden incluir imágenes, pero la representación de muchas imágenes al mismo tiempo puede sobrecargar el servidor. Este límite protege al servidor de la sobrecarga de procesamiento y garantiza que las notificaciones se envíen rápidamente. El valor predeterminado es 5.

====== evaluation_timeout_seconds

Establece el tiempo de espera del cálculo de la alerta. El valor predeterminado es 30.

====== notification_timeout_seconds

Establece el tiempo de espera de la notificación de alerta. El valor predeterminado es 30.

====== max_attempts

Establece un límite máximo de intentos de enviar notificaciones de alerta. El valor predeterminado es 3.

====== min_interval_seconds

Establece el intervalo mínimo entre evaluaciones de reglas. El valor predeterminado es 1.

*Nota.* Esta configuración tiene prioridad sobre la frecuencia de cada regla individual. Si la frecuencia de una regla es menor que este valor, este valor se aplica.

====== max_annotation_age =

Configura durante cuánto tiempo se almacenan las anotaciones de alerta. El valor predeterminado es 0, que los mantiene para siempre. Esta configuración debe expresarse como una duración. Ejemplos: 6h (horas), 10d (días), 2w (semanas), 1M (mes).

====== max_annotations_to_keep =

Configura el número máximo de anotaciones de alerta que almacena Grafana. El valor predeterminado es 0, que conserva todas las anotaciones de alerta.

===== [annotations]

====== cleanupjob_batchsize

Configura el tamaño del lote para el trabajo de limpieza de anotaciones. Esta configuración se utiliza para anotaciones de alertas, API y tableros.

===== [annotations.dashboard]

Las anotaciones del tablero significan que las anotaciones están asociadas con el tablero en el que se crean.

====== max_age

Configura cuánto tiempo se almacenan las anotaciones del tablero. El valor predeterminado es 0, que los mantiene para siempre. Esta configuración debe expresarse como una duración. Ejemplos: 6h (horas), 10d (días), 2w (semanas), 1M (mes).

====== max_annotations_to_keep

Configura el número máximo de anotaciones del tablero que almacena Grafana. El valor predeterminado es 0, que conserva todas las anotaciones del tablero.

===== [annotations.api]

Las anotaciones de API significan que las anotaciones se han creado utilizando la API sin ninguna asociación con un tablero.

====== max_age

Configura cuánto tiempo Grafana almacena las anotaciones de la API. El valor predeterminado es 0, que los mantiene para siempre. Esta configuración debe expresarse como una duración. Ejemplos: 6h (horas), 10d (días), 2w (semanas), 1M (mes).

====== max_annotations_to_keep

Configura el número máximo de anotaciones de API que guarda Grafana. El valor predeterminado es 0, que conserva todas las anotaciones de la API.

===== [explore]

Para obtener más información sobre esta función, consulte Explorar.

====== enabled

Habilite o deshabilite la sección Explorar. El valor predeterminado es enabled.

===== [metrics]

Para obtener instrucciones detalladas, consulte las Métricas Internas de Grafana.

====== enabled

Habilite los informes de métricas. El valor predeterminado es true. Disponible a través de HTTP API <URL>/metrics.

====== interval_seconds

Intervalo de descarga/escritura al enviar métricas a la TSDB externa. El valor predeterminado es 10.

====== disable_total_stats

Si se establece en true, la generación de estadísticas totales (stat_totals_* metrics) está deshabilitada. El valor predeterminado es false.

====== basic_auth_username y basic_auth_password

Si ambos están configurados, entonces se requiere autenticación básica para acceder al punto final de métricas.

===== [metrics.environment_info]

Agrega dimensiones a la métrica grafana_environment_info, que puede mostrar más información sobre la instancia de Grafana.

; exampleLabel1 = exampleValue1

; exampleLabel2 = exampleValue2

===== [metrics.graphite]

Utilice estas opciones si desea enviar métricas internas de Grafana a Graphite.

====== address

Habilitar configurando la dirección. El formato es <Hostname or ip>:port.

====== prefix

Prefijo métrico de Graphite. El valor predeterminado es prod.grafana.%(instance_name)s.

===== [grafana_net]

====== url

El valor predeterminado es https://grafana.com.

===== [grafana_com]

====== url

El valor predeterminado es https://grafana.com.

===== [tracing.jaeger]

Configure el cliente Jaeger de Grafana para el seguimiento distribuido.

También puede utilizar las variables de entorno JAEGER_* estándar para configurar Jaeger. Consulte la tabla al final de https://www.jaegertracing.io/docs/1.16/client-features/ para ver la lista completa. Las variables de entorno anularán cualquier configuración proporcionada aquí.

====== address

El host:port de destino para informes de intervalos. (ej .: localhost:6831)

Se puede configurar con las variables de entorno JAEGER_AGENT_HOST y JAEGER_AGENT_PORT.

====== always_included_tag

Lista de etiquetas separadas por comas para incluir en todos los tramos nuevos, como tag1:value1,tag2:value2.

Se puede configurar con la variable de entorno JAEGER_TAGS (use = en lugar de : con la variable de entorno).

====== sampler_type

El valor predeterminado es const.

Especifica el tipo de muestreador: const, probabilistic, ratelimiting o remote.

Consulte https://www.jaegertracing.io/docs/1.16/sampling//*client-sampling-configuration para obtener detalles sobre los diferentes tipos de rastreo.

Se puede configurar con la variable de entorno JAEGER_SAMPLER_TYPE.

====== sampler_param

El valor predeterminado es 1.

Este es el parámetro de configuración del muestreador. Dependiendo del valor de sampler_type, puede ser 0, 1 o un valor decimal intermedio.

* Para muestreador const, 0 o 1 para siempre false/true respectivamente
* Para el muestreador probabilistic, una probabilidad entre 0 y 1.0
* Para el muestreador rateLimiting, el número de intervalos por segundo
* Para el muestreador remote, param es el mismo que para el probabilistic e indica la frecuencia de muestreo inicial antes de que se reciba la real de la nave nodriza.

Puede establecerse con la variable de entorno JAEGER_SAMPLER_PARAM.

====== sampling_server_url

sampling_server_url es la URL de un administrador de muestreo que proporciona una estrategia de muestreo.

====== zipkin_propagation

El valor predeterminado es false.

Controla si se utiliza o no el formato de propagación de intervalo de Zipkin (con encabezados HTTP x-b3-). De forma predeterminada, se utiliza el formato de Jaeger.

Se puede configurar con la variable de entorno y el valor JAEGER_PROPAGATION=b3.

====== disable_shared_zipkin_spans

El valor predeterminado es false.

Si se establece en true, se desactivan los intervalos de RPC compartidos. Dejar esto disponible es la configuración más común cuando se usa Zipkin en cualquier otro lugar de su infraestructura.

===== [external_image_storage]

Estas opciones controlan cómo se deben hacer públicas las imágenes para que puedan compartirse en servicios como Slack o mensajes de correo electrónico.

====== provider

Las opciones son s3, webdav, gcs, azure_blob, local). Si se deja vacío, Grafana ignora la acción de carga.

===== [external_image_storage.s3]

====== endpoint

URL de punto final opcional (nombre de host o URI completo) para anular el punto final S3 generado por defecto. Si desea mantener el valor predeterminado, déjelo vacío. Aún debe proporcionar un valor de region si especifica un punto final.

====== path_style_access

Establezca esto en true para forzar el direccionamiento de estilo de ruta en las solicitudes de S3, es decir, http://s3.amazonaws.com/BUCKET/KEY, en lugar del predeterminado, que es el direccionamiento de depósito alojado virtual cuando sea posible (http: // BUCKET. s3.amazonaws.com/KEY).

*Nota:* esta opción es específica del servicio Amazon S3.

====== bucket_url

(para compatibilidad con versiones anteriores, solo funciona cuando no hay ningún depósito o región configurados) URL del depósito para S3. La región de AWS se puede especificar dentro de la URL o su valor predeterminado es "us-east-1", p. Ej.

* http://grafana.s3.amazonaws.com/
* https://grafana.s3-ap-southeast-2.amazonaws.com/

====== bucket

Nombre del segmento para S3. p.ej. grafana.snapshot.

====== region

Nombre de la región para S3. p.ej. "Us-east-1", "cn-north-1", etc.

====== path

Ruta adicional opcional dentro del depósito, útil para aplicar políticas de vencimiento.

====== access_key

Clave de acceso, p. Ej. AAAAAAAAAAAAAAAAAAAA.

La clave de acceso requiere permisos para el depósito S3 para las acciones "s3: PutObject" y "s3: PutObjectAcl".

====== secret_key

Clave secreta, p. Ej. AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA.

===== [external_image_storage.webdav]

====== url

URL donde Grafana envía la solicitud PUT con imágenes.

====== username

Nombre de usuario de autenticación básico.

====== password

Contraseña de autenticación básica.

====== public_url

URL opcional para enviar a los usuarios en notificaciones. Si la cadena contiene la secuencia $\{file}, se reemplaza con el nombre del archivo cargado. De lo contrario, el nombre del archivo se agrega a la parte de la ruta de la URL, sin modificar ninguna cadena de consulta.

===== [external_image_storage.gcs]

====== key_file

Ruta opcional al archivo de claves JSON asociado con una cuenta de servicio de Google para autenticar y autorizar. Si no se proporciona ningún valor, intenta utilizar las credenciales predeterminadas de la aplicación. Las claves de la cuenta de servicio se pueden crear y descargar desde https://console.developers.google.com/permissions/serviceaccounts.

La Cuenta de Servicio debe tener el rol de "Escritor de Bbjetos de Almacenamiento". El modelo de control de acceso del depósito debe ser "Establecer permisos a nivel de objeto y de cubo". Grafana mismo hará que las imágenes sean legibles para el público cuando las URL firmadas no estén habilitadas.

====== bucket

Nombre del cubo en Google Cloud Storage.

====== path

Ruta adicional opcional dentro del cubo.

====== enable_signed_urls

Si se establece en verdadero, Grafana crea una [URL firmada] (https://cloud.google.com/storage/docs/access-control/signed-urls) para la imagen cargada en Google Cloud Storage.

====== signed_url_expiration

Establece la caducidad de la URL firmada, cuyo valor predeterminado es de siete días.

===== [external_image_storage.azure_blob]

====== account_name

Nombre de la cuenta de almacenamiento.

====== account_key

Clave de cuenta de almacenamiento

====== container_name

Nombre del contenedor donde almacenar imágenes "Blob" con nombres aleatorios. Es necesario crear el contenedor de blobs de antemano. Solo se admiten contenedores públicos.

===== [external_image_storage.local]

Esta opción no requiere ninguna configuración.

===== [rendering]

Opciones para configurar un servicio de representación de imágenes HTTP remoto, p. Ej. utilizando https://github.com/grafana/grafana-image-renderer.

====== server_url

URL a un servicio de representación de imágenes HTTP remoto, p. Ej. http://localhost:8081/render, permitirá a Grafana representar paneles y tableros en imágenes PNG mediante solicitudes HTTP a un servicio externo.

====== callback_url

Si el servicio de renderizador de imágenes HTTP remoto se ejecuta en un servidor diferente al servidor de Grafana, es posible que deba configurarlo en una URL donde se pueda acceder a Grafana, p. Ej. http://grafana.domain/.

====== concurrent_render_request_limit

El límite de solicitud de procesamiento simultáneo afecta cuando se usa el punto final HTTP /render. La representación de muchas imágenes al mismo tiempo puede sobrecargar el servidor, contra lo que esta configuración puede ayudar a proteger al permitir solo una cierta cantidad de solicitudes simultáneas. El valor predeterminado es 30.

===== [paneles]

====== enable_alpha

Establézcalo en true si desea probar paneles alfa que aún no están listos para uso general. El valor predeterminado es false.

====== disable_sanitize_html

Si se establece en true, Grafana permitirá etiquetas de script en paneles de texto. No recomendado ya que habilita vulnerabilidades XSS. El valor predeterminado es false. Esta configuración se introdujo en Grafana v6.0.

===== [plugins]

====== enable_alpha

Establézcalo en true si desea probar los complementos alfa que aún no están listos para el uso general. El valor predeterminado es false.

====== allow_loading_unsigned_plugins

Ingrese una lista separada por comas de identificadores de complementos para identificar los complementos que pueden cargarse incluso si carecen de una firma válida.

====== marketplace_url

url personalizado para instalar/aprender más para complementos empresariales. El valor predeterminado es https://grafana.com/grafana/plugins/.

===== [plugin.grafana-image-renderer]

Para obtener más información, consulte Renderizado de imágenes.

====== rendering_timezone

Indique a la instancia del navegador sin cabeza que use una zona horaria predeterminada cuando no la proporcione Grafana, p. Ej. al renderizar la imagen del panel de alerta. Consulte ICUs metaZones.txt para obtener una lista de los ID de zona horaria admitidos. Recurre a la variable de entorno TZ si no se establece.

====== rendering_language

Indique a la instancia del navegador sin cabeza que utilice un idioma predeterminado cuando no lo proporcione Grafana, p. Ej. al renderizar la imagen del panel de alerta. Consulte el encabezado HTTP Accept-Language para comprender cómo formatear este valor, p. Ej. ‘fr-CH, fr;q=0.9, en;q=0.8, de;q=0.7, *;q=0.5’.

====== rendering_viewport_device_scale_factor

Indique a la instancia del navegador sin cabeza que utilice un factor de escala de dispositivo predeterminado cuando no lo proporcione Grafana, p. Ej. al renderizar la imagen del panel de alerta. El valor predeterminado es 1. El uso de un valor más alto producirá imágenes más detalladas (DPI más alto), pero requiere más espacio en disco para almacenar una imagen.

====== 

====== rendering_ignore_https_errors

Indique a la instancia del navegador sin cabeza si debe ignorar los errores HTTPS durante la navegación. Los errores HTTPS predeterminados no se ignoran. Debido al riesgo de seguridad, no recomendamos que ignore los errores HTTPS.

====== rendering_verbose_logging

Indique a la instancia del navegador sin cabeza si debe capturar y registrar información detallada al renderizar una imagen. El valor predeterminado es false y solo capturará y registrará mensajes de error.

Cuando está habilitado, los mensajes de depuración también se capturan y registran.

Para que la información detallada se incluya en el registro del servidor Grafana, debe ajustar el nivel del registro de renderizado para depurar, configurar [log].filter = rendering:debug.

====== rendering_dumpio

Indique a la instancia del navegador sin cabeza si debe generar sus mensajes de error y depuración en el proceso en ejecución del servicio de representación remota. El valor predeterminado es false.

Puede ser útil establecer esto en true al solucionar problemas.

====== rendering_args

Argumentos adicionales para pasar a la instancia del navegador sin cabeza. El valor predeterminado es –no-sandbox. La lista de indicadores de Chromium se puede encontrar en (https://peter.sh/experiments/chromium-command-line-switches/). Separe varios argumentos con comas.

====== rendering_chrome_bin

Puede configurar el complemento para usar un binario de navegador diferente en lugar de la versión preempaquetada de Chromium.

Tenga en cuenta que esto no es recomendable. Puede encontrar problemas si la versión instalada de Chrome/Chromium no es compatible con el complemento.

====== rendering_mode

Indique cómo se crean las instancias de navegador sin cabeza. El valor predeterminado es default y creará una nueva instancia de navegador en cada solicitud.

El modo clustered se asegurará de que solo un máximo de navegadores/páginas de incógnito puedan ejecutarse al mismo tiempo.

El modo reusable tendrá una instancia de navegador y creará una nueva página de incógnito en cada solicitud.

====== rendering_clustering_mode

Cuando rendering_mode = clustered, puede indicar cuántos navegadores o páginas de incógnito se pueden ejecutar al mismo tiempo. Por defecto es browser y se agrupará utilizando instancias de navegador.

El modo context se agrupará utilizando páginas de incógnito.

====== rendering_clustering_max_concurrency

Cuando rendering_mode = clustered, puede definir el número máximo de instancias del navegador/páginas de incógnito que se pueden ejecutar al mismo tiempo.

====== rendering_viewport_max_width

Limite el ancho máximo de la ventana gráfica que se puede solicitar.

====== rendering_viewport_max_height

Limite la altura máxima de la ventana gráfica que se puede solicitar.

====== rendering_viewport_max_device_scale_factor

Limite el factor de escala máximo del dispositivo de ventana gráfica que se puede solicitar.

====== grpc_host

Cambie el host de escucha del servidor gRPC. El host predeterminado es 127.0.0.1.

====== grpc_port

Cambie el puerto de escucha del servidor gRPC. El puerto predeterminado es 0 y asignará automáticamente un puerto que no esté en uso.

===== [enterprise]

Para obtener más información sobre Grafana Enterprise, consulte Grafana Enterprise.

===== [feature_toggles]

====== enable

Claves de funciones alfa para habilitar, separadas por espacio. Las características alfa disponibles son: ngalert

===== [date_formats]

*Nota:* Las siguientes opciones de formato de fecha solo están disponibles en Grafana v7.2+.

Esta sección controla los valores predeterminados de todo el sistema para los formatos de fecha utilizados en rangos de tiempo, gráficos y cuadros de entrada de fecha.

Los patrones de formato utilizan tokens de formato Moment.js.

====== full_date

Formato de fecha completa utilizado por el selector de rango de tiempo y en otros lugares donde se representa una fecha completa.

====== intervals

Estos formatos de intervalos se utilizan en el gráfico para mostrar solo una fecha u hora parcial. Por ejemplo, si solo hay minutos entre las etiquetas de marca del eje Y, se utiliza el formato interval_minute.

Predeterminados

interval_second = HH:mm:ss

interval_minute = HH:mm

interval_hour = MM/DD HH:mm

interval_day = MM/DD

interval_month = YYYY-MM

interval_year = YYYY

====== use_browser_locale

Establezca esto en true para que los formatos de fecha se deriven automáticamente de la ubicación de su navegador. El valor predeterminado es false. Esta es una característica experimental.

====== default_timezone

Se utiliza como zona horaria predeterminada para las preferencias del usuario. Puede ser browser para la zona horaria local del navegador o un nombre de zona horaria de la base de datos de la zona horaria de IANA, como UTC o Europa/Amsterdam.

===== [expressions]

*Nota:* esta función está disponible en Grafana v7.4 y versiones posteriores.

enabled

Establezca esto en false para deshabilitar expresiones y ocultarlas en la interfaz de usuario de Grafana. El valor predeterminado es true.

=== CLI de Grafana

==== CLI de Grafana

Grafana CLI es un pequeño ejecutable que se incluye con el servidor Grafana. Se puede ejecutar en la misma máquina en la que se ejecuta el servidor Grafana. Grafana CLI tiene comandos plugins y admin, así como opciones globales.

Para enumerar todos los comandos y opciones:

grafana-cli –h

===== Invocar la CLI de Grafana

Para invocar la CLI de Grafana, agregue la ruta a los binarios de grafana en su variable de entorno PATH. Alternativamente, si su directorio actual es el directorio bin, use ./grafana-cli. De lo contrario, puede especificar la ruta completa a la CLI. Por ejemplo, en Linux /usr/share/grafana/bin/grafana-cli y en Windows C:\ProgramFiles\GrafanaLabs\grafana\bin\grafana-cli.exe.

*Nota:* algunos comandos, como instalar o eliminar complementos, requieren sudo en Linux. Si está en Windows, ejecute Windows PowerShell como administrador.

===== Sintaxis del comando de la CLI de Grafana

La sintaxis general de los comandos en la CLI Grafana es:

grafana-cli [global options] command [command option] [arguments...]

===== Opciones globales

Grafana CLI le permite anular temporalmente ciertas configuraciones predeterminadas de Grafana. A excepción de --help y --version, la mayoría de las opciones globales solo las utilizan los desarrolladores.

Cada opción global se aplica solo al comando en el que se usa. Por ejemplo, --pluginsDir value no cambia permanentemente donde Grafana guarda los complementos. Solo lo cambia para el comando en el que aplica la opción.

====== Mostrar la ayuda de la CLI de Grafana

--help o -h muestra la ayuda, incluidas las rutas predeterminadas y la información de configuración de Docker.

*Ejemplo:*

grafana-cli –h

====== Mostrar la versión de la CLI de Grafana

--version o -v imprime la versión de Grafana CLI que se está ejecutando actualmente.

*Ejemplo:*

grafana-cli –v

====== Anular el directorio de complementos predeterminado

--pluginsDir value anula la ruta a donde su instancia local de Grafana almacena complementos. Utilice esta opción si desea instalar, actualizar o eliminar un complemento en algún lugar que no sea el directorio predeterminado ("/var/lib/grafana/plugins") [$GF_PLUGIN_DIR].

*Ejemplo:*

grafana-cli --pluginsDir "/var/lib/grafana/devplugins" plugins install <plugin-id>

====== Anular la URL del repositorio del complemento predeterminado

--repo value le permite descargar e instalar o actualizar complementos desde un repositorio que no sea el repositorio predeterminado de Grafana.

*Ejemplo:*

grafana-cli --repo "https://example.com/plugins" plugins install <plugin-id>

====== Anular la URL .zip del complemento predeterminado

--pluginUrl value le permite descargar un archivo .zip que contiene un complemento desde una URL local en lugar de descargarlo desde la fuente predeterminada de Grafana.

*Ejemplo:*

grafana-cli --pluginUrl https://company.com/grafana/plugins/<plugin-id>-<plugin-version>.zip plugins install <plugin-id>

====== Anular la seguridad de la capa de transporte

*Advertencia:* Desactivar la TLS es un riesgo de seguridad significativo. No recomendamos utilizar esta opción.

--insecure le permite desactivar la verificación de Seguridad de la capa de transporte (TLS) (inseguro). Es posible que desee hacer esto si está descargando un complemento de una fuente no predeterminada.

*Ejemplo:*

grafana-cli --insecure –pluginUrl https://company.com/grafana/plugins/<plugin-id>-<plugin-version>.zip plugins install <plugin-id>

====== Habilitar el registro de depuración

--debug o -d habilita el registro de depuración. La salida de depuración se devuelve y se muestra en la terminal.

*Ejemplo:*

grafana-cli --debug plugins install <plugin-id>

====== Anular un ajuste de configuración

--configOverrides es un argumento de línea de comando que actúa como una anulación de variable de entorno.

Por ejemplo, puede usarlo para redirigir el registro a otro archivo (tal vez para registrar instalaciones de complementos en Grafana Cloud) o al restablecer la contraseña de administrador y tiene valores no predeterminados para algún valor de configuración importante (como dónde se encuentra la base de datos).

*Ejemplo:*

grafana-cli --configOverrides cfg:default.paths.log=/dev/null plugins install <plugin-id>

====== Anular el valor de la ruta de inicio

Establece la ruta para la ruta de instalación / inicio de Grafana, por defecto es el directorio de trabajo. No es necesario que lo utilice si se encuentra en el directorio de instalación de Grafana cuando utiliza la CLI.

*Ejemplo:*

grafana-cli --homepath "/usr/share/grafana" admin reset-admin-password <new password>

====== Anular archivo de configuración

--config value anula la ubicación predeterminada donde Grafana espera el archivo de configuración. Consulte Configuración para obtener más información sobre cómo configurar Grafana y las ubicaciones predeterminadas de los archivos de configuración.

*Ejemplo:*

grafana-cli --config "/etc/configuration/" admin reset-admin-password mynewpassword

===== Comandos de complementos

Grafana CLI le permite instalar, actualizar y administrar sus complementos de Grafana. Para obtener más información sobre la instalación de complementos, consulte la página de complementos.

Todos los comandos enumerados se aplican a los repositorios y directorios predeterminados de Grafana. Puede anular los valores predeterminados con Opciones globales.

====== Lista de complementos disponibles

grafana-cli plugins list-remote

====== Instale la última versión de un complemento

grafana-cli plugins install <plugin-id>

====== Instalar una versión específica de un complemento

grafana-cli plugins install <plugin-id> <version>

====== Lista de complementos instalados

grafana-cli plugins ls

====== Actualizar todos los complementos instalados

grafana-cli plugins update-all

====== Actualizar un complemento

grafana-cli plugins update <plugin-id>

====== Quitar un complemento

grafana-cli plugins remove <plugin-id>

===== Comandos de administrador

Los comandos de administrador solo están disponibles en Grafana 4.1 y versiones posteriores.

====== Mostrar todos los comandos de administrador

grafana-cli admin

====== Restablecer contraseña de administrador

grafana-cli admin reset-admin-password <new password> restablece la contraseña del usuario administrador mediante la CLI. Es posible que deba hacer esto si pierde la contraseña de administrador.

Si se utilizan dos indicadores para establecer la ruta de inicio y la ruta del archivo de configuración, la ejecución del comando devuelve este error:

No se pudieron encontrar los valores predeterminados de configuración, asegúrese de que el parámetro de línea de comando homepath esté configurado o que el directorio de trabajo sea homepath

Para corregir esto, use la opción global --homepath para especificar la ruta de inicio predeterminada de Grafana para este comando:

grafana-cli --homepath "/usr/share/grafana" admin reset-admin-password <new password>

Si no ha perdido la contraseña de administrador, le recomendamos que cambie la contraseña de usuario en las Preferencias de usuario o en la pestaña Administrador del servidor > Usuario.

Si necesita establecer la contraseña en un script, puede usar la API de usuario de Grafana.

====== Migrar datos y cifrar contraseñas

data-migration ejecuta un script que migra o limpia datos en su base de datos.

encrypt-datasource-passwords migra contraseñas de campos no seguros al campo secure_json_data. Devuelve ok a menos que haya un error. Seguro de ejecutar varias veces.

*Ejemplo:*

grafana-cli admin data-migration encrypt-datasource-passwords

=== Seguridad

==== Seguridad

Si ejecuta servicios web que no son de Grafana en su servidor de Grafana o dentro de su red local, es posible que sean vulnerables a la explotación a través del proxy de la fuente de datos de Grafana u otros métodos.

Para evitar que suceda este tipo de explotación, le recomendamos que aplique una o más de las precauciones que se enumeran a continuación.

===== Limite las direcciones IP / nombres de host para la URL de la fuente de datos

Puede configurar Grafana para permitir que solo determinadas direcciones IP o nombres de host se utilicen como URL de origen de datos y se transfieran a través del proxy de origen de datos de Grafana. Consulte data_source_proxy_whitelist para obtener instrucciones de uso.

===== Reglas del cortafuegos

Configure un firewall para restringir que Grafana realice solicitudes de red a servicios web internos sensibles.

Hay muchas herramientas de firewall disponibles, consulte la documentación de su herramienta de seguridad específica. Por ejemplo, los usuarios de Linux pueden usar iptables.

===== Servidor proxy

Requiera que todas las solicitudes de red que realiza Grafana pasen por un servidor proxy.

===== Limitar los permisos de consulta del visor

Los usuarios con el rol de Espectador pueden ingresar _cualquier consulta posible_ en _cualquiera_ de las fuentes de datos disponibles en la *organización*, no solo las consultas que están definidas en los tableros para los cuales el usuario tiene permisos de Espectador.

*Por ejemplo:* en una instancia de Grafana con una fuente de datos, un tablero y un panel que tiene una consulta definida, puede suponer que un Espectador solo puede ver el resultado de la consulta definida en ese panel. En realidad, el Espectador tiene acceso para enviar cualquier consulta a la fuente de datos. Con una herramienta de línea de comandos como curl (hay muchas herramientas para esto), el Espectador puede realizar su propia consulta a la fuente de datos y potencialmente acceder a datos confidenciales.

Para abordar esta vulnerabilidad, puede restringir el acceso a consultas de fuentes de datos de las siguientes maneras:

* Cree múltiples fuentes de datos con algunas restricciones agregadas en la configuración de la fuente de datos que restringen el acceso (como el nombre de la base de datos o las credenciales). Luego, use la función de Enterprise Permisos de fuente de datos para restringir el acceso de los usuarios a la fuente de datos en Grafana.
* Cree una organización en Grafana separada y, en esa organización, cree una fuente de datos separada. Asegúrese de que la fuente de datos tenga alguna configuración de opción / usuario / credenciales que limite el acceso a un subconjunto de los datos. No todas las fuentes de datos tienen la opción de limitar el acceso.

===== Implicaciones de habilitar el acceso anónimo a los tableros

Cuando habilita el acceso anónimo a un tablero, estará disponible públicamente. Esta sección enumera las implicaciones de seguridad de habilitar el acceso anónimo.

* Cualquiera que tenga la URL puede acceder al panel de control.
* Cualquiera puede ver llamadas a la API y enumerar todas las carpetas, tableros y fuentes de datos.
* Cualquiera puede realizar consultas arbitrarias a cualquier fuente de datos con la que esté configurada la instancia de Grafana.

== Administrar usuarios

=== Administrar usuarios

Grafana ofrece varias opciones para agrupar usuarios. Cada nivel tiene diferentes herramientas para administrar las cuentas de los usuarios y diferentes tareas que pueden realizar.

Una de las tareas de administración de usuarios más importantes es la asignación de roles, que rigen los permisos que tiene un usuario. Los permisos correctos garantizan que los usuarios tengan acceso solo a los recursos que necesitan.

==== Servidor

El nivel más alto y más amplio de grupo de usuarios en Grafana es el servidor. Cada usuario con una cuenta en una instancia de Grafana es miembro del grupo de servidores.

Los administradores de servidor de Grafana son cuentas de usuario que tienen la opción de administrador de Grafana establecida en *Sí*. Pueden administrar cuentas de usuarios individuales y organizaciones en su servidor.

Los administradores del servidor pueden:

* Administrar usuarios
* Gestionar organizaciones

==== Organización

Las organizaciones son grupos de usuarios en un servidor. Los usuarios pueden pertenecer a una o más organizaciones, pero cada usuario debe pertenecer al menos a una organización.

Las fuentes de datos, los complementos y los tableros están asociados con las organizaciones. Esto significa que puede tener un servidor con dos organizaciones, una con una fuente de datos Prometheus y otra con una fuente de datos InfluxDB. Cada organización tiene datos y tableros separados.

Los miembros de organizaciones tienen permisos basados ​​en su rol en la organización. Para obtener más información, consulte Roles de la organización.

Los administradores de la organización son cuentas de usuario a las que se les asigna la función de administrador para una organización. Pueden administrar a sus usuarios y equipos en su organización.

Los administradores de la organización pueden:

* Administrar usuarios
* Administrar equipos

==== Equipos

Los equipos son grupos de usuarios dentro de la misma organización. Los equipos le permiten otorgar permisos a un grupo de usuarios. Se utilizan con mayor frecuencia para administrar permisos para carpetas y tableros. Los usuarios de Enterprise pueden utilizarlos para aplicar permisos de fuentes de datos.

Los equipos son administrados principalmente por administradores de la organización. Sin embargo, si se aplica la configuración del servidor de Grafana editors_can_admin, los usuarios a los que se les asigna la función de administrador de equipo también pueden administrar equipos en su organización y usuarios asignados a sus equipos.

Los administradores de equipo pueden gestionar equipos.

==== Usuarios

Los usuarios son cuentas con nombre en Grafana con permisos otorgados para acceder a los recursos en Grafana. Todos los usuarios pueden administrar sus propias cuentas hasta cierto punto.

Los usuarios pueden:

* Ver y editar el perfil de usuario
* Cambiar la contraseña
* Cambiar de organización

==== Aprende más

Configure usuarios y equipos en nuestro tutorial sobre cómo crear usuarios y equipos.

=== Tareas del administrador del servidor

==== Tareas de administrador del servidor

Los administradores del servidor Grafana utilizan el menú *Administrador del servidor* para administrar las cuentas de usuario y las organizaciones configuradas en el servidor Grafana.

Realizan las tareas descritas en las siguientes páginas:

* Gestionar usuarios como administrador de servidor: describe las tareas de gestión de usuarios que pueden realizar los administradores de servidor de Grafana.
* Gestionar organizaciones como administrador de servidor: describe las tareas de gestión de la organización que pueden realizar los administradores de servidor de Grafana.
* API de usuario: administre usuarios o cambie las contraseñas mediante programación.

==== Gestionar usuarios

===== Gestionar usuarios como administrador del servidor

Este tema explica las tareas de administración de usuarios realizadas por los administradores de Grafana Server.

Para realizar cualquiera de estas tareas, debe iniciar sesión en Grafana en una cuenta con permisos de administrador de Grafana Server. Para obtener más información sobre los permisos de administrador de Grafana, consulte la función de administrador del servidor de Grafana.

*Nota:* La función de administrador del servidor Grafana no existe en Grafana Cloud. Los usuarios de Grafana Cloud no pueden realizar las tareas enumeradas en esta sección.

====== Ver la lista de cuentas de usuario del servidor

Vea una lista completa de usuarios con cuentas en su servidor Grafana.

[arabic]
. Pase el cursor sobre el icono de *Administrador del Servidor* (escudo) hasta que aparezca un menú.
. Haga clic en *Usuarios*.

Grafana muestra todas las cuentas de usuario en el servidor, enumeradas en orden alfabético por nombre de usuario. La siguiente información es mostrada:

* *Inicio de sesión:* el valor en el campo *Nombre de usuario* de la cuenta.
* *Correo electrónico:* el correo electrónico asociado con la cuenta de usuario.
* *Nombre:* el valor en el campo *Nombre* de la cuenta.
* *Visto:* cuánto tiempo hace que el usuario inició sesión. Si nunca ha iniciado sesión, se muestra el tiempo más largo predeterminado (10 años).
* *Estado del administrador del servidor:* si la cuenta de usuario tiene configurada la opción de *administrador de Grafana*, se muestra un icono de escudo.
* *Estado de la cuenta:* si la cuenta está deshabilitada, se muestra la etiqueta *Deshabilitada*.

image:extracted-media\media\image6.png[Server Admin user list,width=624,height=281]

====== Ver detalles de la cuenta de usuario

Ver todos los detalles asociados con una cuenta de usuario específica.

[arabic]
. Pase el cursor sobre el icono de *Administrador de Servidor* (escudo) hasta que aparezca un menú.
. Haz clic en *Usuarios*.
. Haga clic en la cuenta de usuario que desea ver. Si es necesario, use el campo de búsqueda en la parte superior de la pestaña para buscar la cuenta de usuario específica que necesita.

Cada cuenta de usuario contiene las siguientes secciones.

======= Información del usuario

Esta sección de la cuenta contiene información básica del usuario. Los usuarios pueden cambiar los valores en estos campos por su propia cuenta.

* Nombre
* Correo electrónico
* Nombre de usuario
* Contraseña

image:extracted-media\media\image7.png[Server Admin user information section,width=624,height=224]

======= Permisos

Esto indica si la cuenta de usuario tiene la marca de administrador de Grafana aplicada o no. Si es *Sí*, entonces el usuario es un administrador de Grafana Server.

image:extracted-media\media\image8.png[Server Admin Permissions section,width=624,height=80]

======= Organizaciones

Esta sección enumera las organizaciones a las que pertenece la cuenta de usuario y los roles que desempeñan dentro de cada organización.

image:extracted-media\media\image9.png[Server Admin Organizations section,width=624,height=130]

======= Sesiones

Vea las sesiones recientes en las que el usuario inició sesión, incluso cuándo inició sesión e información sobre el sistema con el que inició sesión. Puede forzar cierres de sesión si es necesario.

image:extracted-media\media\image10.png[Server Admin Sessions section,width=624,height=125]

====== Agregar una cuenta de usuario

Cree una nueva cuenta de usuario a nivel de servidor.

Pase el cursor sobre el icono de *Server Admin* (escudo) hasta que aparezca un menú.

[arabic]
. Haz clic en *Usuarios*.
. Haga clic en *Nuevo usuario*.
. Ingrese la siguiente información: - *Nombre* - Requerido. - *Correo electrónico*: opcional si se ingresa un nombre de usuario. - Nombre de usuario: opcional si se ingresa un *correo electrónico*. – *Contraseña* - Requerido.
. Haga clic en *Crear usuario*.

El usuario puede cambiar toda esta información después de iniciar sesión. Para obtener instrucciones, consulte el perfil de la cuenta de usuario de Grafana y cambie su contraseña.

====== Editar una cuenta de usuario

Cambie la información o la configuración en una cuenta de usuario individual.

======= Editar la información del usuario

Edite la información de una cuenta de usuario existente, incluido el nombre, correo electrónico, nombre de usuario y contraseña.

[arabic]
. Haga clic en la cuenta de usuario que desea editar. Si es necesario, use el campo de búsqueda para encontrar la cuenta.
. En la sección Información del usuario, haga clic en *Editar* junto al campo que desea cambiar.
. Ingrese el nuevo valor y luego haga clic en *Guardar*.

======= Cambiar la contraseña en una cuenta de usuario

Los usuarios pueden cambiar sus propias contraseñas, pero los administradores del servidor también pueden cambiar las contraseñas de los usuarios.

[arabic]
. Haga clic en la cuenta de usuario que desea editar. Si es necesario, use el campo de búsqueda para encontrar la cuenta.
. En la sección Información del usuario, haga clic en *Editar* junto al campo *Contraseña*.
. Ingrese el nuevo valor y luego haga clic en *Guardar*. Grafana requiere un valor de al menos cuatro caracteres en este campo.

======= Eliminar una cuenta de usuario

Elimina permanentemente una cuenta de usuario del servidor.

[arabic]
. Haga clic en la cuenta de usuario que desea editar. Si es necesario, use el campo de búsqueda para encontrar la cuenta.
. Haga clic en *Eliminar usuario*.
. Haga clic en *Eliminar usuario* para confirmar la acción.

======= Habilitar o deshabilitar una cuenta de usuario

Active o desactive temporalmente el acceso a la cuenta, pero no elimine la cuenta del servidor.

======= Deshabilitar cuenta de usuario

Evite que un usuario inicie sesión con esta cuenta, pero no elimine la cuenta. Puede desactivar una cuenta si un colega se toma un año sabático.

[arabic]
. Haga clic en la cuenta de usuario que desea editar. Si es necesario, use el campo de búsqueda para encontrar la cuenta.
. Haga clic en *Desactivar usuario*.
. Haga clic en *Deshabilitar usuario* para confirmar la acción.

======= Habilitar una cuenta de usuario

Reactivar una cuenta de usuario deshabilitada.

[arabic]
. Haga clic en la cuenta de usuario que desea editar. Si es necesario, use el campo de búsqueda para encontrar la cuenta.
. Haga clic en *Habilitar usuario*.

====== Agregar / eliminar la bandera de administrador de Grafana

Otorgue o elimine la función de administrador del servidor Grafana de una cuenta de usuario.

[arabic]
. Haga clic en la cuenta de usuario que desea editar. Si es necesario, use el campo de búsqueda para encontrar la cuenta.
. En la sección Permisos, haga clic en *Cambiar*.
. Haga clic en *Sí* o *No*, dependiendo de si desea o no que esta cuenta de usuario tenga el rol de Administrador de servidor de grafana.
. Haga clic en *Cambiar*.

La próxima vez que este usuario inicie sesión, se actualizarán sus permisos.

====== Agregar un usuario a una organización

Agregue una cuenta de usuario a una organización existente. Las cuentas de usuario pueden pertenecer a varias organizaciones, pero cada cuenta de usuario debe pertenecer al menos a una organización.

[arabic]
. Haga clic en la cuenta de usuario que desea editar. Si es necesario, use el campo de búsqueda para encontrar la cuenta.
. En la sección Organizaciones, haga clic en *Agregar usuario a la organización*.
. En la ventana *Agregar a una organización*, seleccione la *Organización* a la que está agregando el usuario.
. Seleccione el *rol* que debe tener el usuario en la organización.
. Haga clic en *Agregar a la organización*.

====== Eliminar un usuario de una organización

Elimine una cuenta de usuario de una organización a la que está asignada actualmente.

[arabic]
. Haga clic en la cuenta de usuario que desea editar. Si es necesario, use el campo de búsqueda para encontrar la cuenta.
. En la sección Organizaciones, haga clic en *Eliminar de la organización* junto a la organización de la que desea eliminar al usuario.
. Haz clic en *Confirmar eliminación*.

====== Cambiar el rol de la organización

Cambie el rol de organización asignado a una cuenta de usuario.

[arabic]
. Haga clic en la cuenta de usuario que desea editar. Si es necesario, use el campo de búsqueda para encontrar la cuenta.
. En la sección Organizaciones, haga clic en *Cambiar rol* junto a la organización para la que desea cambiar la función de usuario.
. Seleccione el nuevo rol y luego haga clic en *Guardar*.

====== Ver y administrar sesiones de usuario

Vea cuándo un usuario inició sesión por última vez e información sobre cómo inició sesión. También puede forzar a la cuenta a cerrar sesión en Grafana.

[arabic]
. Haga clic en la cuenta de usuario que desea editar. Si es necesario, use el campo de búsqueda para encontrar la cuenta.
. Desplácese hacia abajo hasta la sección Sesiones para ver las sesiones asociadas con esta cuenta de usuario.

====== Obligar a un usuario a cerrar sesión en Grafana

Si sospecha que una cuenta de usuario está comprometida o ya no está autorizada para acceder al servidor de Grafana, puede forzar el cierre de sesión de la cuenta.

======= Forzar el cierre de sesión de un dispositivo

Cierre la cuenta de usuario de un dispositivo específico que haya iniciado sesión en Grafana.

[arabic]
. Haga clic en la cuenta de usuario que desea editar. Si es necesario, use el campo de búsqueda para encontrar la cuenta.
. Desplácese hacia abajo hasta la sección Sesiones.
. Haga clic en *Forzar cierre de sesión* junto a la entrada de la sesión que desea cerrar sesión en Grafana.
. Haga clic en *Confirmar cierre de sesión*.

======= Forzar el cierre de sesión de todos los dispositivos

Cierre la cuenta de usuario de todos los dispositivos que estén conectados a Grafana.

[arabic]
. Haga clic en la cuenta de usuario que desea editar. Si es necesario, use el campo de búsqueda para encontrar la cuenta.
. Desplácese hacia abajo hasta la sección Sesiones.
. Haga clic en *Forzar cierre de sesión de todos los dispositivos*.
. Haga clic en *Forzar cierre de sesión*.

==== Administrar la organización

===== Gestionar organizaciones como administrador de servidor

Este tema explica las tareas de gestión de la organización realizadas por Administradores de servidor de Grafana.

Para realizar cualquiera de estas tareas, debe iniciar sesión en Grafana en una cuenta con los permisos de administración de Grafana Server. Para obtener más información sobre los permisos de administración de Grafana, consulte el rol de administración de Grafana Server

*Nota:* El rol de administración de Grafana Server no existe en Grafana Cloud. Los usuarios de Grafana Cloud no pueden realizar tareas enumeradas en esta sección.

====== Ver lista de organizaciones

Consulte una lista completa de organizaciones configuradas en su servidor de Grafana.

[arabic]
. Coloque su cursor sobre el icono del *Administrador del servidor* (escudo) hasta que aparezca un menú.
. Haga clic en *Organizaciones*.

Grafana muestra todas las organizaciones configuradas en el servidor, enumeradas en orden alfabético por nombre de la organización. La siguiente información se muestra:

* *ID:* el número de identificación de la organización.
* *Nombre:* el nombre de la organización.

image:extracted-media\media\image11.png[Server Admin organization list,width=624,height=277]

====== Crear organización

Agregue una organización a su servidor de Grafana.

[arabic]
. Coloque su cursor sobre el icono de *Administrador del servidor* (escudo) hasta que aparezca un menú.
. Haga clic en *Organizaciones*.
. Haga clic en *+ Nueva organización*.
. Ingrese el nombre de la nueva organización y luego haga clic en *Crear*.

Ocurren dos cosas:

* Grafana crea una nueva organización con usted como miembro único y administrador.
* Grafana abre la pestaña de preferencias de la nueva organización.

Ahora puede agregar usuarios o realizar otras tareas de administración de la organización.

====== Borrar la organización

Retire permanentemente a una organización de su servidor Grafana.

*Advertencia:* Eliminar la organización también elimina a todos los equipos y tableros para esta organización.

[arabic]
. Coloque su cursor sobre el icono de *Administrador del servidor* (escudo) hasta que aparezca un menú.
. Haga clic en *Organizaciones*.
. Haga clic en la *X* roja junto a la organización que desea eliminar.
. Haga clic en *Eliminar*.

====== Editar una organización

Los Administradores de servidor de Grafana pueden realizar algunas tareas de administración de organizaciones que son casi idénticas a las tareas de administración de la organización, solo se acceden desde una ruta de menú diferente.

image:extracted-media\media\image12.png[Server admin Edit Organization,width=624,height=316]

======= Ver miembros y roles de la organización

Consulte qué cuentas de usuario están asignadas a la organización y sus roles asignados.

[arabic]
. Coloque su cursor sobre el icono de *Administrador del servidor* (escudo) hasta que aparezca un menú.
. Haga clic en *Organizaciones*.
. Haga clic en el nombre de la organización para la que desea ver a los miembros.
. Desplácese hasta la sección de Usuarios de la organización. Las cuentas de usuario se muestran en orden alfabético.

======= Cambiar el nombre de la organización

[arabic]
. Haga clic en el nombre de la organización que desea editar.
. En el campo *Nombre*, escriba el nombre de la nueva organización.
. Haga clic en *Actualizar*.

======= Cambiar el rol de un miembro de la organización

Cambie el rol de un miembro de la organización asignado a una cuenta de usuario que está asignada la organización que está editando.

[arabic]
. Haga clic en el nombre de la organización que desea editar.
. En la sección de Usuarios de la organización, ubique la cuenta de usuario a la que desea cambiar el rol.
. En el campo del *Rol*, seleccione el nuevo rol que desea asignar.

====== Eliminar a un usuario de una organización

[arabic]
. Haga clic en el nombre de la organización que desea editar.
. En la sección de Usuarios de la organización, ubique la cuenta de usuario a la que desea cambiar el rol.
. Haga clic en la *X* roja junto a la lista de cuentas de usuario y luego haga clic en *Eliminar*.

=== Tareas del administrador de la organización

==== Gestionar usuarios como Administrador de organización

Una _organización_ es un grupo de usuarios en un servidor de Grafana. Cada usuario puede pertenecer a más de una organización. Cada miembro de la organización tiene un papel en esa organización que les otorga un cierto nivel de permisos. Para obtener más información, consulte los roles de la organización.

Los administradores de la organización, también llamados administradores de org, pueden administrar usuarios en su organización. Algunas de sus tareas se superponen con las tareas de administración del servidor.

*Nota:* debe tener permisos de administrador en una organización para realizar las tareas descritas en esta página.

===== Ver lista de cuentas de usuario de la organización

Consulte una lista completa de usuarios con cuentas en su organización en Grafana. Si es necesario, puede usar el campo de búsqueda para filtrar la lista.

[arabic]
. Coloque su cursor sobre el icono de *Configuración* (engranaje) en el menú lateral.
. Haga clic en *Usuarios*.

Grafana muestra todas las cuentas de usuario en el servidor, enumeradas en orden alfabético por nombre de usuario. La siguiente información esta siendo mostrada:

* *Iniciar sesión:* el valor en el campo *Nombre de usuario* de la cuenta.
* *Correo electrónico:* El correo electrónico asociado con la cuenta de usuario.
* *Nombre:* el valor en el campo *Nombre* de la cuenta.
* *Visto:* Hace cuánto tiempo el usuario ha iniciado sesión. Si nunca se han iniciado sesión, entonces se muestra el tiempo más largo predeterminado (10 años).
* *Rol:* el rol de la organización actualmente asignado al usuario.

image:extracted-media\media\image13.png[Org Admin user list,width=624,height=294]

===== Gestionar invitaciones de la organización

Los administradores de la organización pueden invitar a los usuarios a sus organizaciones de Grafana y administrar invitaciones. Cuando un usuario invitado entra en Grafana, se crea una cuenta de usuario para ellos si no existe ya.

====== Invitar al usuario a la organización

Invite o agregue una cuenta de usuario existente a su organización.

[arabic]
. Coloque su cursor sobre el icono de *Configuración* (engranaje) en el menú lateral.
. Haga clic en *Usuarios*.
. Haga clic en *Invitar*.
. Ingrese la siguiente informacion:
* *Correo electrónico o nombre de usuario*: el correo electrónico o el nombre de usuario que el usuario usará para iniciar sesión en Grafana.
* *Nombre* - (opcional) El valor en el campo *Nombre* de la cuenta.
* *Rol:* Haga clic en el rol de la organización para asignar a este usuario. Para obtener más información, consulte los Roles de la organización.
* *Enviar invitación por correo electrónico*
** *Sí:* si su organización ha configurado SMTP, Grafana envía un correo electrónico a los usuarios que los invita a iniciar sesión en Grafana y unirse a su organización.
** *No:* al usuario no se envía una invitación, pero pueden iniciar sesión en el servidor Grafana con el correo electrónico o el nombre de usuario que ingresó.
. Haga clic en *Enviar*.

image:extracted-media\media\image14.png[Invite User,width=624,height=384]

====== Ver invitaciones pendientes

Revise las invitaciones de usuarios que fueron invitados, pero no han iniciado sesión.

image:extracted-media\media\image15.png[Pending Invites button,width=624,height=62]

*Nota:* El botón solo es visible si hay invitaciones sin respuesta.

[arabic]
. {blank}
+
____
Coloque su cursor sobre el icono de *Configuración* (engranaje) en el menú lateral.
____
. {blank}
+
____
Haga clic en *Usuarios*.
____
. {blank}
+
____
Haga clic en *Invitaciones pendientes*.
____

Grafana muestra una lista de invitaciones pendientes. Si es necesario, puede usar el campo de búsqueda para filtrar la lista.

image:extracted-media\media\image16.png[Pending Invites list,width=624,height=209]

====== Cancelar la invitación

Revocar la invitación de un usuario que fue invitado pero no ha iniciado sesión.

[arabic]
. {blank}
+
____
Coloque su cursor sobre el icono de *Configuración* (engranaje) en el menú lateral.
____
. {blank}
+
____
Haga clic en *Usuarios*.
____
. {blank}
+
____
Haga clic en *Invitaciones pendientes*.
____
. {blank}
+
____
Haga clic en la *X* roja junto a la invitación que desea cancelar.
____

===== Cambiar rol de la organización

A cada cuenta de usuario se le asigna un Rol de organización. Los Administradores de organización pueden cambiar el rol asignado a un usuario en su organización.

* Coloque su cursor sobre el icono de *Configuración* (engranaje) en el menú lateral.
* Haga clic en *Usuarios*.
* Encuentre la cuenta de usuario para la cual desea cambiar el rol. Use el campo de búsqueda para filtrar la lista si es necesario.
* Haga clic en la lista de *Roles* en la cuenta de usuario que desea cambiar. Grafana muestra la lista de roles disponibles.
* Haga clic en el rol que desea asignar.

===== Eliminar usuario de la organización

Eliminar una cuenta de usuario de su organización. Esto evita que accedan a los tableros y fuentes de datos asociadas con la organización, pero no elimina la cuenta de usuario del servidor.

[arabic]
. Coloque su cursor sobre el icono de *Configuración* (engranaje) en el menú lateral.
. Haga clic en *Usuarios*.
. Encuentre la cuenta de usuario que desea eliminar. Use el campo de búsqueda para filtrar la lista si es necesario.
. Haga clic en la *X* roja para eliminar al usuario de su organización.

=== Administrar equipos

==== Administrar equipos

Un _equipo_ es un grupo de usuarios asignados a una organización en un servidor Grafana. Cada usuario puede pertenecer a más de una organización y a más de un equipo. Los equipos generalmente son administrados por Administradores de la organización, pero también pueden ser administrados por los Editores si la configuración del servidor editors_can_admin está establecida en true. Para obtener más información, consulte Roles de la organización.

A los miembros de los equipos se les asigna uno de dos permisos:

[arabic]
. Miembro: se requiere para ser miembro del equipo.
. Administrador: un miembro del equipo que también puede administrar la membresía del equipo, cambiar los permisos del equipo, cambiar la configuración del equipo y agregar o eliminar el equipo.

*Nota:* Debe tener permisos de Administrador de la organización o Administrador del equipo, o permisos de Editor con editors_can_admin seleccionado, para realizar las tareas descritas en esta página. Los Administradores de equipo solo pueden realizar tareas que se apliquen a su equipo específico.

===== Ver lista de equipos

Vea la lista completa de equipos en su organización Grafana.

[arabic]
. Pase el cursor sobre el icono de *Configuración* (engranaje) en el menú lateral.
. Haz clic en *Equipos*. Grafana muestra la lista de equipos.

====== Vista del administrador de la organización

image:extracted-media\media\image17.png[Team list,width=624,height=243]

====== Vista de administrador del equipo

image:extracted-media\media\image18.png[Team list,width=624,height=248]

===== Cree un equipo

Agregue un equipo a su organización Grafana.

[arabic]
. Pase el cursor sobre el icono de *Configuración* (engranaje) en el menú lateral.
. Haz clic en *Equipos*. Grafana muestra la lista de equipos.
. Haga clic en *Nuevo equipo*.
. Ingrese la información del equipo:
[arabic]
.. *Nombre:* ingrese el nombre del nuevo equipo.
.. *Correo electrónico:* (opcional) ingrese el correo electrónico del equipo.
. Haga clic en *Crear*.

===== Agregar un miembro del equipo

Agregue una cuenta de usuario existente a un equipo.

[arabic]
. Pase el cursor sobre el icono de *Configuración* (engranaje) en el menú lateral.
. Haz clic en *Equipos*. Grafana muestra la lista de equipos.
. Haga clic en el nombre del equipo al que desea agregar usuarios.
. Haga clic en *Agregar miembro*.
. En la lista *Agregar miembro del equipo*, haga clic en la cuenta de usuario que desea agregar al equipo. También puede escribir en el campo para filtrar la lista.
. Haga clic en *Agregar al equipo*.
. Repita el proceso para agregar más miembros al equipo.

image:extracted-media\media\image19.png[Add team member,width=624,height=265]

===== Eliminar a un miembro del equipo

Elimina una cuenta de usuario del equipo.

[arabic]
. Pase el cursor sobre el icono de *Configuración* (engranaje) en el menú lateral.
. Haz clic en *Equipos*. Grafana muestra la lista de equipos.
. Haga clic en el nombre del equipo del que desea eliminar usuarios.
. Haga clic en la *X* roja junto al nombre del usuario que desea eliminar del equipo y luego haga clic en *Eliminar*.

===== Establecer permisos de miembros del equipo

Cambiar los niveles de permiso de los miembros del equipo.

* Pase el cursor sobre el icono de *Configuración* (engranaje) en el menú lateral.
* Haz clic en *Equipos*. Grafana muestra la lista de equipos.
* Haga clic en el nombre del equipo en el que desea cambiar los permisos de usuario.
* En la lista de miembros del equipo, busque y haga clic en la cuenta de usuario que desea cambiar. Puede utilizar el campo de búsqueda para filtrar la lista si es necesario.
* Haga clic en la lista *Permisos* y luego haga clic en el nuevo nivel de permiso de usuario.

image:extracted-media\media\image20.png[Change team member permissions,width=624,height=247]

===== Eliminar un equipo

Elimina de forma permanente el equipo y todos los permisos especiales que se le hayan asignado.

[arabic]
. Pase el cursor sobre el icono de *Configuración* (engranaje) en el menú lateral.
. Haz clic en *Equipos*. Grafana muestra la lista de equipos.
. Haga clic en la *X* roja junto al equipo que desea eliminar y luego haga clic en *Eliminar*.

=== Tareas de la cuenta de usuario

==== Tareas de la cuenta de usuario

Grafana le permite administrar ciertos aspectos de su cuenta de usuario, incluido el nombre de usuario, el correo electrónico y la contraseña.

También puede ver aspectos importantes de su cuenta, como las organizaciones y roles asignados y las sesiones de Grafana asociadas con la cuenta.

==== Perfil de cuenta de usuario

===== Perfil de la cuenta de usuario de Grafana

Puede editar y ver información importante sobre su cuenta de usuario de Grafana, incluidas sus organizaciones asignadas, sus sesiones y la información asociada a su cuenta.

====== Edite su perfil

Su perfil incluye su nombre, nombre de usuario y dirección de correo electrónico.

* Vaya a la pestaña Preferencias. Pase el cursor sobre el icono de usuario en la esquina inferior izquierda de la pantalla y luego haga clic en *Preferencias*.
* En la sección Editar perfil, puede editar cualquiera de los siguientes:
** *Nombre:* edite este campo para cambiar el nombre para mostrar asociado con su perfil.
** *Correo electrónico:* edite este campo para cambiar la dirección de correo electrónico asociada con su perfil.
** *Nombre de usuario:* edite este campo para cambiar su nombre de usuario.
* Clic en *Guardar*.

====== Ver sus organizaciones asignadas

Cada usuario es miembro de al menos una organización. Puede tener diferentes roles en cada organización de la que sea miembro.

* Vaya a la pestaña Preferencias. Pase el cursor sobre el icono de usuario en la esquina inferior izquierda de la pantalla y luego haga clic en *Preferencias*.
* Desplácese hacia abajo hasta la sección Organizaciones.
** *Nombre:* el nombre de las organizaciones de las que es miembro en esa instancia de Grafana.
** *Rol:* el rol que se le asigna en la organización. Consulte Roles de la organización sobre los permisos asignados a cada rol.
** *Actual:* Grafana etiqueta la organización en la que está conectado actualmente como _Actual_. Si forma parte de varias organizaciones, puede hacer clic en *Seleccionar* para cambiar a esa organización.

====== Ver sus sesiones de Grafana

Grafana registra sus sesiones en cada instancia de Grafana. Puede revisar esta sección si sospecha que alguien ha hecho un mal uso de sus credenciales de Grafana.

* Vaya a la pestaña Preferencias. Pase el cursor sobre el icono de usuario en la esquina inferior izquierda de la pantalla y luego haga clic en *Preferencias*.
* Desplácese hacia abajo hasta la sección Sesiones. Grafana muestra lo siguiente:

[arabic]
. {blank}
+
____
*Visto por última vez:* cuánto tiempo hace que inició sesión.
____
. {blank}
+
____
*Conectado:* la fecha en que inició sesión en la instancia actual de Grafana.
____
. {blank}
+
____
*Dirección IP:* la dirección IP desde la que inició sesión.
____
. {blank}
+
____
*Navegador y sistema operativo:* el navegador web y el sistema operativo utilizados para iniciar sesión en Grafana.
____
. {blank}
+
____
Si es un administrador de Grafana para la instancia, puede revocar una sesión haciendo clic en el icono rojo de cierre de sesión en la fila de la sesión.
____

==== Cambia su contraseña

===== Cambia su contraseña de Grafana

Puede cambiar su contraseña de Grafana en la pestaña Cambiar contraseña.

*Nota:* Si su instancia de Grafana utiliza un proveedor de autenticación externo, es posible que no pueda cambiar su contraseña. Póngase en contacto con su administrador de Grafana para obtener más información.

====== Cambie su contraseña

[arabic]
. Pase el mouse sobre el ícono de usuario en la esquina inferior izquierda de la pantalla.
. Haga clic en *Cambiar contraseña*. Grafana abre la pestaña Cambiar contraseña.
. Ingrese su *Contraseña anterior* para autorizar el cambio.
. Ingrese su *Nueva contraseña* y luego *Confirme la contraseña*.
. Haga clic en *Cambiar contraseña*.

==== Cambiar de organización

===== Cambiar la organización en la que inició sesión

Cuando inicia sesión en Grafana, siempre está registrado con una organización en particular. Si está asignado a varias organizaciones, es posible que deba cambiar la organización en la que inició sesión. Por ejemplo, si necesita ver un tablero asociado con una organización diferente, puede cambiar de organización.

* Coloque el cursor sobre el ícono de usuario en la esquina inferior izquierda de la pantalla y luego haga clic en *Cambiar*.
* Junto a la organización en la que desea iniciar sesión, haga clic en *Cambiar a*.

== Permisos

=== Permisos

Lo que puede hacer en Grafana está definido por los _permisos_ asociados con su cuenta de usuario.

Hay tres tipos de permisos:

* Permisos otorgados como Administrador de Servidor de Grafana
* Permisos asociados con su rol en una organización
* Permisos otorgados a una carpeta o tablero específico

Se le pueden otorgar permisos basados ​​en:

* Estado de Administrador de Servidor de Grafana.
* Rol de la organización (Administrador, Editor o Espectador).
* Permisos de carpeta o tablero asignados a su equipo (Administrador, Editor, Espectador).
* Permisos de carpeta o panel asignados a su cuenta de usuario (Administrador, Editor, Espectador).
* (Grafana Enterprise) Permisos de fuente de datos. Para obtener más información, consulte Permisos de fuentes de datos en Grafana Enterprise.
* (Grafana Cloud) Grafana Cloud tiene roles adicionales. Para obtener más información, consulte los roles y permisos de Grafana Cloud.

==== Rol de Administrador de Servidor de Grafana

Los Administradores de Servidor de Grafana tienen habilitada la marca de *Administrador de Grafana* en su cuenta. Pueden acceder al menú *Administrador del Servidor* y realizar las siguientes tareas:

* Gestionar usuarios y permisos.
* Crear, editar y eliminar organizaciones.
* Ver la configuración de todo el servidor que se establece en el archivo de Configuración.
* Ver las estadísticas del servidor Grafana, incluidos los usuarios totales y las sesiones activas.
* Actualizar el servidor a Grafana Enterprise.

*Nota:* este rol no existe en Grafana Cloud.

==== Roles de organización

Los usuarios pueden pertenecer a una o más organizaciones. La membresía de la organización de un usuario está vinculada a un rol que define lo que el usuario puede hacer en esa organización. Para obtener más información, consulte Roles de la organización.

==== Permisos de tablero y carpeta

Los permisos de tablero y carpeta le permiten eliminar los permisos predeterminados basados ​​en roles para Editores y Espectadores y asignar permisos a usuarios y equipos específicos. Obtenga más información sobre los Permisos de tablero y carpeta.

==== Permisos de fuente de datos

De forma predeterminada, cualquier usuario de esa organización puede consultar una fuente de datos en una organización. Por ejemplo, un usuario con el rol de Espectador aún puede emitir cualquier consulta posible a una fuente de datos, no solo aquellas consultas que existen en los tableros a los que tiene acceso.

Los permisos de fuentes de datos le permiten cambiar los permisos predeterminados para las fuentes de datos y restringir los permisos de consulta a *Usuarios* y *Equipos* específicos. Para obtener más información, consulte Permisos de fuentes de datos en Grafana Enterprise.

=== Roles de organización

==== Roles de organización

Los usuarios pueden pertenecer a una o más organizaciones. La membresía de la organización de un usuario está vinculada a un rol que define lo que el usuario puede hacer en esa organización. Grafana admite varias _organizaciones_ para admitir una amplia variedad de modelos de implementación, incluido el uso de una sola instancia de Grafana para brindar servicio a múltiples organizaciones potencialmente no confiables.

En la mayoría de los casos, Grafana se implementa con una sola organización.

Cada organización puede tener una o más fuentes de datos.

Todos los tableros son propiedad de una organización en particular.

*Nota:* La mayoría de las bases de datos métricas no proporcionan autenticación de series por usuario. Esto significa que las fuentes de datos de la organización y los tableros están disponibles para todos los usuarios de una organización en particular.

===== Comparar roles

La siguiente tabla compara lo que puede hacer cada rol. Lea las secciones siguientes para obtener explicaciones más detalladas.

[cols=",,,",options="header",]
|===
|  |Administrador |Editor |Espectador
|Ver tableros |x |x |x
|Añadir, editar, borrar tableros |x |x | 
|Añadir, editar, borrar carpetas |x |x | 
|Ver listas de reproducción |x |x |x
|Crear, actualizar, borrar listas de reproducción |x |x | 
|Acceder a Explorar |x |x | 
|Añadir, editar, borrar fuentes de datos |x |  | 
|Añadir y editar usuarios |x |  | 
|Añadir y editar equipos |x |  | 
|Cambiar configuración de organización |x |  | 
|Cambiar configuración de equipo |x |  | 
|Configurar complementos de aplicaciones |x |  | 
|===

===== Rol de administrador de la organización

Puede hacer todo lo que esté dentro del alcance de la organización, Por ejemplo:

* Puede agregar, editar y eliminar fuentes de datos.
* Puede agregar y editar usuarios y equipos en su organización.
* Puede agregar, editar y eliminar carpetas que contienen tableros para fuentes de datos asociadas con su organización. También pueden editar los permisos de las carpetas.
* Puede configurar complementos de aplicaciones y configuraciones de organización.
* Puede hacer todo lo que permita la función de Editor.

===== Rol de editor

[arabic]
. Puede ver, agregar y editar tableros, paneles y reglas de alerta en tableros a los que tienen acceso. Esto se puede desactivar en carpetas y tableros específicos.
. Puede agregar, editar y eliminar carpetas que contienen tableros para fuentes de datos asociadas con su organización. No pueden editar los permisos de la carpeta.
. Puede crear, actualizar o eliminar listas de reproducción.
. Puede acceder a Explorar.
. Puede agregar, editar o eliminar canales de notificación de alerta.
. No se pueden agregar, editar ni eliminar fuentes de datos.
. No se pueden administrar otras organizaciones, usuarios y equipos.

Este rol se puede cambiar con la configuración del servidor Grafana editors_can_admin. Si establece esto en true, los usuarios con el rol de Editor también pueden administrar tableros, carpetas y equipos que creen. Esto es especialmente útil para permitir que los equipos autoorganizados administren sus propios tableros.

===== Rol de espectador

* Puede ver cualquier tablero al que tengan acceso. Esto se puede desactivar en carpetas y tableros específicos.
* No se puede agregar, editar ni eliminar fuentes de datos.
* No se puede agregar, editar ni eliminar tableros o paneles.
* No se puede crear, actualizar ni eliminar listas de reproducción.
* No se puede agregar, editar ni eliminar canales de notificación de alerta.
* No puede acceder a Explorar.
* No puede administrar otras organizaciones, usuarios y equipos.

Este rol se puede cambiar con la configuración del servidor Grafana viewers_can_edit. Si establece esto en true, los usuarios con el rol de Espectador pueden:

* Realizar ediciones transitorias del tablero, lo que significa que pueden modificar paneles y consultas, pero no guardar los cambios ni crear nuevos tableros.
* Acceder y usar Explorar.

Esto es especialmente útil para instalaciones públicas de Grafana donde desea que los usuarios anónimos puedan editar paneles y consultas, pero no guardar ni crear nuevos tableros.

=== Permisos de tablero y carpeta

==== Otorgar permisos de tablero y carpeta

Puede asignar y eliminar permisos para roles de organización, usuarios y equipos para tableros y carpetas de tableros específicos.

Este tema explica cómo otorgar permisos a carpetas y tableros específicos.

Para obtener más información sobre cómo denegar el acceso a ciertos usuarios de Grafana, consulte Restricción del acceso.

image:extracted-media\media\image21.png[Folder permissions,width=624,height=277]

===== Niveles de permisos

Grafana tiene tres niveles de permisos que se pueden asignar. Estos permisos son independientes de los roles de la organización.

[arabic]
. *Administrar:* puede crear, editar o eliminar tableros. Puede crear, editar y eliminar carpetas. También puede cambiar los permisos del tablero y de la carpeta.
. *Editar:* puede crear y editar tableros. _No_ se pueden cambiar los permisos de la carpeta o el tablero, ni agregar, editar o eliminar carpetas.
. *Ver:* solo puede ver tableros y carpetas existentes.

===== Otorgar permisos de carpeta

Los permisos de carpeta se aplican a la carpeta y a todos los tableros que contiene.

* En la barra lateral, pase el mouse sobre el ícono *Tableros* (cuadrados) y luego haga clic en *Administrar*.
* Pase el cursor del mouse sobre una carpeta y luego haga clic en *Ir a carpeta*.
* Vaya a la pestaña *Permisos* y luego haga clic en *Agregar permiso*.
* En *Agregar permiso para*, seleccione *Usuario*, *Equipo* o una de las opciones de rol.
* En el segundo cuadro, seleccione el usuario o equipo para el que desea agregar permiso. Omita este paso si seleccionó un rol en el paso anterior.
* En el tercer cuadro, seleccione el permiso que desea agregar.
* Clic en *Guardar*.

===== Otorgar permisos de tablero

[arabic]
. En la esquina superior derecha de su tablero, haga clic en el icono de engranaje para ir a la *Configuración del tablero*.
. Vaya a la pestaña *Permisos* y luego haga clic en *Agregar permiso*.
. En *Agregar permiso para*, seleccione *Usuario*, *Equipo* o una de las opciones de rol.
. En el segundo cuadro, seleccione el usuario o equipo para el que desea agregar permiso. Omita este paso si seleccionó un rol en el paso anterior.
. En el tercer cuadro, seleccione el permiso que desea agregar.
. Clic en *Guardar*.

===== Editar permisos

Para cambiar los permisos existentes, navegue a la página de permisos como se describe arriba. En lugar de hacer clic en *Agregar permiso*, cambie o elimine los permisos ya asignados. Los cambios entran en vigor de inmediato.

=== Restringir el acceso

==== Restringir el acceso

El permiso más alto siempre gana, por lo que si, por ejemplo, desea ocultar una carpeta o un tablero de otros, debe eliminar el permiso basado en el *Rol de la organización* de la Lista de Control de Acceso (ACL).

[arabic]
. No puede anular los permisos de los usuarios con el rol de Administrador de Organización. Los Administradores siempre tienen acceso a todo.
. Un permiso más específico con un nivel de permiso más bajo no tendrá ningún efecto si existe una regla más general con un nivel de permiso más alto. Debe eliminar o reducir el nivel de permiso de la regla más general.

A continuación, se muestran algunos ejemplos de cómo Grafana resuelve varios permisos.

===== Ejemplo 1 (user1 tiene el Rol de Editor)

Permisos para un tablero:

[arabic]
. Todos los que tengan el rol de Editor pueden editar
. user1 puede ver

Resultado: el user1 tiene permiso de Edición, ya que siempre gana el permiso más alto.

===== Ejemplo 2 (user1 tiene el Rol de Espectador y es miembro del team1)

Permisos para un tablero:

[arabic]
. Todos los que tengan el rol de Espectador pueden ver
. user1 puede Editar
. team1 puede Administrar

Resultado: el user1 tiene permiso de Administrador, ya que siempre gana el permiso más alto.

===== Ejemplo 3

Permisos para un tablero:

[arabic]
. user1 puede administrar (heredado de la carpeta principal)
. user1 puede editar

Resultado: no puede anular a un permiso inferior. user1 tiene permiso de Administrador, ya que siempre gana el permiso más alto.

=== Permisos de fuente de datos

==== Permisos de fuente de datos

Los permisos de fuente de datos le permiten restringir el acceso de los usuarios para consultar una fuente de datos. Para cada fuente de datos hay una página de permisos que le permite habilitar permisos y restringir los permisos de consulta a usuarios y equipos específicos.

*Nota:* Los permisos de la fuente de datos solo están disponibles en Grafana Enterprise. Para obtener más información, consulte Permisos de fuentes de datos en Grafana Enterprise.

== Fuentes de datos

=== Fuentes de datos

Grafana admite muchos backends de almacenamiento diferentes para sus datos de series temporales (fuente de datos). Consulte Agregar una fuente de datos para obtener instrucciones sobre cómo agregar una fuente de datos a Grafana. Solo los usuarios con el rol de administrador de la organización pueden agregar fuentes de datos.

==== Consultas

Cada fuente de datos tiene un Editor de Consultas específico que se personaliza para las características y capacidades que expone la fuente de datos en particular. El lenguaje de consulta y las capacidades de cada fuente de datos son obviamente muy diferentes. Puede combinar datos de varias fuentes de datos en un solo Tablero, pero cada Panel está vinculado a una fuente de datos específica que pertenece a una Organización en particular.

==== Fuentes de datos compatibles

Las siguientes fuentes de datos son compatibles oficialmente:

[arabic]
. AWS CloudWatch
. Azure Monitor
. Elasticsearch
. Google Cloud Monitoring
. Graphite
. InfluxDB
. Loki
. Microsoft SQL Server (MSSQL)
. MySQL
. OpenTSDB
. PostgreSQL
. Prometheus
. Jaeger
. Zipkin
. Tempo
. Testdata

Además de las fuentes de datos que ha configurado en su Grafana, hay tres fuentes de datos especiales disponibles:

[arabic]
. *Grafana:* una fuente de datos integrada que genera datos de recorridos aleatorios. Útil para probar visualizaciones y ejecutar experimentos.
. *Mixto:* seleccione esta opción para consultar varias fuentes de datos en el mismo panel. Cuando se selecciona esta fuente de datos, Grafana le permite seleccionar una fuente de datos para cada nueva consulta que agregue.
[arabic]
.. La primera consulta utilizará la fuente de datos que se seleccionó antes de seleccionar *Mixta*.
.. No puede cambiar una consulta existente para utilizar la Fuente de Datos Mixta.
.. Ejemplo de Grafana Play: Fuentes de datos mixtas
. *Tablero:* seleccione esta opción para usar un conjunto de resultados de otro panel en el mismo tablero.

==== Complementos de fuentes de datos

Desde Grafana 3.0, puede instalar fuentes de datos como complementos. Visite Grafana.com/plugins para obtener más fuentes de datos.

=== Agregar fuente de datos

==== Agregar una fuente de datos

Antes de poder crear su primer tablero, debe agregar su fuente de datos.

*Nota:* Solo los usuarios con el rol de Administrador de la organización pueden agregar fuentes de datos.

[arabic]
. Mueva el cursor al engranaje del menú lateral que le mostrará el menú de configuración. Si el menú lateral no está visible, haga clic en el icono de Grafana en la esquina superior izquierda. Haga clic en *Configuración* > *Fuentes de datos* en el menú lateral y se lo dirigirá a la página de fuentes de datos donde puede agregar y editar fuentes de datos. También puede hacer clic en el engranaje.

image:extracted-media\media\image22.png[https://grafana.com/static/img/docs/v52/sidemenu-datasource.png,width=540,height=310]

[arabic, start=2]
. Mueva el cursor al icono de engranaje en el menú lateral que mostrará las opciones de configuración.

image:extracted-media\media\image23.png[https://grafana.com/static/img/docs/v75/sidemenu-datasource-7-5.png,width=170,height=212]

[arabic, start=3]
. Haga clic en *Fuentes de datos*. Se abre la página de fuentes de datos que muestra una lista de fuentes de datos configuradas previamente para la instancia de Grafana.
. Haga clic en *Agregar fuente de datos* para ver una lista de todas las fuentes de datos admitidas.

image:extracted-media\media\image24.png[https://grafana.com/static/img/docs/v75/add-data-source-7-5.png,width=624,height=603]

[arabic, start=5]
. Busque una fuente de datos específica ingresando el nombre en el cuadro de diálogo de búsqueda. O puede desplazarse por las fuentes de datos admitidas agrupadas en series de tiempo, registro, rastreo y otras categorías.
. Mueva el cursor sobre la fuente de datos que desea agregar.

image:extracted-media\media\image25.png[https://grafana.com/static/img/docs/v75/select-data-source-7-5.png,width=624,height=99]

[arabic, start=7]
. Haga clic en *Seleccionar*. Se abre la página de configuración de la fuente de datos.
. Configure la fuente de datos siguiendo las instrucciones específicas de esa fuente de datos. Consulte Fuentes de datos para obtener enlaces a instrucciones de configuración para todas las fuentes de datos compatibles.

=== Loki

==== Usando Loki en Grafana

Grafana se envía con soporte integrado para Loki, un sistema de agregación de registros de código abierto de Grafana Labs. Este tema explica opciones, variables, consultas y otras opciones específicas de esta fuente de datos.

Agréguelo como fuente de datos y estará listo para crear tableros o consultar sus datos de registro en Explorar. Consulte Agregar una fuente de datos para obtener instrucciones sobre cómo agregar una fuente de datos a Grafana. Solo los usuarios con el rol de administrador de la organización pueden agregar fuentes de datos.

*Nota:* Para solucionar problemas de configuración y otros problemas, consulte el archivo de registro ubicado en /var/log/grafana/grafana.log en sistemas Unix o en <grafana_install_dir> / data / log en otras plataformas e instalaciones manuales.

===== Configuración de Loki

Para acceder a la configuración de Loki, haga clic en el icono de *Configuración* (engranaje), luego haga clic en *Fuentes de datos* y luego haga clic en la fuente de datos de Loki.

[cols=",",options="header",]
|===
|Nombre |Descripción
|Nombre |El nombre de la fuente de datos. Así es como se hace referencia a la fuente de datos en paneles, consultas y Explorar.
|Predeterminado |La fuente de datos predeterminada significa que se preseleccionará para nuevos paneles.
|URL |La URL de la instancia de Loki, p. Ej. http://localhost:3100
|Cookies incluidas en la lista blanca |Grafana Proxy elimina las cookies reenviadas de forma predeterminada. Especifique las cookies por nombre que deben enviarse a la fuente de datos.
|Líneas máximas |Límite superior para el número de líneas de registro devueltas por Loki (el valor predeterminado es 1000). Reduzca este límite si su navegador es lento al mostrar registros en Explorar.
|===

====== Campos derivados

La configuración de Campos Derivados le permite:

[arabic]
. Agregar campos analizados del mensaje de registro.
. Agregar un enlace que use el valor del campo.

Puede usar esta funcionalidad para vincular a su backend de seguimiento directamente desde sus registros, o vincular a una página de perfil de usuario si hay un userId presente en la línea de registro. Estos enlaces aparecen en los detalles del registro.

Cada campo derivado consta de:

[arabic]
. *Nombre:* se muestra en los detalles del registro como una etiqueta.
. *Regex:* un patrón Regex que se ejecuta en el mensaje de registro y captura parte de él como el valor del nuevo campo. Solo puede contener un único grupo de captura.
. *URL / consulta:* si el enlace es externo, introduzca la URL completa del enlace. Si el enlace es un enlace interno, esta entrada sirve como consulta para la fuente de datos de destino. En ambos casos, puede interpolar el valor del campo con el macro $\{__value.raw}.
. *Enlace interno:* seleccione si el enlace es interno o externo. En caso de un enlace interno, un selector de fuente de datos le permite seleccionar la fuente de datos de destino. Solo se admiten las fuentes de datos de seguimiento.

Puede usar una sección de depuración para ver qué extraen sus campos y cómo se interpola la URL. Haga clic en *Mostrar mensaje de registro de ejemplo* para mostrar el área de texto donde puede ingresar un mensaje de registro.

image:extracted-media\media\image26.png[Screenshot of the derived fields debugging,width=624,height=262]

El nuevo campo con el enlace que se muestra en los detalles del registro:

image:extracted-media\media\image27.png[Detected fields link in Explore,width=624,height=239]

===== Editor de consultas Loki

Puede utilizar el editor de consultas de Loki para crear consultas de registro y métricas.

[cols=",",options="header",]
|===
|Nombre |Descripción
|Expresión de consulta |Expresión de consulta Loki, consulte la documentación de LogQL para obtener más información.
|Tipo de consulta |Elija el tipo de consulta a ejecutar. El tipo instantáneo realiza consultas en un solo punto en el tiempo. Estamos usando el tiempo "Hasta" del rango de tiempo. El tipo de rango consulta sobre el rango de tiempo seleccionado.
|Límite de línea |Límite superior para el número de líneas de registro devueltas por consulta. El valor predeterminado es el límite máximo de líneas establecido en la configuración de Loki.
|Leyenda |Disponible solo en Tablero. Controla el nombre de la serie temporal, mediante el nombre o el patrón. Por ejemplo, \{\{hostname}} se reemplaza con el valor de la etiqueta para la etiqueta hostname.
|===

====== Explorador de registros

Con el navegador de registros de Loki, puede navegar fácilmente a través de su lista de etiquetas y valores y construir la consulta de su elección. El navegador de registros tiene una selección de varios pasos:

[arabic]
. Elija las etiquetas que le gustaría considerar para su búsqueda.
. Elija los valores para las etiquetas seleccionadas. El navegador de registros admite la creación de facetas y, por lo tanto, solo muestra posibles combinaciones de etiquetas.
. Elija el tipo de consulta: consulta de registros o consulta de métricas de tasa. Además, también puede validar selector.

image:extracted-media\media\image28.png[Screenshot of the derived fields debugging,width=624,height=524]

===== Consultando con Loki

Hay dos tipos de consultas LogQL:

[arabic]
. Consultas de registro: devuelven el contenido de las líneas de registro.
. Consultas de métricas: amplían las consultas de registros y calculan valores de muestra en función del contenido de los registros de una consulta de registros.

====== Consultas de registro

La consulta y visualización de datos de registro de Loki está disponible a través de Explorar y con el panel de registros en los tableros. Seleccione la fuente de datos de Loki y luego ingrese una consulta LogQL para mostrar sus registros.

Una consulta de registro consta de dos partes: selector de flujo de registros y una canalización de registros. Por razones de rendimiento, comience eligiendo un flujo de registro seleccionando una etiqueta de registro.

====== Contexto de registro

Cuando utilice una expresión de búsqueda como se detalla anteriormente, puede recuperar el contexto que rodea los resultados filtrados. Al hacer clic en el enlace Mostrar Contexto en las filas filtradas, podrá investigar los mensajes de registro que vinieron antes y después del mensaje de registro que le interesa.

====== Seguimiento en vivo

Loki admite el Seguimiento en vivo, que muestra registros en tiempo real. Esta función es compatible con Explorar.

Tenga en cuenta que Seguimiento en Vivo se basa en dos conexiones Websocket: una entre navegador y el servidor Grafana, y otro entre el servidor Grafana y el servidor Loki. Si ejecuta proxies inversos, configúrelos en consecuencia. El siguiente ejemplo de Apache2 se puede utilizar para el proxy entre el navegador y el servidor Grafana:

ProxyPassMatch "^/(api/datasources/proxy/\d+/loki/api/v1/tail)" "ws://127.0.0.1:3000/$1"

El siguiente ejemplo muestra la configuración básica del proxy NGINX. Se asume que el servidor Grafana está disponible en http://localhost:3000/, el servidor Loki se ejecuta localmente sin proxy y su sitio externo usa HTTPS. Si también aloja a Loki detrás del proxy NGINX, es posible que también desee repetir la siguiente configuración para Loki.

En la sección http de la configuración de NGINX, agregue la siguiente definición de mapa:

map $http_upgrade $connection_upgrade \{

default upgrade;

'' close;

}

En su sección server, agregue la siguiente configuración:

location ~ /(api/datasources/proxy/\d+/loki/api/v1/tail) \{

proxy_pass http://localhost:3000$request_uri;

proxy_set_header Host $host;

proxy_set_header X-Real-IP $remote_addr;

proxy_set_header X-Forwarded-for $proxy_add_x_forwarded_for;

proxy_set_header X-Forwarded-Proto "https";

proxy_set_header Connection $connection_upgrade;

proxy_set_header Upgrade $http_upgrade;

}

location / \{

proxy_pass http://localhost:3000/;

proxy_set_header Host $host;

proxy_set_header X-Real-IP $remote_addr;

proxy_set_header X-Forwarded-for $proxy_add_x_forwarded_for;

proxy_set_header X-Forwarded-Proto "https";

}

*Nota:* esta función solo está disponible en Grafana v6.3 +.

===== Consultas métricas

LogQL admite el empaquetado de una consulta de registro con funciones que permiten crear métricas a partir de los registros. Consulte la documentación de LogQL sobre cómo crear y utilizar consultas de métricas.

===== Plantillas

En lugar de codificar cosas como el servidor, la aplicación y el nombre del sensor en sus consultas de métricas, puede usar variables en su lugar. Las variables se muestran como cuadros de selección desplegables en la parte superior del tablero. Estos cuadros desplegables facilitan el cambio de los datos que se muestran en su tablero.

Consulte la documentación de creación de Plantillas para obtener una introducción a la función de creación de plantillas y los diferentes tipos de variables de plantilla.

===== Variable de consulta

La variable del tipo _Consulta_ le permite consultar a Loki para obtener etiquetas de lista o valores de etiqueta. El complemento de fuente de datos de Loki proporciona las siguientes funciones que puede utilizar en el campo de entrada Query.

[cols=",",options="header",]
|===
|Nombre |Descripción
|label_names() |Devuelve una lista de nombres de etiquetas.
|label_values(label) |Devuelve una lista de valores de etiqueta para label en cada métrica.
|===

===== Anotaciones

Puede utilizar cualquier consulta Loki no métrica como fuente de anotaciones. El contenido del registro se utilizará como texto de anotación y las etiquetas de su flujo de registro como etiquetas, por lo que no es necesario un mapeo adicional.

===== Configurar la fuente de datos con aprovisionamiento

Puede configurar la fuente de datos a través de archivos de configuración con el sistema de aprovisionamiento de Grafana. Puede leer más sobre cómo funciona y todas las configuraciones que puede establecer para las fuentes de datos en la página de documentos de aprovisionamiento.

Aquí hay un ejemplo:

apiVersion: 1

datasources:

- name: Loki

type: loki

access: proxy

url: http://localhost:3100

jsonData:

maxLines: 1000

Aquí hay otro con autenticación básica y campo derivado. Tenga en cuenta que el carácter $ debe escaparse en los valores YAML, ya que se usa para interpolar variables de entorno:

apiVersion: 1

datasources:

- name: Loki

type: loki

access: proxy

url: http://localhost:3100

basicAuth: *true*

basicAuthUser: my_user

basicAuthPassword: test_password

jsonData:

maxLines: 1000

derivedFields:

/* Campo con enlace interno que apunta a la fuente de datos en Grafana.

/* En este momento, Grafana solo admite fuentes de datos Jaeger y Zipkin como destinos de enlace.

/* El valor de datasourceUid puede ser cualquier cosa, pero debe ser único en todos los uids de origen de datos definidos.

- datasourceUid: my_jaeger_uid

matcherRegex: "traceID=(\\w+)"

name: TraceID

/* url se interpretará como una consulta para la fuente de datos

url: '$$\{__value.raw}'

/* Campo con enlace externo.

- matcherRegex: "traceID=(\\w+)"

name: TraceID

url: 'http://localhost:16686/trace/$$\{__value.raw}'

A continuación, se muestra un ejemplo de una fuente de datos de Jaeger que se corresponde con el ejemplo anterior. Tenga en cuenta que el valor de uid de Jaeger coincide con el valor de datasourceUid de Loki.

datasources:

- name: Jaeger

type: jaeger

url: http://jaeger-tracing-query:16686/

access: proxy

/* El UID debe coincidir con el datasourceUid en dervidedFields.

uid: my_jaeger_uid

=== Prometheus

==== Fuente de datos de Prometheus

Grafana incluye soporte integrado para Prometheus. Este tema explica opciones, variables, consultas y otras opciones específicas de la fuente de datos de Prometheus. Consulte Agregar una fuente de datos para obtener instrucciones sobre cómo agregar una fuente de datos a Grafana. Solo los usuarios con el rol de administrador de la organización pueden agregar fuentes de datos.

===== Configuración de Prometheus

Para acceder a la configuración de Prometheus, coloque el mouse sobre el ícono de *Configuración* (engranaje), luego haga clic en *Fuentes de datos* y luego en la fuente de datos de Prometheus.

[cols=",",options="header",]
|===
|Nombre |Descripción
|Name |El nombre de la fuente de datos. Así es como se hace referencia a la fuente de datos en paneles y consultas.
|Default |Fuente de datos predeterminada significa que se preseleccionará para nuevos paneles.
|Url |La URL de su servidor Prometheus, p. Ej. http://prometheus.example.org:9090.
|Access |Servidor de acceso (predeterminado) = URL debe ser accesible desde el servidor / backend de Grafana, Navegador = URL debe ser accesible desde el navegador.
|Basic Auth |Active la autenticación básica en la fuente de datos de Prometheus.
|User |Nombre de usuario para autenticación básica.
|Password |Contraseña para autenticación básica.
|Scrape interval |Ajústelo al intervalo típico de raspado y evaluación configurado en Prometheus. El valor predeterminado es 15 segundos.
|HTTP method |Utilice el método HTTP POST o GET para consultar su fuente de datos. POST es el método recomendado y preseleccionado ya que permite consultas más grandes. Cámbielo a GET si tiene una versión de Prometheus anterior a la 2.1 o si las solicitudes POST están restringidas en su red.
|Disable metrics lookup |Al marcar esta opción, se inhabilitará el selector de métricas y la compatibilidad con métricas / etiquetas en el autocompletado del campo de consulta. Esto ayuda si tiene problemas de rendimiento con instancias de Prometheus más grandes.
|Custom Query Parameters |Agregue parámetros personalizados a la URL de consulta de Prometheus. Por ejemplo, timeout, partial_response, dedup o max_source_resolution. Se deben concatenar varios parámetros junto con un "&".
|Label name |Agregue el nombre del campo en el objeto de etiqueta.
|URL |Si el enlace es externo, introduzca la URL completa del enlace. Puede interpolar el valor del campo con el macro $\{__value.raw}.
|Internal link |Seleccione si el enlace es interno o externo. En el caso de un enlace interno, un selector de fuente de datos le permite seleccionar la fuente de datos de destino. Solo admite el seguimiento de fuentes de datos.
|===

===== Editor de consultas de Prometheus

A continuación, puede encontrar información y opciones para el editor de consultas de Prometheus en el tablero y en Explorar.

====== Editor de consultas en tableros

Abra un gráfico en el modo de edición haciendo clic en el título > Editar (o presionando la tecla e mientras se desplaza sobre el panel).

[cols=",",options="header",]
|===
|Nombre |Descripción
|Query expression |Expresión de consulta de Prometheus, consulte la Documentación de Prometheus.
|Query expression |Controla el nombre de la serie temporal mediante el nombre o el patrón. Por ejemplo, \{\{hostname}} se reemplaza con el valor de la etiqueta para la etiqueta hostname.
|Min step |Un límite inferior adicional para el parámetro step de las consultas de rango de Prometheus y para las variables $__interval y $__rate_interval. El límite es absoluto, no se puede modificar con la configuración de _Resolución_.
|Resolution |1/1 establece tanto la variable $__interval como el parámetro step de las consultas de rango de Prometheus de modo que cada píxel corresponda a un punto de datos. Para un mejor rendimiento, se pueden elegir resoluciones más bajas. 1/2 solo recupera un punto de datos por cada dos píxeles y 1/10 recupera un punto de datos por cada 10 píxeles. Tenga en cuenta que tanto el _intervalo de tiempo mínimo_ como el _paso mínimo_ limitan el valor final de $__interval y step.
|Metric lookup |Busque nombres de métricas en este campo de entrada.
|Format as |Cambiar entre Table, Time series o Heatmap. Table solo funcionará en el panel Tabla. Heatmap es adecuado para mostrar métricas del tipo Histograma en un panel de Mapa de calor. Debajo del capó, convierte histogramas acumulativos en regulares y clasifica las series según el límite del cubo.
|Instant |Realice una consulta “instantánea” para devolver solo el último valor que Prometheus ha extraído para la serie de tiempo solicitada. Las consultas instantáneas devuelven resultados mucho más rápido que las consultas de rango normales. Úselos para buscar conjuntos de etiquetas.
|Min time interval |Este valor multiplicado por el denominador de la configuración de Resolution establece un límite inferior tanto para la variable $__interval como para el parámetro step de las consultas de rango de Prometheus. De forma predeterminada, el _Intervalo de extracción_ se establece en las opciones de origen de datos.
|Exemplars |Ejecute y muestre ejemplos en el gráfico.
|===

*Nota:* Grafana modifica las fechas de solicitud de consultas para alinearlas con el paso calculado dinámicamente. Esto asegura una visualización consistente de los datos de las métricas, pero puede resultar en una pequeña brecha de datos en el borde derecho de un gráfico.

====== Consultas instantáneas en tableros

La fuente de datos de Prometheus le permite ejecutar consultas "instantáneas", que consultan solo el valor más reciente. Puede visualizar los resultados en un panel de tabla para ver todas las etiquetas disponibles de una serie temporal.

Los resultados de las consultas instantáneas se componen de un solo punto de datos por serie, pero se pueden mostrar en el panel de gráficos con la ayuda de anulaciones de series. Para mostrarlos en el gráfico como un último punto de valor, agregue una anulación de serie y seleccione Points > true. Para mostrar una línea horizontal a través del gráfico completo, agregue una anulación de serie y seleccione Transforma > constant.

El soporte para anulaciones de series constantes está disponible en Grafana v6.4

===== Editor de consultas en Explore

[cols=",",options="header",]
|===
|Nombre |Descripción
|Query expression |Expresión de consulta de Prometheus, consulte la documentación de Prometheus.
|Step |Parámetro step de las consultas de rango de Prometheus. Las unidades de tiempo se pueden utilizar aquí, por ejemplo: 5s, 1m, 3h, 1d, 1y. La unidad predeterminada si ninguna unidad especificada es s (segundos).
|Query type |Range, Instant o Both. Al ejecutar la *Consulta de rango*, el resultado de la consulta se muestra en un gráfico y una tabla. La consulta instantánea devuelve solo el último valor que Prometheus ha extraído para la serie de tiempo solicitada y se muestra en la tabla. Cuando se selecciona *Ambos*, se ejecutan tanto la consulta instantánea como la consulta de rango. El resultado de la consulta de rango se muestra en un gráfico y el resultado de la consulta instantánea se muestra en la tabla.
|Exemplars |Ejecute y muestre ejemplares en el gráfico.
|===

===== Plantillas

En lugar de codificar cosas como el servidor, la aplicación y el nombre del sensor en sus consultas de métricas, puede usar variables en su lugar. Las variables se muestran como cuadros de selección desplegables en la parte superior del tablero. Estos menús desplegables facilitan el cambio de los datos que se muestran en su tablero.

Consulte la documentación de creación de Plantillas para obtener una introducción a la función de creación de plantillas y los diferentes tipos de variables de plantilla.

====== Variable de consulta

La variable del tipo _Consulta_ le permite consultar a Prometheus para obtener una lista de métricas, etiquetas o valores de etiquetas. El complemento de fuente de datos de Prometheus proporciona las siguientes funciones que puede utilizar en el campo de entrada Query.

[cols=",",options="header",]
|===
|Nombre |Descripción
|label_names() |Devuelve una lista de nombres de etiquetas.
|label_values​​(label) |Devuelve una lista de valores de etiqueta para label en cada métrica.
|label_values​​(metric, label) |Devuelve una lista de valores de etiqueta para label en la métrica especificada.
|metrics(metric) |Devuelve una lista de métricas que coinciden con la expresión regular de metric especificada.
|query_result(query) |Devuelve una lista de los resultados de la consulta de Prometheus para la query.
|===

Para obtener detalles sobre los _nombres de las métricas_, los _nombres de las etiquetas_ y los _valores de las etiquetas_, consulte la documentación de Prometheus.

====== Usar variables de intervalo y rango

Soporte para $__range, $__range_s y $__range_ms solo disponible en Grafana v5.3

Puede utilizar algunas variables globales integradas en las variables de consulta; $__interval, $__interval_ms, $__range, $__range_s y $__range_ms, consulte Variables integradas globales para obtener más información. Estos pueden ser convenientes de usar junto con la función query_result cuando necesite filtrar consultas de variables, ya que la función label_values ​​no admite consultas.

Asegúrese de configurar el activador refresh de la variable en On Time Range Change para obtener las instancias correctas al cambiar el rango de tiempo en el tablero.

*Uso de ejemplo:*

Complete una variable con las 5 instancias de solicitud más ocupadas según el QPS promedio durante el rango de tiempo que se muestra en el tablero:

Query: query_result(topk(5, sum(rate(http_requests_total[$__range])) by (instance)))

Regex: /"([^"]+)"/

Complete una variable con las instancias que tienen un estado determinado en el rango de tiempo que se muestra en el tablero, usando $__range_s:

Query: query_result(max_over_time(<metric>[$\{__range_s}s]) != <state>)

Regex:

====== Usando la variable $__rate_interval

*Nota:* disponible en Grafana 7.2 y superior

La variable $__rate_interval está destinada a utilizarse en la función de tasa. Se define como max($__interval + _intervalo de raspado_, 4 * _intervalo de raspado_), donde intervalo de raspado es la configuración del paso mínimo (también conocido como intervalo de consulta, una configuración por consulta PromQL), si se establece alguno, _y de lo contrario el intervalo _Scrape_ como se establece la fuente de datos de Prometheus (pero ignorando cualquier ajuste de intervalo mínimo en el panel, porque este último es modificado por el ajuste de resolución).

====== Usar variables en consultas

Hay dos sintaxis:

$<varname> Ejemplo: rate(http_requests_total\{job=~"$job"}[5m])

[[varname]] Ejemplo: rate(http_requests_total\{job=~"[[job]]"}[5m])

¿Por qué de dos formas? La primera sintaxis es más fácil de leer y escribir, pero no le permite usar una variable en medio de una palabra. Cuando las opciones _Multi-valor_ o _Incluir todos los valores_ están habilitadas, Grafana convierte las etiquetas de texto sin formato a una cadena compatible con expresiones regulares. Lo que significa que debe usar =~ en lugar de =.

====== Variable de filtros ad hoc

Prometheus admite el tipo de variable especial de filtros ad hoc. Le permite especificar cualquier número de filtros de etiqueta/valor sobre la marcha. Estos filtros se aplican automáticamente a todas sus consultas de Prometheus.

===== Anotaciones

Las anotaciones le permiten superponer rica información de eventos en la parte superior de los gráficos. Puede agregar consultas de anotaciones a través del menú Tablero / Vista de anotaciones.

Prometheus admite dos formas de consultar anotaciones.

* Una consulta de métrica regular
* Una consulta de Prometheus para alertas pendientes y activadas (para obtener más detalles, consulte Inspección de alertas durante el tiempo de ejecución)

La opción de paso es útil para limitar la cantidad de eventos devueltos por su consulta.

===== Obtenga métricas de Grafana en Prometheus

Grafana expone métricas para Prometheus en el punto final /metrics. También incluimos un tablero dentro de Grafana para que pueda comenzar a ver sus métricas más rápido. Puede importar el tablero incluido yendo a la página de edición de la fuente de datos y haciendo clic en la pestaña del tablero. Allí puede encontrar un panel para Grafana y uno para Prometheus. ¡Importe y comience a ver todas las métricas!

Para obtener instrucciones detalladas, consulte las métricas internas de Grafana.

===== API de Prometheus

La fuente de datos de Prometheus funciona con otros proyectos que implementan la API de consultas de Prometheus, que incluyen:

* Cortex
* Thanos

Para obtener más información sobre cómo consultar otros proyectos compatibles con Prometheus de Grafana, consulte la documentación del proyecto específico.

===== Aprovisionar la fuente de datos de Prometheus

Puede configurar fuentes de datos utilizando archivos de configuración con el sistema de aprovisionamiento de Grafana. Lea más sobre cómo funciona y todas las configuraciones que puede establecer para las fuentes de datos en la página de documentos de aprovisionamiento.

A continuación, se muestran algunos ejemplos de aprovisionamiento para esta fuente de datos:

apiVersion: 1

datasources:

- name: Prometheus

type: prometheus

/* Modo de acceso - proxy (en la interfaz del servidor) o directo (navegador en la interfaz).

access: proxy

httpMethod: POST

url: http://localhost:9090

jsonData:

exemplarTraceIdDestinations:

/* Campo con enlace interno apuntando a la Fuente de datos de Grafana.

/* El valor datasourceUid puede ser cualquiera, pero deberia ser unico entre todos los uids de fuentes de datos definidos.

- datasourceUid: my_jaeger_uid

name: traceID

/* Campo con enlace externo.

- name: traceID

url: 'http://localhost:3000/explore?orgId=1&left=%5B%22now-1h%22,%22now%22,%22Jaeger%22,%7B%22query%22:%22$$\{__value.raw}%22%7D%5D'

===== Ejemplares

*Nota:* esta función está disponible en Prometheus 2.26+ y Grafana 7.4+.

Grafana 7.4 y versiones posteriores tienen la capacidad de mostrar datos ejemplares junto con una métrica tanto en Explorar como en Tableros. Los ejemplares son una forma de asociar metadatos de cardinalidad más alta de un evento específico con datos de series temporales tradicionales.

image:extracted-media\media\image29.png[Screenshot showing the detail window of an Exemplar,width=624,height=285]

Configure Ejemplares en la configuración de la fuente de datos agregando enlaces externos o internos.

image:extracted-media\media\image30.png[Screenshot of the Exemplars configuration,width=624,height=217]

== Paneles

=== Descripción general del panel

El _panel_ es el componente básico de visualización en Grafana. Cada panel tiene un editor de consultas específico para la fuente de datos seleccionada en el panel. El editor de consultas le permite extraer la visualización perfecta para mostrar en el panel.

Existe una amplia variedad de opciones de estilo y formato para cada panel. Los paneles se pueden arrastrar, soltar y reorganizar en el tablero. También se pueden cambiar de tamaño.

==== Mover paneles

Puede arrastrar y soltar paneles haciendo clic y manteniendo presionado el título del panel, luego arrastrándolo a su nueva ubicación. También puede cambiar el tamaño de los paneles fácilmente haciendo clic en los iconos (-) y (+).

image:extracted-media\media\image31.gif[image,width=623,height=211]

===== Consejos y atajos

* Haga clic en el título del gráfico y, en el menú desplegable, duplique rápidamente el panel.
* Haga clic en el icono de color de la leyenda para cambiar el color de una serie o el eje y.
* Haga clic en el nombre de la serie en la leyenda para ocultar la serie.
* Ctrl/Shift/Meta + clic en el nombre de la leyenda para ocultar otras series.
* Pase el cursor sobre un panel y presione e para abrir el editor de paneles.
* Pase el cursor sobre un panel y presione v para abrir el panel en la vista de pantalla completa.

=== Agregar un panel

==== Agregar un panel

Los paneles le permiten mostrar sus datos de forma visual. Este tema lo guía a través de los pasos más básicos para crear un panel.

===== Agregar un panel a un tablero

[arabic]
. Navegue hasta el tablero al que desea agregar un panel.
. Haga clic en el icono *Agregar panel*.

image:extracted-media\media\image32.png[https://grafana.com/static/img/docs/panels/add-panel-icon-7-0.png,width=68,height=52]

[arabic, start=3]
. Haga clic en *Agregar un panel vacío*.

Grafana crea un panel de gráficos vacío con su fuente de datos predeterminada seleccionada.

===== Editar la configuración del panel

Si bien no es obligatorio, le recomendamos que agregue un título y una descripción útiles a su panel. Puede utilizar variables que haya definido en cualquiera de los campos, pero no variables globales.

image:extracted-media\media\image33.png[https://grafana.com/static/img/docs/panels/panel-settings-7-0.png,width=500,height=381]

*Título del panel:* el texto ingresado en este campo se muestra en la parte superior de su panel en el editor de paneles y en el tablero.

*Descripción:* el texto ingresado en este campo se muestra en una información sobre herramientas en la esquina superior izquierda del panel. Escriba una descripción del panel y los datos que está mostrando. Imagínese que se lo está explicando a un nuevo usuario dentro de seis meses, cuando ya no esté fresco en su mente. Los futuros editores (posiblemente usted mismo) se lo agradecerán.

===== Escribe una consulta

Cada panel necesita al menos una consulta para mostrar una visualización. Las consultas se escriben en la pestaña Consulta del editor de paneles. Para obtener más información sobre la pestaña Consulta, vea Consultas.

[arabic]
. Elija una fuente de datos. En la primera línea de la pestaña Consulta, haga clic en la lista desplegable para ver todas las fuentes de datos disponibles. Esta lista incluye todas las fuentes de datos que agregó. Consulte Agregar una fuente de datos si necesita instrucciones.
. Escriba o cree una consulta en el lenguaje de consulta de su fuente de datos. Las opciones variarán. Consulte la documentación de su fuente de datos específica para conocer las pautas específicas.

===== Elija un tipo de visualización

En la sección Visualización de la pestaña Panel, haga clic en un tipo de visualización. Grafana muestra una vista previa de los resultados de su consulta con esa visualización aplicada.

Para obtener más información sobre visualizaciones individuales, consulte Visualizaciones.

===== Aplicar cambios y guardar

Guarde el tablero. Presione Ctrl/Cmd+S o haga clic en *Guardar* en la esquina superior derecha de la pantalla.

Sus opciones varían según los cambios que haya realizado y si se trata de un tablero nuevo o no. Le recomendamos que agregue una nota para describir sus cambios antes de hacer clic en *Guardar*. Las notas son muy útiles si necesita revertir el tablero a una versión anterior.

===== ¿Qué sigue?

Nuestro tutorial de conceptos básicos de Grafana es un excelente lugar para comenzar, o puede obtener más información sobre Grafana leyendo uno de los temas de documentación vinculados a continuación:

* Obtenga más información sobre las opciones del editor de paneles.
* Agregue más consultas.
* Transforme sus datos.
* Configure cómo se muestran sus resultados en la visualización.
* Si hizo un panel gráfico, configure una alerta.
* Cree plantillas y variables.

=== Editor de paneles

==== Editor de paneles

Esta página describe las partes del editor de paneles de Grafana y enlaces a donde puede encontrar más información.

image:extracted-media\media\image34.png[https://grafana.com/static/img/docs/panel-editor/panel-editor-7-0.png,width=624,height=358]

===== Abra el editor de paneles

Hay varias formas de acceder al editor del panel, también llamado pantalla *Editar panel*, _modo de edición_ o _modo de edición de panel_:

* Haga clic en el icono *Agregar panel* en la parte superior de la pantalla y luego haga clic en *Agregar nuevo panel*. El nuevo panel se abre en el editor de paneles. Para obtener instrucciones detalladas sobre cómo agregar un panel, consulte Agregar un panel.
* Haga clic en el título de un panel existente y luego haga clic en *Editar*. El panel se abre en modo de edición.
* Haga clic en cualquier lugar de un panel existente y luego presione *e* en su teclado. El panel se abre en modo de edición.

===== Cambiar el tamaño de las secciones del editor del panel

Arrastre para cambiar el tamaño de las secciones del editor de paneles. Si el panel lateral se vuelve demasiado estrecho, las pestañas Panel, Campo y Anulaciones cambian a una lista desplegable.

image:extracted-media\media\image35.gif[https://grafana.com/static/img/docs/panel-editor/resize-panel-editor-panels-7-0.gif,width=624,height=415]

===== Partes del editor de paneles

Esta sección describe las partes de la pantalla del editor del panel y un poco sobre los campos, opciones o tareas asociadas con cada parte. Algunas secciones de esta página enlazan con páginas en las que las secciones o tareas están documentadas de forma más completa.

====== Encabezamiento

La sección de encabezado enumera el nombre del tablero en el que se encuentra el panel y algunos comandos del tablero. También puede hacer clic en la flecha *Regresar* para regresar al tablero.

image:extracted-media\media\image36.png[https://grafana.com/static/img/docs/panel-editor/edit-panel-header-7-0.png,width=624,height=26]

En el lado derecho del encabezado se encuentran las siguientes opciones:

* *Icono de configuración del panel (engranaje):* haga clic para acceder a la configuración del tablero.
* *Descartar:* descarta todos los cambios que ha realizado en el panel desde la última vez que guardó el tablero.
* *Guardar:* guarda el tablero, incluidos todos los cambios que ha realizado en el editor de paneles.
* *Aplicar:* aplica los cambios que realizó y luego cierra el editor del panel, lo que lo regresa al tablero. Tendrá que guardar el tablero para conservar los cambios aplicados.

====== Vista previa de visualización

La sección de vista previa de visualización contiene opciones de visualización, controles de rango de tiempo, la vista previa de visualización y (si corresponde) el título del panel, los ejes y la leyenda.

image:extracted-media\media\image37.png[https://grafana.com/static/img/docs/panel-editor/visualization-preview-7-0.png,width=624,height=157]

* *Rellenar:* la vista previa de visualización llenará el espacio disponible en la parte de vista previa. Si cambia el ancho del panel lateral o la altura del panel inferior, la visualización se adaptará para llenar cualquier espacio disponible.
* *Ajustar:* la vista previa de visualización llenará el espacio disponible pero conservará la relación de aspecto del panel.
* *Exacto:* la vista previa de visualización tendrá el tamaño exacto que el tamaño en el tablero. Si no hay suficiente espacio disponible, la visualización se reducirá conservando la relación de aspecto.
* *Controles de rango de tiempo:* para obtener más información, consulte Controles de rango de tiempo.

====== Sección de datos (panel inferior)

La sección contiene pestañas donde ingresa consultas, transforma sus datos y crea reglas de alerta (si corresponde).

image:extracted-media\media\image38.png[https://grafana.com/static/img/docs/panel-editor/data-section-7-0.png,width=624,height=170]

* *Pestaña Consultar:* seleccione su fuente de datos e ingrese las consultas aquí. Para obtener más información, consulte Consultas.
* *Pestaña Transformar:* aplique transformaciones de datos. Para obtener más información, consulte Transformaciones.
* *Pestaña Alertar:* escriba reglas de alerta. Para obtener más información, consulte Crear alertas.

====== Opciones de panel y campo (panel lateral)

La sección contiene pestañas donde controlas casi todos los aspectos de cómo se visualizan tus datos. No todas las pestañas están disponibles para cada visualización.

Las funciones de estas pestañas se documentan en los siguientes temas:

* Agregar un panel describe la configuración básica del panel.
* Las opciones de visualizaciones varían ampliamente. Se describen en el tema de visualización individual.
* Las opciones de campo y anulaciones le permiten controlar casi todos los aspectos de su visualización, incluidas las unidades, las asignaciones de valores y los Umbrales.
* Los Enlaces de panel y los Enlaces de datos le ayudan a conectar su visualización con otros recursos.

=== Lista de cálculos

==== Lista de cálculos

Este tema enumera y define los cálculos utilizados en Grafana.

Entre otros lugares, estos cálculos se utilizan en la pestaña Transformar y en las visualizaciones de indicador de barra, indicador y estadísticas.

[cols=",",options="header",]
|===
|Calculo |Descripción
|Todos los nulos |verdaderos cuando todos los valores son nulos
|Todos los ceros |verdaderos cuando todos los valores son 0
|Cuenta de cambios |número de veces que cambia el valor del campo
|Cuenta |número de valores en un campo
|Delta |cambio acumulado en el valor
|Diferencia |diferencia entre el primer y último valor de un campo
|Diferencia porcentual |porcentaje de cambio entre el primer y el último valor de un campo
|Cuenta de distintos |número de valores únicos en un campo
|Primero (no nulo) |primer, valor no-nulo en un campo
|Max |valor máximo de un campo
|Medio |valor medio de todos los valores de un campo
|Min |valor mínimo de un campo
|Min (por encima de cero) |valor mínimo y positivo de un campo
|Rango |diferencia entre los valores máximo y mínimo de un campo
|Paso |intervalo mínimo entre valores de un campo
|Total |suma de todos los valores en un campo
|===

=== Consultas

==== Consultas

Las _consultas_ son la forma en que los paneles de Grafana se comunican con las fuentes de datos para obtener datos para la visualización. Una consulta es una pregunta escrita en el lenguaje de consulta utilizado por la fuente de datos. Grafana pregunta: "Oye, fuente de datos, ¿me enviarías estos datos organizados de esta manera?" Si la consulta está formada correctamente, la fuente de datos responde. La frecuencia con la que se envía la consulta a la fuente de datos y la cantidad de puntos de datos que se recopilan se pueden ajustar en las opciones de fuente de datos del panel.

Grafana admite hasta 26 consultas por panel.

===== Editores de consultas

Los editores de consultas son formularios que le ayudan a redactar consultas. Dependiendo de su fuente de datos, el editor de consultas puede proporcionar autocompletado, nombres de métricas o sugerencias de variables.

Debido a la diferencia entre los lenguajes de consulta, las fuentes de datos pueden tener editores de consultas que se ven diferentes. A continuación, se muestran dos ejemplos de editores de consultas:

====== Editor de consultas de InfluxDB

image:extracted-media\media\image39.png[https://grafana.com/static/img/docs/queries/influxdb-query-editor-7-2.png,width=624,height=257]

====== Editor de consultas de Prometheus (PromQL)

image:extracted-media\media\image40.png[https://grafana.com/static/img/docs/queries/prometheus-query-editor-7-4.png,width=624,height=137]

===== Sintaxis de la consulta

Las fuentes de datos tienen diferentes lenguajes de consulta y sintaxis para solicitar los datos. Aquí hay dos ejemplos de consultas:

====== PostgreSQL

SELECT hostname FROM host WHERE region IN($region)

====== PromQL

query_result(max_over_time(<metric>[$\{__range_s}s]) != <state>)

Para obtener más información sobre cómo escribir una consulta para su fuente de datos, consulte la documentación específica de la fuente de datos de Grafana.

===== Interfaz de usuario de la pestaña de consulta

La pestaña Consultar consta de los siguientes elementos:

* Selector de fuente de datos
* Opciones de consulta
* Botón del inspector de consultas
* Lista de editores de consultas
* Expresiones

image:extracted-media\media\image41.png[https://grafana.com/static/img/docs/queries/query-editor-7-2.png,width=624,height=169]

====== Selector de fuente de datos

El selector de fuente de datos es una lista desplegable. Haga clic en él para seleccionar una fuente de datos que haya agregado. Cuando crea un panel, Grafana selecciona automáticamente su fuente de datos predeterminada. Para obtener más información sobre cómo agregar fuentes de datos, consulte Agregar una fuente de datos.

image:extracted-media\media\image42.png[https://grafana.com/static/img/docs/queries/data-source-selector-7-0.png,width=554,height=1236]

Además de las fuentes de datos que ha configurado en su Grafana, hay tres fuentes de datos especiales disponibles:

* *Grafana:* una fuente de datos integrada que genera datos de recorridos aleatorios. Útil para probar visualizaciones y ejecutar experimentos.
* *Mixta:* seleccione esta opción para consultar varias fuentes de datos en el mismo panel. Cuando se selecciona esta fuente de datos, Grafana le permite seleccionar una fuente de datos para cada nueva consulta que agregue.
** La primera consulta utilizará la fuente de datos que se seleccionó antes de seleccionar *Mixta*.
** No puede cambiar una consulta existente para utilizar la fuente de datos mixta.
* *Tablero:* seleccione esta opción para usar un conjunto de resultados de otro panel en el mismo tablero.

====== Opciones de consulta

Haga clic en *Opciones de consulta* junto al selector de fuente de datos para ver la configuración de la fuente de datos seleccionada. Los cambios que realice aquí solo afectarán a las consultas realizadas en este panel.

image:extracted-media\media\image43.png[https://grafana.com/static/img/docs/queries/data-source-options-7-0.png,width=624,height=143]

Grafana establece valores predeterminados que se muestran en texto gris oscuro. Los cambios se muestran en texto blanco. Para devolver un campo a la configuración predeterminada, elimine el texto blanco del campo.

Opciones de consulta de la fuente de datos del panel:

* *Puntos de datos máximos:* si la fuente de datos lo admite, establece el número máximo de puntos de datos para cada serie devuelta. Si la consulta devuelve más puntos de datos que la configuración de puntos de datos máximos, la fuente de datos los consolida (reduce el número de puntos devueltos agregándolos por promedio o máximo u otra función).

Hay dos razones principales para limitar el número de puntos, el rendimiento y suavizar la línea. El valor predeterminado es el ancho (o número de píxeles) del gráfico, ya que no tiene sentido tener más puntos de datos de los que puede mostrar el panel de gráficos.

Con la transmisión de datos, el valor máximo de puntos de datos se usa para el búfer rodante. (La transmisión es un flujo continuo de datos y el almacenamiento en búfer es una forma de dividir la transmisión en partes). Loki transmite datos en el modo de seguimiento en vivo.

* *Intervalo mínimo:* establece un límite mínimo para el intervalo calculado automáticamente, normalmente el intervalo mínimo de raspado. Si se guarda un punto de datos cada 15 segundos, no tiene sentido tener un intervalo inferior a ese. Otro caso de uso es establecerlo en un mínimo más alto que el intervalo de raspado para obtener consultas más detalladas y que funcionen bien.
* *Intervalo:* el intervalo es un intervalo de tiempo que puede utilizar al agregar o agrupar puntos de datos por tiempo.

____
Grafana calcula automáticamente un intervalo apropiado y se puede utilizar como variable en consultas basadas en plantillas. La variable está en segundos: $__interval o en milisegundos: $__interval_ms. Por lo general, se usa en funciones de agregación como suma o promedio. Por ejemplo, una consulta de Prometheus usando la variable de intervalo: rate(http_requests_total[$__interval]).

Este intervalo automático se calcula en función del ancho del gráfico. Si el usuario aleja mucho, el intervalo se vuelve mayor, lo que resulta en una agregación de grano más grueso, mientras que si el usuario acerca el zoom, el intervalo disminuye, lo que resulta en una agregación de grano más fino.

Para obtener más información, consulte Variables globales.
____

* *Tiempo relativo:* puede anular el intervalo de tiempo relativo para paneles individuales, lo que hace que sean diferentes de lo que se selecciona en el selector de tiempo del tablero en la esquina superior derecha del tablero. Esto le permite mostrar métricas de diferentes períodos de tiempo o días en el mismo tablero.
* *Cambio de tiempo:* la función de cambio de tiempo es otra forma de anular el rango de tiempo para paneles individuales. Solo funciona con rangos de tiempo relativos y le permite ajustar el rango de tiempo.

____
Por ejemplo, puede cambiar el intervalo de tiempo para que el panel sea dos horas antes que el selector de tiempo del tablero. Para obtener más información, consulte Controles de rango de tiempo.
____

* *Tiempo de espera de caché:* (este campo solo es visible si está disponible en su fuente de datos). Si su almacén de series de tiempo tiene un caché de consultas, esta opción puede anular el tiempo de espera de caché predeterminado. Especificado como un valor numérico en segundos.

====== Botón del inspector de consultas

Puede hacer clic en el *Inspector de consultas* para abrir la pestaña Consultar del inspector del panel, donde puede ver la solicitud de consulta enviada por el panel y la respuesta.

Haga clic en *Actualizar* para ver el texto completo de la solicitud enviada por este panel al servidor.

*Nota:* Debe agregar al menos una consulta antes de que el inspector de consultas pueda devolver resultados.

Para obtener más información sobre el inspector de paneles, consulte Inspeccionar un panel.

====== Lista de editores de consultas

En la interfaz de usuario, las consultas se organizan en filas de consultas contraíbles. Cada fila de consulta contiene un editor de consultas y se identifica con una letra (A, B, C, etc.).

Usted puede:

[cols=",",options="header",]
|===
|Icono |Descripción
|image:extracted-media\media\image44.png[https://grafana.com/static/img/docs/queries/query-editor-help-7-4.png,width=56,height=58] |Alternar la ayuda del editor de consultas. Si es compatible con la fuente de datos, haga clic en este icono para mostrar información sobre cómo utilizar el editor de consultas o proporcionar acceso rápido a consultas comunes.
|image:extracted-media\media\image45.png[https://grafana.com/static/img/docs/queries/duplicate-query-icon-7-0.png,width=56,height=58] |Copie una consulta. La duplicación de consultas es útil cuando se trabaja con varias consultas complejas que son similares y desea experimentar con diferentes variantes o realizar modificaciones menores.
|image:extracted-media\media\image46.png[https://grafana.com/static/img/docs/queries/hide-query-icon-7-0.png,width=56,height=58] |Ocultar una consulta. Grafana no envía consultas ocultas a la fuente de datos.
|image:extracted-media\media\image47.png[https://grafana.com/static/img/docs/queries/remove-query-icon-7-0.png,width=56,height=58] |Eliminar una consulta. La eliminación de una consulta la elimina de forma permanente, pero a veces puede recuperar las consultas eliminadas volviendo a las versiones del panel guardadas anteriormente.
|image:extracted-media\media\image48.png[https://grafana.com/static/img/docs/queries/query-drag-icon-7-2.png,width=26,height=29] |Reordenar consultas. Cambie el orden de las consultas haciendo clic y manteniendo presionado el ícono de arrastrar, luego arrastre las consultas donde lo desee. El orden de los resultados refleja el orden de las consultas, por lo que a menudo puede ajustar sus resultados visuales según el orden de las consultas.
|===

====== Expresiones

Si su fuente de datos los admite, Grafana muestra el botón *Expresión* y muestra cualquier expresión existente en la lista del editor de consultas.

Para obtener más información sobre expresiones, consulte Expresiones.

=== Umbrales

==== Umbrales

Los umbrales establecen el color del texto del valor o del fondo según las condiciones que defina.

Puede definir umbrales de dos formas:

* Los umbrales *absolutos* se definen en función de un número. Por ejemplo, 80 en una escala de 1 a 150.
* Los umbrales de *porcentaje* se definen en relación con el mínimo o el máximo. Por ejemplo, 80 por ciento.

Puede aplicar umbrales a las siguientes visualizaciones:

* Medidor de barra
* Medidor
* Grafico
* Estadística
* Tabla

===== Umbrales predeterminados

En las visualizaciones que lo admiten, Grafana establece valores de umbral predeterminados de:

* 80 = rojo
* Base = verde
* Modo = Absoluto

El valor *Base* representa menos infinito. Generalmente es el color "bueno".

===== Agregar un umbral

Puede agregar tantos umbrales a un panel como desee. Grafana clasifica automáticamente los umbrales del valor más alto al más bajo.

*Nota:* estas instrucciones se aplican solo a las visualizaciones de estadísticas, medidores, medidores de barras y tablas.

[arabic]
. Navegue hasta el panel al que desea agregar un umbral.
. Haga clic en la pestaña *Campo*.
. Haga clic en *Agregar umbral*.
. Grafana agrega un umbral con valores numéricos y de color sugeridos.
. Acepte las recomendaciones o edite el nuevo umbral.
* *Editar color:* haz clic en el punto de color que deseas cambiar y luego selecciona un nuevo color.
* *Editar número:* haga clic en el número que desea cambiar y luego ingrese un nuevo número.
* *Modo de umbrales:* haga clic en el modo para cambiarlo para todos los umbrales de este panel.
. Haga clic en *Guardar* para guardar los cambios en el tablero.

===== Agregar un umbral a un Panel de gráficos

En la visualización del panel Gráfico, los umbrales le permiten agregar líneas o secciones arbitrarias al gráfico para que sea más fácil ver cuándo el gráfico cruza un umbral en particular.

[arabic]
. {blank}
+
____
Navegue hasta el panel de gráficos al que desea agregar un umbral.
____
. {blank}
+
____
En la pestaña Panel, haga clic en *Umbrales*.
____
. {blank}
+
____
Haga clic en *Agregar umbral*.
____
. {blank}
+
____
Complete todos los campos que desee. Solo se requieren los campos *T1*.
____
* {blank}
+
____
*T1:* ambos valores son necesarios para mostrar un umbral.
____
** {blank}
+
____
*lt* o *gt:* seleccione *lt* para menor que o *gt* para mayor que para indicar a qué se aplica el umbral.
____
** {blank}
+
____
*Valor:* ingrese un valor de umbral. Grafana dibuja una línea de umbral a lo largo del eje Y en ese valor.
____
* {blank}
+
____
*Color:* elija una condición que corresponda a un color o defina su propio color.
____
** {blank}
+
____
*personalizado:* define el color de relleno y el color de la línea.
____
** {blank}
+
____
*crítico:* el relleno y el color de la línea son rojos.
____
** {blank}
+
____
*advertencia:* el relleno y el color de la línea son amarillos.
____
** {blank}
+
____
*ok:* el relleno y el color de la línea son verdes.
____
* {blank}
+
____
*Relleno:* controla si se muestra el umbral de relleno.
____
* {blank}
+
____
*Línea:* controla si se muestra la línea de umbral.
____
* {blank}
+
____
*Eje Y:* elija *izquierda* o *derecha*.
____
. {blank}
+
____
Haga clic en *Guardar* para guardar los cambios en el tablero.
____

===== Eliminar un umbral

[arabic]
. Navegue hasta el panel al que desea agregar un umbral.
. Haga clic en la pestaña *Campo*. (O pestaña *Panel* para un panel gráfico).
. Haga clic en el icono de la papelera junto al umbral que desea eliminar.
. Haga clic en *Guardar* para guardar los cambios en el tablero.

=== Transformaciones

==== Transformaciones

Las transformaciones procesan el conjunto de resultados de una consulta antes de pasarla para su visualización. Le permiten cambiar el nombre de los campos, unir series de tiempo separadas, hacer cálculos en las consultas y más. Para los usuarios, con numerosos tableros o con un gran volumen de consultas, la capacidad de reutilizar el resultado de la consulta de un panel en otro panel puede ser una gran ganancia de rendimiento.

Se puede acceder a la función de transformaciones desde la pestaña *Transformar* del editor del panel de Grafana.

*Nota:* Transformaciones es una función beta de Grafana 7.0. Los temas de esta sección se actualizarán con frecuencia a medida que trabajemos en esta función.

A veces, las transformaciones dan como resultado datos que no se pueden representar gráficamente. Cuando eso sucede, Grafana muestra una sugerencia en la visualización en la que puede hacer clic para cambiar a visualización de tabla. A menudo, esto le ayuda a comprender mejor lo que la transformación le está haciendo a sus datos.

===== Orden de transformaciones

En caso de que haya múltiples transformaciones, Grafana las aplica en la secuencia exacta en la que se enumeran. Cada transformación crea un nuevo conjunto de resultados que se pasa a la siguiente transformación en la canalización para su procesamiento.

El orden en el que se aplican las transformaciones puede marcar una gran diferencia en el aspecto de sus resultados. Por ejemplo, si usa una transformación Reducir para condensar todos los resultados de una columna en un solo valor, entonces solo puede aplicar transformaciones a ese único valor.

===== Prerrequisitos

Antes de poder configurar y aplicar transformaciones:

* Debe haber ingresado una consulta y haber devuelto datos de una fuente de datos. Para obtener más información sobre consultas, lea Consultas.
* Debe haber elegido una visualización que respalde el resultado de su consulta y las transformaciones elegidas. Diferentes transformaciones pueden dar como resultado una estructura de datos que solo algunas visualizaciones pueden representar. Por ejemplo, la visualización de gráfico no puede mostrar datos reducidos (que resultan de la transformación Reducir). Si su visualización actual no le muestra lo que espera después de aplicar una transformación, cambie a la visualización de tabla para verificar el resultado. Para obtener más información sobre los diferentes tipos de visualizaciones, consulte:

* Medidor de barra
* Medidor
* Grafico
* Mapa de calor
* Registro
* Estadística
* Tabla

==== Aplicar una transformación

===== Aplicar transformaciones

Puede aplicar transformaciones desde la pestaña Transformar del editor de panel de Grafana, que se encuentra junto a la pestaña Consultas. Consulte también, Transformaciones de depuración.

Para aplicar una transformación:

[arabic]
. {blank}
+
____
Navegue hasta el panel donde desea agregar una o más transformaciones.
____
. {blank}
+
____
Haga clic en el título del panel y luego en *Editar*.
____
. {blank}
+
____
Haga clic en la pestaña *Transformar*.
____
. {blank}
+
____
Haga clic en una transformación para seleccionarla.
____

____
Se muestra una fila de transformación. Puede configurar las opciones de transformación aquí. Para obtener más información, consulte Tipos y opciones de transformación.
____

[arabic, start=5]
. {blank}
+
____
Haga clic en *Agregar transformación* para aplicar otra transformación.
____

____
Esta siguiente transformación actúa sobre el conjunto de resultados devuelto por la transformación anterior.

image:extracted-media\media\image49.png[https://grafana.com/static/img/docs/transformations/transformations-7-0.png,width=624,height=137]
____

====== Eliminar una transformación

Para eliminar una transformación que ya no es necesaria, haga clic en el icono de la papelera.

====== Transformaciones de depuración

Para ver los conjuntos de resultados de entrada y salida de la transformación, haga clic en el icono de error (bicho) en el lado derecho de la fila de transformación, Grafana muestra la vista de depuración de transformación debajo de la fila de transformación.

image:extracted-media\media\image50.png[https://grafana.com/static/img/docs/transformations/debug-transformations-7-0.png,width=624,height=314]

==== Tipos y opciones de transformación

===== Tipos y opciones de transformación

Grafana viene con las siguientes transformaciones:

* Tipos y opciones de transformación
** Reducir
** Fusionar
** Filtrar datos por nombre
** Filtrar datos por consulta
** Organizar campos
** Unir por campo (unión externa)
** Agregar campo del cálculo
** Etiquetas para campos
*** Nombre del campo de valor
*** Comportamiento de fusión
** Ordenar por
** Agrupar por
** Concatenar campos
** Serie a filas
** Filtrar datos por valor
** Cambiar el nombre por expresiones regulares

Siga leyendo para obtener descripciones detalladas de cada tipo de transformación y las opciones disponibles para cada una, así como sugerencias sobre cómo usarlas.

====== Reducir

La transformación _Reducir_ aplicará un cálculo a cada campo del marco y devolverá un valor único. Los campos de tiempo se eliminan al aplicar esta transformación.

Considere la entrada:

Consulta A:

[cols=",,",options="header",]
|===
|Tiempo |Temperatura |Tiempo de Actividad
|2020-07-07 11:34:20 |12.3 |256122
|2020-07-07 11:24:20 |15.4 |1230233
|===

Consulta B:

[cols=",,",options="header",]
|===
|Tiempo |AQI |Errores
|2020-07-07 11:34:20 |6.5 |15
|2020-07-07 11:24:20 |3.2 |5
|===

El transformador de reducción tiene dos modos:

* *De serie a filas:* crea una fila para cada campo y una columna para cada cálculo.
* *Reducir campos:* mantiene la estructura del marco existente, pero contrae cada campo en un solo valor.

Por ejemplo, si utilizó el *Primer* y *Último* cálculo con una transformación de *Serie a filas*, el resultado sería:

[cols=",,",options="header",]
|===
|Campo |Primero |Último
|Temperatura |12.3 |15.4
|Tiempo de Actividad |256122 |1230233
|AQI |6.5 |3.2
|Errores |15 |5
|===

*Reducir* *campos* con el *Último* cálculo dan como resultado dos marcos, cada uno con una fila:

Consulta A:

[cols=",",options="header",]
|===
|Temperatura |Tiempo de Actividad
|15.4 |1230233
|===

Consulta B:

[cols=",",options="header",]
|===
|AQI |Errores
|3.2 |5
|===

====== Fusionar

*Nota:* esta transformación está disponible en Grafana 7.1+.

Utilice esta transformación para combinar el resultado de varias consultas en un solo resultado. Esto es útil cuando se usa la visualización de tabla. Los valores que se pueden combinar se combinan en la misma fila. Los valores se pueden combinar si los campos compartidos contienen los mismos datos. Para obtener información, consulte el panel Tabla.

En el siguiente ejemplo, tenemos dos consultas que devuelven datos de tabla. Se visualiza como dos tablas separadas antes de aplicar la transformación.

Consulta A:

[cols=",,",options="header",]
|===
|Tiempo |Trabajo |Tiempo de Actividad
|2020-07-07 11:34:20 |node |25260122
|2020-07-07 11:24:20 |postgre |123001233
|===

Consulta B:

[cols=",,",options="header",]
|===
|Tiempo |Trabajo |Errores
|2020-07-07 11:34:20 |node |15
|2020-07-07 11:24:20 |postgre |5
|===

Aquí está el resultado después de aplicar la transformación Fusionar.

[cols=",,,",options="header",]
|===
|Tiempo |Trabajo |Errores |Tiempo de Actividad
|2020-07-07 11:34:20 |node |15 |25260122
|2020-07-07 11:24:20 |postgre |5 |123001233
|===

====== Filtrar datos por nombre

Utilice esta transformación para eliminar partes de los resultados de la consulta.

Grafana muestra el campo *Identificador*, seguido de los campos devueltos por su consulta.

Puede aplicar filtros de dos formas:

* Ingrese una expresión regular.
* Haga clic en un campo para alternar el filtrado en ese campo. Los campos filtrados se muestran con texto gris oscuro, los campos sin filtrar tienen texto blanco.

En el siguiente ejemplo, eliminé el campo Mín. de los resultados.

Aquí está la tabla de consulta original. (Se trata de datos de transmisión, por lo que los números cambian con el tiempo y entre capturas de pantalla).

image:extracted-media\media\image51.png[https://grafana.com/static/img/docs/transformations/filter-name-table-before-7-0.png,width=624,height=178]

Aquí está la tabla después de que apliqué la transformación para eliminar el campo Mín.

image:extracted-media\media\image52.png[https://grafana.com/static/img/docs/transformations/filter-name-table-after-7-0.png,width=624,height=274]

Aquí está la misma consulta usando una visualización de Estadísticas.

image:extracted-media\media\image53.png[https://grafana.com/static/img/docs/transformations/filter-name-stat-after-7-0.png,width=624,height=248]

====== Filtrar datos por consulta

Utilice esta transformación en paneles que tengan varias consultas, si desea ocultar una o más de las consultas.

Grafana muestra las letras de identificación de la consulta en texto gris oscuro. Haga clic en un identificador de consulta para alternar el filtrado. Si la letra de la consulta es blanca, se muestran los resultados. Si la letra de consulta es oscura, los resultados están ocultos.

En el siguiente ejemplo, el panel tiene tres consultas (A, B, C). Eliminé la consulta B de la visualización.

image:extracted-media\media\image54.png[https://grafana.com/static/img/docs/transformations/filter-by-query-stat-example-7-0.png,width=624,height=227]

*Nota:* esta transformación no está disponible para Graphite porque esta fuente de datos no admite la correlación de datos devueltos con consultas.

====== Organizar campos

Utilice esta transformación para cambiar el nombre, reordenar u ocultar los campos devueltos por la consulta.

*Nota:* Esta transformación solo funciona en paneles con una única consulta. Si su panel tiene varias consultas, debe aplicar una transformación de Combinación externa o eliminar las consultas adicionales.

Grafana muestra una lista de campos devueltos por la consulta. Usted puede:

* Cambiar el orden de los campos colocando el cursor sobre un campo. El cursor se convierte en una mano y luego puede arrastrar el campo a su nuevo lugar.
* Ocultar o mostrar un campo haciendo clic en el icono de ojo junto al nombre del campo.
* Cambiar el nombre de los campos escribiendo un nuevo nombre en el cuadro *Cambiar nombre*.

En el siguiente ejemplo, oculté el campo de valor y renombré Máx. y Mín.

image:extracted-media\media\image55.png[https://grafana.com/static/img/docs/transformations/organize-fields-stat-example-7-0.png,width=624,height=299]

====== Unir por campo (unión externa)

Utilice esta transformación para unir varias series de tiempo a partir de un conjunto de resultados por campo.

Esta transformación es especialmente útil si desea combinar consultas para poder calcular los resultados de los campos.

En el siguiente ejemplo, tengo una consulta de plantilla que muestra datos de series de tiempo de varios servidores en una visualización de tabla. Solo puedo ver los resultados de una consulta a la vez.

image:extracted-media\media\image56.png[https://grafana.com/static/img/docs/transformations/join-fields-before-7-0.png,width=624,height=283]

Apliqué una transformación para unir los resultados de la consulta usando el campo de tiempo. Ahora puedo ejecutar cálculos, combinar y organizar los resultados en esta nueva tabla.

image:extracted-media\media\image57.png[https://grafana.com/static/img/docs/transformations/join-fields-after-7-0.png,width=624,height=323]

====== Agregar campo desde cálculo

Utilice esta transformación para agregar un nuevo campo calculado a partir de otros dos campos. Cada transformación le permite agregar un nuevo campo.

* *Modo:* seleccione un modo:
** *Reducir fila:* aplique el cálculo seleccionado en cada fila de campos seleccionados de forma independiente.
** *Opción binaria:* aplique operaciones matemáticas básicas (sumar, multiplicar, etc.) en valores en una sola fila de dos campos seleccionados.
* *Nombre de campo:* seleccione los nombres de los campos que desea utilizar en el cálculo del nuevo campo.
* *Cálculo:* si selecciona el modo *Reducir fila*, aparece el campo *Cálculo*. Haga clic en el campo para ver una lista de opciones de cálculo que puede utilizar para crear el nuevo campo. Para obtener información sobre los cálculos disponibles, consulte la Lista de cálculos.
* *Operación:* si selecciona el modo de *Opción binaria*, aparecen los campos *Operación*. Estos campos le permiten realizar operaciones matemáticas básicas con valores en una sola fila de dos campos seleccionados. También puede utilizar valores numéricos para operaciones binarias.
* *Alias:* (opcional) ingrese el nombre de su nuevo campo. Si lo deja en blanco, el nombre del campo coincidirá con el cálculo.
* *Reemplazar todos los campos:* (Opcional) Seleccione esta opción si desea ocultar todos los demás campos y mostrar solo el campo calculado en la visualización.

En el siguiente ejemplo, agregué dos campos juntos y los llamé Suma.

image:extracted-media\media\image58.png[https://grafana.com/static/img/docs/transformations/add-field-from-calc-stat-example-7-0.png,width=624,height=325]

====== Etiquetas a campos

Esta transformación cambia los resultados de las series de tiempo que incluyen etiquetas o chapas en una estructura de tabla donde cada etiqueta se convierte en su propio campo.

Dado un resultado de consulta de dos series de tiempo:

* Serie 1: etiquetas Servidor = Servidor A, Centro de datos = UE
* Serie 2: etiquetas Servidor = Servidor B, Centro de datos = UE

Esto daría como resultado una tabla como esta:

[cols=",,,",options="header",]
|===
|Tiempo |Servidor |Centro de Datos |Valor
|2020-07-07 11:34:20 |Servidor A |UE |1
|2020-07-07 11:34:20 |Servidor B |UE |2
|===

======= Nombre del campo de valor

Si seleccionó Servidor como el Nombre del campo valor, obtendría un campo por cada valor de la etiqueta Servidor.

[cols=",,,",options="header",]
|===
|Tiempo |Centro de Datos |Servidor A |Servidor B
|2020-07-07 11:34:20 |UE |1 |2
|===

======= Comportamiento de fusión

La transformación de etiquetas a campos es internamente dos transformaciones separadas. El primero actúa sobre series únicas y extrae etiquetas a los campos. El segundo es la transformación de fusión que une todos los resultados en una sola tabla. La transformación de fusión intenta unirse en todos los campos coincidentes. Este paso de combinación es obligatorio y no se puede desactivar.

Para ilustrar esto, aquí hay un ejemplo en el que tiene dos consultas que devuelven series de tiempo sin etiquetas superpuestas.

* Serie 1: etiquetas Server = ServidorA
* Serie 2: etiquetas Centro de datos = UE

Esto primero dará como resultado estas dos tablas:

[cols=",,",options="header",]
|===
|Tiempo |Servidor |Valor
|2020-07-07 11:34:20 |ServidorA |10
|===

[cols=",,",options="header",]
|===
|Tiempo |Centro de Datos |Valor
|2020-07-07 11:34:20 |UE |20
|===

Después de fusionar:

[cols=",,,",options="header",]
|===
|Tiempo |Servidor |Valor |Centro de Datos
|2020-07-07 11:34:20 |ServidorA |10 |
|2020-07-07 11:34:20 | |20 |UE
|===

====== Ordenar por

*Nota:* esta transformación está disponible en Grafana 7.4+.

Esta transformación ordenará cada cuadro por el campo configurado. Cuando se marca reverse, los valores regresarán en el orden opuesto.

====== Agrupar por

*Nota:* esta transformación está disponible en Grafana 7.2+.

Esta transformación agrupa los datos por un valor de campo (columna) especificado y procesa los cálculos en cada grupo. Haga clic para ver una lista de opciones de cálculo. Para obtener información sobre los cálculos disponibles, consulte la Lista de cálculos.

A continuación, se muestra un ejemplo de datos originales.

[cols=",,,",options="header",]
|===
|Tiempo |ID del Servidor |Temperatura de la CPU |Estado del Servidor
|2020-07-07 11:34:20 |servidor 1 |80 |Apagado
|2020-07-07 11:34:20 |servidor 3 |62 |OK
|2020-07-07 10:32:20 |servidor 2 |90 |Sobrecarga
|2020-07-07 10:31:22 |servidor 3 |55 |OK
|2020-07-07 09:30:57 |servidor 3 |62 |Reiniciando
|2020-07-07 09:30:05 |servidor 2 |88 |OK
|2020-07-07 09:28:06 |servidor 1 |80 |OK
|2020-07-07 09:25:05 |servidor 2 |88 |OK
|2020-07-07 09:23:07 |servidor 1 |86 |OK
|===

Esta transformación tiene dos pasos. Primero, especifica uno o varios campos para agrupar los datos. Esto agrupará todos los valores iguales de esos campos, como si los hubiera ordenado. Por ejemplo, si agrupamos por el campo ID de servidor, entonces agruparía los datos de esta manera:

[cols=",,,",options="header",]
|===
|Tiempo |ID del Servidor |Temperatura de la CPU |Estado del Servidor
|2020-07-07 11:34:20 |*servidor 1* |80 |Apagado
|2020-07-07 09:28:06 |*servidor 1* |80 |OK
|2020-07-07 09:23:07 |*servidor 1* |86 |OK
|2020-07-07 10:32:20 |servidor 2 |90 |Sobrecarga
|2020-07-07 09:30:05 |servidor 2 |88 |OK
|2020-07-07 09:25:05 |servidor 2 |88 |OK
|2020-07-07 11:34:20 |*servidor 3* |62 |OK
|2020-07-07 10:31:22 |*servidor 3* |55 |OK
|2020-07-07 09:30:57 |*servidor 3* |62 |Reinicio
|===

Todas las filas con el mismo valor de ID de servidor se agrupan.

Después de elegir el campo por el que desea agrupar sus datos, puede agregar varios cálculos en los otros campos y aplicar el cálculo a cada grupo de filas. Por ejemplo, podríamos querer calcular la temperatura promedio de la CPU para cada uno de esos servidores. Entonces, podemos agregar el cálculo _promedio_ aplicado en el campo de temperatura de la CPU para obtener lo siguiente:

[cols=",",options="header",]
|===
|ID del Servidor |Temperatura de la CPU (promedio)
|servidor 1 |82
|servidor 2 |88.6
|servidor 3 |59.6
|===

Y podemos agregar más de un cálculo. Por ejemplo:

* Para el campo Tiempo, podemos calcular el _Último_ valor, para saber cuándo se recibió el último punto de datos para cada servidor.
* Para el campo Estado del Servidor, podemos calcular el _Último_ valor para saber cuál es el último valor de estado para cada servidor.
* Para el campo Temperatura, también podemos calcular el _Último_ valor para saber cuál es la última temperatura monitoreada para cada servidor

Entonces obtendríamos:

[cols=",,,,",options="header",]
|===
|ID del Servidor |Temperatura de la CPU (promedio) |Temperatura de la CPU (última) |Hora (última) |Estado del Servidor (último)
|servidor 1 |82 |80 |2020-07-07 11:34:20 |Apagado
|servidor 2 |88.6 |90 |2020-07-07 10:32:20 |Sobrecarga
|servidor 3 |59.6 |62 |2020-07-07 11:34:20 |OK
|===

Esta transformación le permite extraer información clave de su serie temporal y mostrarla de manera conveniente.

====== Concatenar campos

*Nota:* esta transformación está disponible en Grafana 7.3+.

Esta transformación combina todos los campos de todos los cuadros en un resultado.

Considere:

Consulta A:

[cols=",",options="header",]
|===
|Temperatura |Tiempo de Actividad
|15.4 |1230233
|===

Consulta B:

[cols=",",options="header",]
|===
|AQI |Errores
|3.2 |5
|===

Después de concatenar los campos, el marco de datos sería:

[cols=",,,",options="header",]
|===
|Temperatura |Tiempo de Actividad |AQI |Errores
|15.4 |1230233 |3.2 |5
|===

====== Serie a filas

*Nota:* esta transformación está disponible en Grafana 7.1+.

Utilice esta transformación para combinar el resultado de varias consultas de datos de series de tiempo en un solo resultado. Esto es útil cuando se usa la visualización de tabla.

El resultado de esta transformación contendrá tres columnas: Tiempo, Métrica y Valor. La columna Métrica se agrega para que pueda ver fácilmente desde qué consulta se origina la métrica. Personalice este valor definiendo Etiqueta en la consulta de origen.

En el siguiente ejemplo, tenemos dos consultas que devuelven datos de series de tiempo. Se visualiza como dos tablas separadas antes de aplicar la transformación.

Consulta A:

[cols=",",options="header",]
|===
|Tiempo |Temperatura
|2020-07-07 11:34:20 |25
|2020-07-07 10:31:22 |22
|2020-07-07 09:30:05 |19
|===

Consulta B:

[cols=",",options="header",]
|===
|Tiempo |Humedad
|2020-07-07 11:34:20 |24
|2020-07-07 10:32:20 |29
|2020-07-07 09:30:57 |33
|===

Este es el resultado después de aplicar la transformación Serie a filas.

[cols=",,",options="header",]
|===
|Tiempo |Métrica |Valor
|2020-07-07 11:34:20 |Temperatura |25
|2020-07-07 11:34:20 |Humedad |22
|2020-07-07 10:32:20 |Humedad |29
|2020-07-07 10:31:22 |Temperatura |22
|2020-07-07 09:30:57 |Humedad |33
|2020-07-07 09:30:05 |Temperatura |19
|===

====== Filtrar datos por valor

*Nota:* esta transformación está disponible en Grafana 7.4+.

Esta transformación le permite filtrar sus datos directamente en Grafana y eliminar algunos puntos de datos del resultado de su consulta. Tiene la opción de incluir o excluir datos que coincidan con una o más condiciones que defina. Las condiciones se aplican en un campo seleccionado.

Esta transformación es muy útil si su fuente de datos no filtra de forma nativa por valores. También puede usar esto para restringir los valores que se mostrarán si está usando una consulta compartida.

Las condiciones disponibles para todos los campos son:

* *Regex:* coincide con una expresión regular
* *Is Null:* coincide si el valor es nulo
* *Is Not Null:* coincide si el valor no es nulo
* *Equal:* coincide si el valor es igual al valor especificado
* *Different:* coincide si el valor es diferente al valor especificado

Las condiciones disponibles para los campos numéricos son:

* *Greater:* coincide si el valor es mayor que el valor especificado
* *Lower:* coincide si el valor es inferior al valor especificado
* *Greater or equal:* coincide si el valor es mayor o igual
* *Lower or equal:* coincide si el valor es menor o igual
* *Range:* hace coincidir un rango entre un mínimo y un máximo especificado, incluyendo el mínimo y el máximo

Considere el siguiente conjunto de datos:

[cols=",,",options="header",]
|===
|Tiempo |Temperatura |Altitud
|2020-07-07 11:34:23 |32 |101
|2020-07-07 11:34:22 |28 |125
|2020-07-07 11:34:21 |26 |110
|2020-07-07 11:34:20 |23 |98
|2020-07-07 10:32:24 |31 |95
|2020-07-07 10:31:22 |20 |85
|2020-07-07 09:30:57 |19 |101
|===

Si *Incluye* los puntos de datos que tienen una temperatura inferior a 30 ° C, la configuración se verá de la siguiente manera:

* Tipo de filtro: incluye (Include)
* Condición: filas donde la Temperatura coincide por debajo de (Lower Than) 100

Y obtendrá el siguiente resultado, donde solo se incluyen las temperaturas inferiores a 30 ° C:

[cols=",,",options="header",]
|===
|Tiempo |Temperatura |Altitud
|2020-07-07 11:34:22 |28 |125
|2020-07-07 11:34:21 |26 |110
|2020-07-07 11:34:20 |23 |98
|2020-07-07 10:31:22 |20 |85
|2020-07-07 09:30:57 |19 |101
|===

Puede agregar más de una condición al filtro. Por ejemplo, es posible que desee incluir los datos solo si la altitud es superior a 100. Para hacerlo, agregue esa condición a la siguiente configuración:

* Tipo de filtro: incluye (Include) filas que coincidan con todas (Match All) las condiciones
* Condición 1: filas donde la Temperatura coincide por debajo de (Lower) 30
* Condición 2: filas en las que la Altitud coincide por encima de (Greater) 100

Cuando tiene más de una condición, puede elegir si desea que la acción (incluir / excluir) se aplique en filas que *Coincidan con todos* (*Match all*) las condiciones o que *Coincidan* *con cualquiera* (*Match any*) de las condiciones que agregó.

En el ejemplo anterior, elegimos *Coincidir con todos* (*Match all*) porque queríamos incluir las filas que tienen una temperatura inferior a 30 _Y_ una altitud superior a 100. Si quisiéramos incluir las filas que tienen una temperatura inferior a 30 _O_ una altitud superior a 100 en su lugar, entonces seleccionaríamos *Coincidir* *con cualquiera* (*Match any*). Esto incluiría la primera fila en los datos originales, que tiene una temperatura de 32 ° C (no coincide con la primera condición) pero una altitud de 101 (que coincide con la segunda condición), por lo que está incluida.

Las condiciones que no son válidas o están configuradas de forma incompleta se ignoran.

====== Cambiar el nombre por expresiones regulares

*Nota:* esta transformación está disponible en Grafana 7.4+.

Utilice esta transformación para cambiar el nombre de partes de los resultados de consulta utilizando una expresión regular y un patrón de reemplazo.

Puede especificar una expresión regular, que solo se aplica a las coincidencias, junto con un patrón de reemplazo que admita referencias anteriores. Por ejemplo, imaginemos que está visualizando el uso de CPU por host y desea eliminar el nombre de dominio. Puede establecer la expresión regular en ([^\.]+)\..+ y el patrón de reemplazo en $1, web-01.example.com se convertiría en web-01.

En el siguiente ejemplo, eliminamos el prefijo de los tipos de eventos. En la imagen anterior, puede ver que todo tiene el prefijo system.

image:extracted-media\media\image59.png[https://grafana.com/static/img/docs/transformations/rename-by-regex-before-7-3.png,width=624,height=133]

Con la transformación aplicada, puede ver que nos queda solo el resto de la cadena.

image:extracted-media\media\image60.png[https://grafana.com/static/img/docs/transformations/rename-by-regex-after-7-3.png,width=624,height=244]

=== Compartir los resultados de la consulta

==== Compartir los resultados de la consulta entre paneles

Grafana le permite usar el resultado de la consulta de un panel para cualquier otro panel en el tablero. Compartir los resultados de las consultas entre paneles reduce la cantidad de consultas realizadas a su fuente de datos, lo que puede mejorar el rendimiento de su tablero.

La fuente de datos del Tablero le permite seleccionar un panel en su tablero que contiene las consultas para las que desea compartir los resultados. En lugar de enviar una consulta separada para cada panel, Grafana envía una consulta y otros paneles utilizan los resultados de la consulta para construir visualizaciones.

Esta estrategia puede reducir drásticamente la cantidad de consultas que se realizan cuando, por ejemplo, tiene varios paneles que visualizan los mismos datos.

Para compartir consultas de fuentes de datos con otro panel:

[arabic]
. Cree un tablero.
. Agregue un panel al tablero.
. Cambie el título a "Panel fuente". Utilizará este panel como fuente para los otros paneles. Defina la consulta o consultas que se compartirán. Si no tiene una fuente de datos disponible en este momento, puede usar la fuente de datos de *Grafana*, que devuelve una serie de tiempo aleatoria que puede usar para realizar pruebas.
. Agregue un segundo panel y seleccione la fuente de datos del *Tablero* en el editor de consultas.
. En la lista *Usar resultados de panel*, seleccione el primer panel que creó.

Todas las consultas definidas en el panel de origen ahora están disponibles para el nuevo panel. Las consultas realizadas en el panel de origen se pueden compartir con varios paneles.

Puede hacer clic en cualquiera de las consultas para ir al panel donde están definidas.

=== Inspeccionar un panel

==== Inspeccionar un panel

*Nota:* esta documentación se refiere a una función que solo está disponible en Grafana 7.0+.

El inspector de paneles lo ayuda a comprender y solucionar problemas de sus paneles. Puede inspeccionar los datos sin procesar de cualquier panel de Grafana, exportar esos datos a un archivo de valores separados por comas (CSV), ver solicitudes de consulta y exportar paneles y datos JSON.

===== Interfaz de usuario del inspector de paneles

El inspector del panel muestra Inspeccionar: en la parte superior del panel. Haga clic en la flecha de la esquina superior derecha para expandir o reducir el panel.

El inspector del panel consta de cuatro pestañas:

* *Pestaña Datos:* muestra los datos sin procesar devueltos por la consulta con las transformaciones aplicadas. Las opciones de campo, como anulaciones y asignaciones de valores, no se aplican de forma predeterminada.
* *Pestaña Estadísticas:* muestra cuánto tiempo tarda la consulta y cuánto devuelve.
* *Pestaña JSON:* le permite ver y copiar el JSON del panel, el JSON de datos del panel y el JSON de estructura del marco de datos. Esto es útil si está aprovisionando o administrando Grafana.
* *Pestaña Consulta:* muestra las solicitudes enviadas al servidor cuando Grafana consulta la fuente de datos.

*Nota:* No todos los tipos de paneles incluyen las cuatro pestañas. Por ejemplo, los paneles de lista del tablero no tienen datos sin procesar para inspeccionar, por lo que no muestran las pestañas Estadísticas, Datos o Consulta.

===== Tareas del inspector de paneles

Las tareas que puede realizar en el inspector de paneles se describen a continuación.

====== Abra el inspector del panel

Puede inspeccionar cualquier panel que pueda ver.

[arabic]
. En Grafana, navegue hasta el tablero que contiene el panel que desea inspeccionar.
. Haga clic en el título del panel que desea inspeccionar y luego haga clic en *Inspeccionar*. O bien, coloque el cursor sobre el título del panel y luego presione *i*.

El panel del inspector del panel se abre en el lado derecho de la pantalla.

====== Inspeccionar los resultados de la consulta sin procesar

Vea los resultados de la consulta sin procesar en una tabla. Estos son los datos devueltos por la consulta con las transformaciones aplicadas y antes de que el panel aplique opciones de campo o anulaciones de opciones de campo.

[arabic]
. {blank}
+
____
Abra el inspector del panel y luego haga clic en la pestaña *Datos* o en el menú del panel haga clic en *Inspeccionar > Datos*.
____
. {blank}
+
____
Si su panel contiene múltiples consultas o consultas múltiples nodos, entonces tiene opciones adicionales.
____

* {blank}
+
____
*Seleccionar resultado:* elija qué datos del conjunto de resultados desea ver.
____
* {blank}
+
____
*Transformar datos*
____
** {blank}
+
____
*Únir por tiempo:* vea los datos sin procesar de todas sus consultas a la vez, un conjunto de resultados por columna. Haga clic en el encabezado de una columna para reordenar los datos.
____

____
Vea los resultados de la consulta sin procesar en una tabla con opciones de campo y anulaciones de opciones aplicadas:
____

[arabic]
. {blank}
+
____
Abra la pestaña *Datos* en el inspector de paneles.
____
. {blank}
+
____
Haga clic en *Opciones de visualización de datos* encima de la tabla.
____
. {blank}
+
____
Haga clic en el botón de alternancia *Aplicar configuración de campo*.
____

====== Descargar resultados de consultas sin procesar como CSV

Grafana genera un archivo CSV en la ubicación de descarga predeterminada de su navegador. Puede abrirlo en el visor de su elección.

[arabic]
. Abra el inspector de paneles.
. Inspeccione los resultados de la consulta sin procesar como se describe arriba. Ajuste la configuración hasta que vea los datos sin procesar que desea exportar.
. Haga clic en *Descargar CSV*.

Para descargar un archivo CSV específicamente formateado para Excel, expanda el panel de *Opciones de datos* y habilite la opción *Descargar para Excel* antes de hacer clic en *Descargar CSV*.

====== Inspeccionar el rendimiento de las consultas

La pestaña Estadísticas muestra estadísticas que le indican cuánto tiempo tarda su consulta, cuántas consultas envía y la cantidad de filas devueltas. Esta información puede ayudarlo a solucionar problemas con sus consultas, especialmente si alguno de los números es inesperadamente alto o bajo.

[arabic]
. Abra el inspector de paneles.
. Navega a la pestaña Estadísticas.

Las estadísticas se muestran en formato de solo lectura.

====== Ver modelo JSON del panel

Explore y exporte paneles, datos de panel y modelos JSON de marco de datos.

[arabic]
. {blank}
+
____
Abra el inspector del panel y luego haga clic en la pestaña *JSON* o en el menú del panel haga clic en *Inspeccionar > Panel JSON*.
____
. {blank}
+
____
En Seleccionar fuente, elija una de las siguientes opciones:
____
* {blank}
+
____
*Panel JSON:* muestra un objeto JSON que representa el panel.
____
* {blank}
+
____
*Datos del panel:* muestra un objeto JSON que representa los datos que se pasaron al panel.
____
* {blank}
+
____
*Estructura de DataFrame*: muestra el conjunto de resultados sin procesar con las transformaciones, la configuración de campo y la configuración de anulaciones aplicadas.
____
. {blank}
+
____
Puede expandir o contraer partes del JSON para explorarlo, o puede hacer clic en *Copiar al portapapeles y* pegar el JSON en otra aplicación.
____

====== Ver solicitud y respuesta sin procesar a la fuente de datos

[arabic]
. Abra el inspector del panel y luego haga clic en la pestaña *Consulta* o, en el menú del panel, haga clic en *Inspeccionar > Consulta*.
. Haga clic en *Actualizar*.

Grafana envía una consulta al servidor para recopilar información y luego muestra el resultado. Ahora puede profundizar en partes específicas de la consulta, expandirla o contraerla, o copiar los datos al portapapeles para usarlos en otras aplicaciones.

=== Opciones de campo y anulaciones

==== Opciones de campo y anulaciones

Esta sección explica qué son las opciones de campo y las anulaciones de campo en Grafana y cómo usarlas. También incluye ejemplos si necesita una idea de cómo esta función podría ser útil en el mundo real.

El modelo de datos utilizado en Grafana, el marco de datos, es una estructura de tabla orientada a columnas que unifica tanto las series de tiempo como los resultados de las consultas de tabla. Cada columna dentro de esta estructura se llama _campo_. Un campo puede representar una sola serie temporal o una columna de tabla.

Las opciones de campo le permiten cambiar cómo se muestran los datos en sus visualizaciones. Las opciones y anulaciones que aplica no cambian los datos, cambian la forma en que Grafana muestra los datos.

===== Opciones de campo

Las _opciones de campo_, tanto estándar como personalizadas, se pueden encontrar en la pestaña Campo en el editor de paneles. Los cambios en esta pestaña se aplican a todos los campos (es decir, series/columnas). Por ejemplo, si cambia la unidad a porcentaje, todos los campos con valores numéricos se muestran en porcentajes. Aprenda a aplicar una opción de campo en Configurar todos los campos.

===== Anulaciones de campo

Las _anulaciones de campo_ se pueden agregar en la pestaña Anulaciones en el editor de paneles. Allí puede agregar las mismas opciones que encuentra en la pestaña Campo, pero solo se aplican a campos específicos. Obtenga información sobre cómo aplicar una anulación en Configurar campos específicos.

===== Opciones de campo disponibles y anulaciones

Los tipos de opciones de campo son comunes tanto a las opciones de campo como a las anulaciones de campo. La única diferencia es si el cambio se aplicará a todos los campos (se aplicará en la pestaña Campo) o a un subconjunto de campos (se aplicará en la pestaña Anulaciones).

[arabic]
. Las opciones de campo estándar se aplican a todas las visualizaciones de panel que permiten transformaciones.
. Opciones de campo de tabla, que solo se aplican a visualizaciones de tabla.

===== Ejemplos

A continuación, se muestran algunos ejemplos de cómo puede utilizar esta función:

* Ejemplo de opción de campo
* Ejemplo de anulación de campo

==== Configurar todos los campos

===== Configurar todos los campos

Para cambiar la forma en que todos los campos muestran los datos, puede cambiar una opción en la pestaña Campo. En la pestaña Anulaciones, puede anular las opciones de campo para campos específicos.

Por ejemplo, puede cambiar el número de lugares decimales que se muestran en todos los campos cambiando la opción *Decimales*. Para obtener más información sobre las opciones, consulte:

* Opciones de campo estándar, se aplican a todas las visualizaciones que permiten transformaciones.
* Opciones de campo de tabla, que solo se aplican a visualizaciones de panel de tabla.

====== Cambiar una opción de campo

Puede cambiar tantas opciones como desee.

[arabic]
. Navegue hasta el panel que desea editar, haga clic en el título del panel y luego haga clic en *Editar*.
. Haga clic en la pestaña *Campo*.
. Busque la opción que desea cambiar. Puede definir:

* {blank}
+
____
Opciones de campo estándar, que se aplican a todas las visualizaciones de panel que permiten transformaciones.
____
* {blank}
+
____
Opciones de campo de tabla, que solo se aplican a visualizaciones de panel de tabla.
____

[arabic, start=4]
. Agregue opciones agregando valores en los campos. Para devolver las opciones a los valores predeterminados, elimine el texto blanco en los campos.
. Cuando termine, haga clic en *Guardar* para guardar todas las ediciones del panel en el tablero.

====== Ejemplo de opción de campo

Supongamos que nuestro conjunto de resultados es un marco de datos que consta de dos campos: tiempo y temperatura.

[cols=",",options="header",]
|===
|tiempo |temperatura
|2020-01-02 03:04:00 |45.0
|2020-01-02 03:05:00 |47.0
|2020-01-02 03:06:00 |48.0
|===

Cada campo (columna) de esta estructura puede tener aplicadas opciones de campo que alteran la forma en que se muestran sus valores. Esto significa que puede, por ejemplo, establecer la Unidad en Temperatura > Celsius, lo que da como resultado la siguiente tabla:

[cols=",",options="header",]
|===
|tiempo |temperatura
|2020-01-02 03:04:00 |45.0 ° C
|2020-01-02 03:05:00 |47.0 ° C
|2020-01-02 03:06:00 |48.0 ° C
|===

Mientras estamos en eso, el lugar decimal no agrega nada a esta pantalla. Puede cambiar los decimales de auto a cero (0), lo que da como resultado la siguiente tabla:

[cols=",",options="header",]
|===
|tiempo |temperatura
|2020-01-02 03:04:00 |45 ° C
|2020-01-02 03:05:00 |47 ° C
|2020-01-02 03:06:00 |48 ° C
|===

==== Configurar campos específicos

===== Configurar campos específicos

Las anulaciones le permiten cambiar la configuración de uno o más campos. Las opciones de campo para anulaciones son exactamente las mismas que las opciones de campo disponibles en una visualización en particular. La única diferencia es que usted elige a qué campos aplicarlos.

Por ejemplo, puede cambiar el número de posiciones decimales que se muestran en todos los campos numéricos o columnas cambiando la opción *Decimales* para los *Campos con un tipo* que coincida con *Numérico*. Para obtener más información sobre las opciones, consulte:

* Opciones de campo estándar, que se aplican a todas las visualizaciones de panel que permiten transformaciones.
* Opciones de campo de tabla, que solo se aplican a visualizaciones de panel de tabla.

====== Agregar una anulación de campo

Puede anular tantas opciones de campo como desee.

[arabic]
. Navegue hasta el panel que desea editar, haga clic en el título del panel y luego haga clic en *Editar*.
. Haga clic en la pestaña *Anulaciones*.
. Haga clic en *Agregar una anulación para*.
. Seleccione a qué campos se aplicará una regla de anulación:

* *Campos con nombre:* seleccione un campo de la lista de todos los campos disponibles. Las propiedades que agrega a una regla con este selector solo se aplican a este único campo.
* *Campos con expresión regular que coincida con el nombre:* especifique los campos para anularlos con una expresión regular. Las propiedades que agrega a una regla con este selector se aplican a todos los campos donde el nombre del campo coincide con la expresión regular.
* *Campos con tipo:* seleccione campos por tipo, como cadena, numérico, etc. Las propiedades que agrega a una regla con este selector se aplican a todos los campos que coinciden con el tipo seleccionado.
* *Campos devueltos por consulta:* seleccione todos los campos devueltos por una consulta específica, como A, B o C. Las propiedades que agregue a una regla con este selector se aplican a todos los campos devueltos por la consulta seleccionada.

[arabic, start=5]
. Haga clic en *Agregar propiedad de anulación*.
. Seleccione la opción de campo que desea aplicar.

* Opciones de campo estándar, que se aplican a todas las visualizaciones de panel que permiten transformaciones.
* Opciones de campo de tabla, que solo se aplican a visualizaciones de panel de tabla.

[arabic, start=7]
. Ingrese opciones agregando valores en los campos. Para devolver las opciones a los valores predeterminados, elimine el texto blanco en los campos.
. Continúe agregando anulaciones a este campo haciendo clic en *Agregar propiedad de anulación*, o puede hacer clic en *Agregar anulación* y seleccionar un campo diferente para agregar anulaciones.
. Cuando termine, haga clic en *Guardar* para guardar todas las ediciones del panel en el tablero.

====== Eliminar una anulación de campo

[arabic]
. Navegue hasta la pestaña Anulaciones que contiene la anulación que desea eliminar.
. Haga clic en el icono de la papelera junto a la anulación.

====== Ejemplo de anulación de campo

Supongamos que nuestro conjunto de resultados es un marco de datos que consta de cuatro campos: tiempo, temperatura alta, temperatura baja y humedad.

[cols=",,,",options="header",]
|===
|Tiempo |temperatura alta |temperatura baja |humedad
|2020-01-02 03:04:00 |45.0 |30.0 |67
|2020-01-02 03:05:00 |47.0 |34.0 |68
|2020-01-02 03:06:00 |48.0 |31.0 |68
|===

Apliquemos las opciones de campo del ejemplo de opción de campo para aplicar la unidad Celsius y eliminar el lugar decimal. Esto da como resultado la siguiente tabla:

[cols=",,,",options="header",]
|===
|tiempo |temperatura alta |temperatura baja |humedad
|2020-01-02 03:04:00 |45 ° C |30 ° C |67 ° C
|2020-01-02 03:05:00 |47 ° C |34 ° C |68 ° C
|2020-01-02 03:06:00 |48 ° C |31 ° C |68 ° C
|===

Los campos de temperatura se ven bien, pero la humedad no tiene sentido. Podemos solucionar esto aplicando una anulación de la opción de campo al campo de humedad y cambiando la unidad a Misc > porcentaje (0-100). Esto da como resultado una tabla que tiene mucho más sentido:

[cols=",,,",options="header",]
|===
|tiempo |temperatura alta |temperatura baja |humedad
|2020-01-02 03:04:00 |45 ° C |30 ° C |67%
|2020-01-02 03:05:00 |47 ° C |34 ° C |68%
|2020-01-02 03:06:00 |48 ° C |31 ° C |68%
|===

==== Opciones de campo estándar

===== Opciones de campo estándar

Esta sección explica todas las opciones de campo disponibles. Se enumeran en orden alfabético.

Puede aplicar opciones de campo estándar a la mayoría de los paneles integrados de Grafana. Algunos paneles antiguos y paneles comunitarios que no se han actualizado al nuevo modelo de datos y panel perderán todas o algunas de estas opciones de campo.

La mayoría de las opciones de campo no afectarán la visualización hasta que haga clic fuera del cuadro de opción de campo que está editando o presione Entrar.

Para obtener más información sobre cómo aplicar estas opciones, consulte:

* Configurar todos los campos
* Configurar campos específicos

*Nota:* Trabajamos constantemente para agregar y expandir opciones para todas las visualizaciones, por lo que es posible que no todas las opciones estén disponibles para todas las visualizaciones.

====== Decimales

Número de decimales para representar el valor. Déjelo en blanco para que Grafana use el número de decimales proporcionado por la fuente de datos.

Para cambiar esta configuración, escriba un número en el campo y luego haga clic fuera del campo o presione Entrar.

====== Enlaces de datos

Le permite controlar la URL a la que se vincula un valor o visualización.

Para obtener más información e instrucciones, consulte Enlaces de datos.

====== Nombre para mostrar

Le permite establecer el título de visualización de todos los campos. Puede utilizar variables en el título del campo.

Cuando se muestran múltiples estadísticas, campos o series, este campo controla el título en cada estadística. Puede usar expresiones como $\{__field.name} para usar solo el nombre de la serie o el nombre del campo en el título.

Dado un campo con un nombre de Temp y etiquetas de \{“Loc”=“PBI”, “Sensor”=“3”}

[cols=",,,",options="header",]
|===
|Expresión de la sintaxis |Ejemplo |Muestra |Explicación
|$\{__field.displayName} |Igual que la sintaxis |Temp \{Loc="PBI", Sensor="3"} |Muestra el nombre del campo y las etiquetas en \{} si están presentes. Si solo hay una clave de etiqueta en la respuesta, entonces, para la parte de la etiqueta, Grafana muestra el valor de la etiqueta sin las llaves adjuntas.
|$\{__field.name} |Igual que la sintaxis |Temp |Muestra el nombre del campo (sin etiquetas).
|$\{__field.labels} |Igual que la sintaxis |Loc="PBI", Sensor="3" |Muestra las etiquetas sin el nombre.
|$\{__field.labels.X} |$\{__field.labels.Loc} |PBI |Muestra el valor de la clave de etiqueta especificada.
|$\{__field.labels.__values} |Igual que la sintaxis |PBI, 3 |Muestra los valores de las etiquetas separados por una coma (sin claves de etiqueta).
|===

Si el valor es una cadena vacía después de representar la expresión para un campo en particular, se usa el método de visualización predeterminado.

====== Max

Le permite establecer el valor máximo utilizado en los cálculos de umbral de porcentaje. Déjelo en blanco para el cálculo automático basado en todas las series y campos

====== Min

Le permite establecer el valor mínimo utilizado en los cálculos de umbral de porcentaje. Déjelo en blanco para el cálculo automático basado en todas las series y campos

====== Sin valor

Ingrese lo que Grafana debe mostrar si el valor del campo está vacío o es nulo.

====== Unidad

Le permite elegir qué unidad debe usar un campo. Haga clic en el campo *Unidad*, luego profundice hasta encontrar la unidad que desea. La unidad que seleccione se aplica a todos los campos excepto al tiempo.

======= Unidades personalizadas

Puede utilizar el menú desplegable de unidades para especificar también unidades personalizadas, prefijos o sufijos personalizados y formatos de fecha y hora.

Para seleccionar una unidad personalizada ingrese la unidad y seleccione la última opción Custom: xxx en el menú desplegable.

* suffix:<suffix> para la unidad personalizada que debe ir después del valor.
* time:<format> Para formatos de fecha y hora personalizados, escriba, por ejemplo, time:YYYY-MM-DD. Consulte formatos para ver la sintaxis y las opciones del formato.
* si:<base scale><unit characters> para unidades SI personalizadas. Por ejemplo: si: mF. Este es un poco más avanzado, ya que puede especificar tanto una unidad como la escala de datos de origen. Entonces, si sus datos de origen se representan como mili (miles de) algo, anteponga la unidad con ese carácter de escala SI.
* count:<unit> para una unidad de conteo personalizada.
* currency:<unit> para personalizar una unidad monetaria.

También puede pegar un emoji nativo en el selector de unidades y seleccionarlo como una unidad personalizada:

image:extracted-media\media\image61.png[Custom unit emoji,width=389,height=403]

======= Unidades de cuerda

En ocasiones, Grafana puede ser demasiado agresivo al analizar cadenas y mostrarlas como números. Para hacer que Grafana muestre la cadena original, cree una anulación de campo y agregue una propiedad de unidad con la unidad de string.

====== Esquema de colores

*Nota:* solo disponible en Grafana 7.3+.

image:extracted-media\media\image62.png[Color scheme,width=624,height=584]

La opción de combinación de colores define cómo Grafana colorea series o campos. Aquí hay varios modos que funcionan de manera muy diferente y su utilidad depende en gran medida de la visualización que haya seleccionado actualmente.

*Color por valor* Además de derivar el color de los umbrales, también existen esquemas de color continuos (degradados). Útil para visualizaciones que colorean valores individuales. Por ejemplo, los paneles de estadísticas y el panel de la tabla. Los modos de color continuo utilizan el porcentaje de un valor relativo al mínimo y al máximo para interpolar un color.

[cols=",",options="header",]
|===
|Modo de color |Descripción
|*Un solo color* |Especifique un solo color, útil en una regla de anulación
|*Desde umbrales* |Informa a Grafana para que tome el color del umbral de coincidencia
|*Paleta clásica* |Grafana asignará color buscando un color en una paleta por índice de serie. Útil para gráficos y gráficos circulares y otras visualizaciones de datos categóricos
|*Verde-Amarillo-Rojo (por valor)* |Esquema de color continuo
|*Azul-Amarillo-Rojo (por valor)* |Esquema de color continuo
|*Azules (por valor)* |Esquema de color continuo (fondo del panel a azul)
|*Rojos (por valor)* |Esquema de color continuo (color de fondo del panel a azul)
|*Verdes (por valor)* |Esquema de color continuo (color de fondo del panel a azul)
|*Púrpura (por valor)* |Esquema de color continuo (color de fondo del panel a azul)
|===

====== Umbrales

Los umbrales le permiten cambiar el color de un campo según el valor.

Para obtener más información e instrucciones, consulte Umbrales.

====== Mapeo de valor

Le permite establecer reglas que traduzcan un valor de campo o rango de valores en texto explícito. Puede agregar más de un mapeo de valores.

* *Tipo de asignación:* haga clic en una opción.
** *Valor:* ingrese un valor. Si el valor del campo es mayor o igual que el valor, se muestra el *Texto*.
** *Desde* y *Hasta:* ingrese un rango. Si el valor del campo está entre los valores del rango o es igual a ellos, se muestra el *Texto*.
* *Texto:* texto que se muestra si se cumplen las condiciones en un campo. Este campo acepta variables.

=== Visualizaciones

==== Visualizaciones

Grafana ofrece una variedad de visualizaciones para adaptarse a diferentes casos de uso. Esta sección de la documentación enumera las diferentes visualizaciones disponibles en Grafana y sus configuraciones de visualización únicas.

Las opciones predeterminadas y sus opciones de visualización únicas se describen en las páginas de esta sección.

Puede agregar más tipos de paneles con complementos.

==== Opciones de leyenda del panel

===== Leyenda

Utilice la leyenda para ajustar cómo muestra una visualización la serie. Esta funcionalidad de leyenda solo se aplica a algunos paneles ahora, pero eventualmente será común a todas las visualizaciones.

Este tema se aplica actualmente a las siguientes visualizaciones:

* Panel de gráfico circular
* Panel de series de tiempo

====== Alternar serie

Para alternar una serie: Haga clic en la etiqueta de la serie en la leyenda para aislar la serie en la visualización. Todas las demás series están ocultas en la visualización. Los datos de la serie oculta todavía son accesibles.

Use Cmd/Ctrl+clic en la etiqueta de la serie para ocultar la serie aislada y quitar la palanca.

*Nota:* esta opción es persistente cuando guarda el tablero.

image:extracted-media\media\image63.png[Toggle series visibility,width=624,height=282]

Esto crea una anulación del sistema que oculta las otras series. Puede ver esta anulación en la pestaña Anulaciones. Si elimina la anulación, se quita la alternancia.

image:extracted-media\media\image64.png[Series toggle override example,width=600,height=208]

====== Cambiar el color de la serie

Haga clic en el icono de la serie (línea de color al lado de la etiqueta de la serie) en la leyenda para cambiar el color de la serie seleccionada.

image:extracted-media\media\image65.png[Change legend series color,width=624,height=249]

==== Panel de lista de alertas

===== Panel de lista de alertas

El Panel de la lista de alertas le permite mostrar las alertas de su tablero. Puede configurar la lista para mostrar el estado actual o los cambios de estado recientes. Puede leer más acerca de las alertas en Descripción general de las alertas.

image:extracted-media\media\image66.png[https://grafana.com/static/img/docs/v45/alert-list-panel.png,width=624,height=147]

Utilice esta configuración para refinar su visualización.

====== Opciones

* *Mostrar:* elija si el panel debe mostrar el estado de alerta actual o los cambios de estado de alerta recientes.
* *Elementos máximos:* establece el número máximo de alertas para listar.
* *Orden de clasificación:* seleccione cómo ordenar las alertas mostradas:
** *Alfabético (asc):* orden alfabético.
** *Alfabético (desc):* orden alfabético inverso.
** *Importancia:* por importancia de acuerdo con los siguientes valores, siendo 1 el más alto:
*** alertando: 1
*** no_data: 2
*** pendiente: 3
*** ok: 4
*** en pausa: 5
* *Alertas de este tablero:* muestra alertas solo del tablero en el que se encuentra la lista de alertas.

====== Filtrar

Estas opciones le permiten limitar las alertas que se muestran solo a aquellas que coinciden con la consulta, carpeta o etiquetas que elija.

* *Nombre de alerta:* ingrese una consulta de nombre de alerta.
* *Título del tablero:* ingrese una consulta de título del tablero.
* *Carpeta:* seleccione una carpeta. Solo se mostrarán las alertas de los tableros de la carpeta seleccionada.
* *Etiquetas del panel:* seleccione una o más etiquetas. Solo se mostrarán las alertas de los tableros con una o más de las etiquetas.

====== Filtro de estado

Elija qué estados de alerta mostrar en este panel.

* OK
* Pausado
* Sin datos
* Error de ejecución
* Alertando
* Pendiente

==== Panel de indicador de barra

===== Panel de indicador de barra

El indicador de barra simplifica sus datos al reducir cada campo a un solo valor. Usted elige cómo Grafana calcula la reducción.

Este panel puede mostrar uno o más medidores de barra dependiendo de cuántas series, filas o columnas devuelva su consulta.

image:extracted-media\media\image67.png[Stat panel,width=624,height=218]

====== Opciones de campo y datos

Las visualizaciones de barras le permiten aplicar:

* Transformaciones de datos
* Opciones de campo y anulaciones
* Umbrales

====== Opciones de pantalla

Utilice las siguientes opciones para refinar su visualización:

* *Mostrar:* elija cómo Grafana muestra sus datos.
** *Calcular:* muestra un valor calculado basado en todas las filas. Para obtener una lista de los cálculos disponibles, consulte Lista de cálculos.
** *Todos los valores:* muestra una estadística separada para cada fila. Si selecciona esta opción, también puede seleccionar un *Límite* o el número máximo de filas para mostrar.
* *Valor:* seleccione una función de reducción que Grafana utilizará para reducir muchos campos a un solo valor. Haga clic en la lista *Valor* para ver las funciones y descripciones breves.
* *Orientación:* elija una dirección de apilamiento.
** *Auto:* Grafana selecciona lo que cree que es la mejor orientación.
** *Horizontal:* las barras se estiran horizontalmente, de izquierda a derecha.
** *Vertical:* las barras se estiran verticalmente, de arriba hacia abajo.
* *Modo de visualización:* elija un modo de visualización.
** *Gradiente:* los niveles de umbral definen un gradiente.
** *LCD retro:* el medidor se divide en pequeñas celdas que están encendidas o apagadas.
** *Básico:* color único basado en el umbral de coincidencia.
* *Mostrar área sin relleno:* seleccione esta opción si desea representar la región sin relleno de las barras en gris oscuro. No se aplica al modo de pantalla LCD retro.

==== Panel de lista de tableros

===== Panel de lista de tableros

El panel de lista de tableros le permite mostrar enlaces dinámicos a otros tableros. La lista se puede configurar para usar tableros marcados con estrellas, tableros visualizados recientemente, una consulta de búsqueda y etiquetas de panel.

image:extracted-media\media\image68.png[https://grafana.com/static/img/docs/v45/dashboard-list-panels.png,width=624,height=171]

En cada carga del tablero, este panel consulta la lista de tableros, proporcionando siempre los resultados más actualizados.

====== Opciones

Utilice estas opciones para refinar su visualización.

======= Opciones

* *Destacados:* muestra los tableros marcados con estrellas en orden alfabético.
* *Visualizados recientemente:* muestra los tableros visualizados recientemente en orden alfabético.
* *Búsqueda:* muestra tableros por consulta de búsqueda o etiquetas. Debe ingresar al menos un valor en *Consulta* o *Etiquetas*. Para los campos *Consulta* y *Etiquetas*. Se admite la interpolación de variables, por ejemplo, $my_var o $\{my_var}.
* *Mostrar encabezados:* la selección de la lista elegida (Destacados, Visto recientemente, Buscar) se muestra como un encabezado.
* *Elementos máximos:* establece el número máximo de elementos a listar por sección. Por ejemplo, si deja esto en el valor predeterminado de 10 y muestra los tableros Destacados y Vistos recientemente, el panel mostrará hasta 20 tableros en total, diez en cada sección.

======= Buscar

Estas opciones solo se aplican si se selecciona la opción *Buscar*.

* *Consulta:* ingrese la consulta por la que desea realizar la búsqueda. Las consultas no distinguen entre mayúsculas y minúsculas y se aceptan valores parciales.
* *Carpeta:* seleccione las carpetas del tablero que desea mostrar.
* *Etiquetas:* aquí es donde ingresa las etiquetas por las que desea buscar. Tenga en cuenta que las etiquetas existentes no aparecerán a medida que escribe y _distinguen_ entre mayúsculas y minúsculas.

*Nota:* Cuando aparecen varias etiquetas y cadenas, la lista de tableros muestra los que cumplen _todas_ las condiciones.

==== Panel de medidor

===== Panel de medidor

Indicador es un panel de valor único que puede repetir un indicador para cada serie, columna o fila.

image:extracted-media\media\image69.png[https://grafana.com/static/img/docs/v66/gauge_panel_cover.png,width=624,height=170]

====== Opciones de campo y datos

Las visualizaciones de medidores le permiten aplicar:

* Transformaciones de datos
* Opciones de campo y anulaciones
* Umbrales

====== Opciones de pantalla

Utilice las siguientes opciones para refinar su visualización:

* *Mostrar:* elija cómo Grafana muestra sus datos.
** *Calcular:* muestra un *Valor* calculado basado en todas las filas. Para obtener una lista de los cálculos disponibles, consulte Lista de cálculos.
** *Todos los valores:* muestra una estadística separada para cada fila. Si selecciona esta opción, también puede seleccionar un *Límite* o el número máximo de filas para mostrar.
* *Orientación:* elija una dirección de apilamiento.
** *Auto:* Grafana selecciona lo que cree que es la mejor orientación.
** *Horizontal:* las barras se estiran horizontalmente, de izquierda a derecha.
** *Vertical:* las barras se estiran verticalmente, de arriba hacia abajo.
* *Mostrar etiquetas de umbral:* controla si se muestran los valores de umbral.
* *Mostrar marcadores de umbral:* controla si se muestra una banda de umbral fuera de la banda de valor del medidor interior.

==== Panel gráfico

===== Panel gráfico

Esta visualización es la más utilizada en el ecosistema Grafana. Se puede representar como una línea, una ruta de puntos o una serie de barras. Este tipo de gráfico es lo suficientemente versátil como para mostrar casi cualquier dato de series de tiempo.

====== Opciones de campo y datos

Las visualizaciones de gráficos le permiten aplicar:

* Alertas: este es el único tipo de visualización que le permite configurar alertas.
* Transformaciones de datos
* Opciones de campo y anulaciones
* Umbrales

====== Opciones de pantalla

Utilice esta configuración para refinar su visualización.

* *Barras:* muestra los valores como un gráfico de barras.
* *Líneas:* muestra los valores como un gráfico de líneas.
* *Ancho de línea:* el ancho de la línea de una serie. (predeterminado 1).
* *Escalera:* dibuja puntos adyacentes como escalera.
* *Relleno de área:* cantidad de relleno de color para una serie. (predeterminado 1, 0 es ninguno)
* *Rellenar degradado:* grado de degradado en el relleno del área. (0 es sin gradiente, 10 es un gradiente pronunciado. El valor predeterminado es 0).
* *Puntos:* muestra puntos para valores.
* *Radio de punto:* controla el tamaño de los puntos.
* *Umbrales de alerta:* muestra los umbrales de alerta y las regiones en el panel.

======= Apilamiento y valor nulo

* *Pila:* cada serie se apila una encima de otra.
* *Porcentaje:* disponible cuando se selecciona *Pila*. Cada serie se extrae como un porcentaje del total de todas las series.
* *Valor nulo:* cómo se muestran los valores nulos. _Este es un escenario muy importante_. Vea la nota abajo.
** *conectado:* si hay un espacio en la serie, es decir, un valor o valores nulos, la línea saltará el espacio y se conectará al siguiente valor no nulo.
** *nulo:* (predeterminado) si hay un espacio en la serie, es decir, un valor nulo, la línea del gráfico se romperá y mostrará el espacio.
** *nulo como cero:* si hay un espacio en la serie, es decir, un valor nulo, se mostrará como un valor cero en el panel de gráficos.

*Nota:* Si está monitoreando la carga de la CPU de un servidor y la carga alcanza el 100%, entonces el servidor se bloqueará y el agente que envía las estadísticas no podrá recopilar la estadística de carga. Esto conduce a una brecha en las métricas y tener el valor predeterminado como nulo significa que Grafana mostrará las brechas e indicará que algo está mal. Si está configurado como conectado, sería fácil perder esta señal.

======= Información sobre herramientas flotante

Utilice esta configuración para cambiar la apariencia de la información sobre herramientas que aparece cuando pasa el cursor sobre la visualización del gráfico.

* *Modo*
** *Todas las series:* la información sobre herramientas flotante muestra todas las series en el gráfico. Grafana destaca la serie sobre la que se desplaza en negrita en la lista de series en la información sobre herramientas.
** *Único:* la información sobre herramientas flotante muestra solo una serie única, la que está sobre la que se desplaza en el gráfico.
* *Orden de clasificación:* ordena el orden de las series en la información sobre herramientas flotante si ha seleccionado el modo *Todas las series*. Cuando coloca el cursor sobre un gráfico, Grafana muestra los valores asociados con las líneas. Generalmente, los usuarios están más interesados ​​en los valores más altos o más bajos. Ordenar estos valores puede hacer que sea mucho más fácil encontrar los datos de interés.

* *Ninguno:* el orden de las series en la información sobre herramientas está determinado por el orden de clasificación de la consulta. Por ejemplo, podrían ordenarse alfabéticamente por nombre de serie.
* *Creciente:* las series en la información sobre herramientas flotantes se ordenan por valor y en orden creciente, con el valor más bajo en la parte superior de la lista.
* *Decreciente:* las series en la información sobre herramientas flotantes se ordenan por valor y en orden decreciente, con el valor más alto en la parte superior de la lista.

====== Anulaciones de series

Las anulaciones de series permiten que una serie en un panel de gráficos se represente de manera diferente a las demás. Puede personalizar las opciones de visualización en una base por serie o mediante el uso de reglas de expresiones regulares. Por ejemplo, una serie puede tener un ancho de línea más grueso para que se destaque o se mueva al eje Y derecho.

Puede agregar varias modificaciones de series.

======= Agregar una anulación de serie

[arabic]
. {blank}
+
____
Haga clic en *Agregar anulación de serie*.
____
. {blank}
+
____
En *Alias ​​o regex*, escriba o seleccione una serie. Haga clic en el campo para ver una lista de las series disponibles.
____

*Ejemplo:* /Network.*/ coincidiría con dos series denominadas Network out y Network in.

[arabic, start=3]
. {blank}
+
____
Haga clic en *+* y luego seleccione un estilo para aplicarlo a la serie. Puede agregar varios estilos a cada entrada.
____

* {blank}
+
____
*Barras:* muestra la serie como un gráfico de barras.
____
* {blank}
+
____
*Líneas:* muestra la serie como gráfico lineal.
____
* {blank}
+
____
*Relleno de línea:* muestra un gráfico de líneas con relleno de área.
____
* {blank}
+
____
*Gradiente de relleno:* cantidad de gradiente de relleno del área.
____
* {blank}
+
____
*Ancho de línea:* establezca el ancho de línea.
____
* {blank}
+
____
*Modo de punto nulo:* opción para ignorar los valores nulos o reemplazarlos por cero. Importante si desea ignorar las lagunas en sus datos.
____
* {blank}
+
____
*Rellenar a continuación para:* rellenar el área entre dos series.
____
* {blank}
+
____
*Línea de escalera:* muestra la serie como una línea de escalera.
____
* {blank}
+
____
*Guiones:* muestra la línea con guiones.
____
* {blank}
+
____
*Serie oculta:* oculta la serie.
____
* {blank}
+
____
*Longitud del guión:* longitud de la línea discontinua.
____
* {blank}
+
____
*Espacio de guión:* espacio entre líneas discontinuas.
____
* {blank}
+
____
*Puntos:* muestra las series como puntos separados.
____
* {blank}
+
____
*Radio de punto:* radio para el renderizado de puntos.
____
* {blank}
+
____
*Pila:* establece el grupo de pila para la serie.
____
* {blank}
+
____
*Color:* establece el color de la serie.
____
* {blank}
+
____
*Eje Y:* establece el eje Y de la serie.
____
* {blank}
+
____
*Índice Z:* establece el índice Z de la serie (orden de representación). Importante al superponer diferentes estilos (gráficos de barras, gráficos de áreas).
____
* {blank}
+
____
*Transformar:* transforma el valor en negativo para renderizar debajo del eje y.
____
* {blank}
+
____
*Leyenda:* controla si una serie se muestra en la leyenda.
____
* {blank}
+
____
*Ocultar en la información sobre herramientas:* controle si se muestra una serie en la información sobre herramientas del gráfico.
____

====== Ejes

Utilice estas opciones para controlar la pantalla de ejes en la visualización.

======= Y izquierdo/Y derecho

Las opciones son idénticas para ambos ejes Y.

* *Mostrar:* haga clic para mostrar u ocultar el eje.
* *Unidad:* la unidad de visualización del valor Y.
* *Escala:* la escala que se utilizará para el valor Y, lineal o logarítmico. (lineal predeterminado)
* *Y-Min:* el valor Y mínimo. (auto predeterminado)
* *Y-Max:* el valor Y máximo. (autopredeterminado)
* *Decimales:* define cuántos decimales se muestran para el valor Y. (auto predeterminado)
* *Etiqueta:* la etiqueta del eje Y. (defecto "")

======= Ejes Y

* *Alinear:* seleccione esta opción para alinear los ejes Y izquierdo y derecho por valor. (predeterminado sin marcar/falso)
* *Nivel:* disponible cuando se selecciona *Alinear*. Valor que se utilizará para la alineación de los ejes Y izquierdo y derecho, comenzando desde Y=0. (predeterminado 0)

======= Eje X

* {blank}
+
____
*Mostrar:* haga clic para mostrar u ocultar el eje.
____
* {blank}
+
____
*Modo:* el modo de visualización cambia completamente la visualización del panel de gráficos. Es como tres paneles en uno. El modo principal es el modo de serie temporal con el tiempo en el eje X. Los otros dos modos son un modo de gráfico de barras básico con series en el eje X en lugar de tiempo y un modo de histograma.
____
** {blank}
+
____
*Tiempo:* (predeterminado) El eje X representa el tiempo y los datos están agrupados por tiempo (por ejemplo, por hora o por minuto).
____
** {blank}
+
____
*Serie:* los datos se agrupan por series y no por tiempo. El eje Y todavía representa el valor.
____
** {blank}
+
____
*Valor:* el tipo de agregación que se utilizará para los valores. El valor predeterminado es total (sumando los valores).
____
** {blank}
+
____
*Histograma:* convierte el gráfico en un histograma. Un histograma es una especie de gráfico de barras que agrupa números en rangos, a menudo llamados cubos o contenedores. Las barras más altas muestran que más datos caen en ese rango.
____

____
Para obtener más información sobre histogramas, consulte Introducción a los histogramas y mapas de calor.
____

* {blank}
+
____
*Cubos*: la cantidad de cubos por los que agrupar los valores. Si se deja vacío, Grafana intenta calcular una cantidad adecuada de cubos.
____
* {blank}
+
____
*X-Min:* filtra los valores del histograma que están por debajo de este límite mínimo.
____
* {blank}
+
____
*X-Max:* filtra los valores que superan este límite máximo.
____

====== Leyenda

Utilice esta configuración para refinar cómo aparece la leyenda en su visualización.

======= Opciones

* *Mostrar:* desmarque para ocultar la leyenda. (por defecto marcado/verdadero)
* *Como tabla:* marque para mostrar la leyenda en la tabla. (por defecto marcado/verdadero)
* *A la derecha:* marque para mostrar la leyenda a la derecha.
* *Ancho:* disponible cuando se selecciona *A la derecha*. Introduzca el ancho mínimo de la leyenda en píxeles.

======= Valores

Se pueden mostrar valores adicionales junto a los nombres de las leyendas:

* *Min:* mínimo de todos los valores devueltos por la consulta de métricas.
* *Max:* máximo de todos los valores devueltos por la consulta de métricas.
* *Promedio:* promedio de todos los valores devueltos por la consulta de métricas.
* *Actual:* último valor devuelto por la consulta de métricas.
* *Total:* suma de todos los valores devueltos por la consulta de métricas.
* *Decimales:* controla cuántos decimales se muestran para los valores de leyenda y la información sobre herramientas flotante del gráfico.

Grafana calcula los valores de la leyenda en el lado del cliente y dependen del tipo de agregación o consolidación de puntos que utilice su consulta de métricas. Todos los valores de leyenda anteriores no pueden ser correctos al mismo tiempo.

Por ejemplo, si traza una tasa como solicitudes/segundo, probablemente esté usando el promedio como un agregador, entonces el Total en la leyenda no representará el número total de solicitudes. Es solo la suma de todos los puntos de datos recibidos por Grafana.

======= Ocultar serie

Ocultar series cuando todos los valores de una serie de una consulta de métricas tienen un valor específico.

* *Con solo nulos:* Valor nulo (predeterminado sin marcar)
* *Con solo ceros:* Valo =cero (predeterminado sin marcar)

======= Regiones de tiempo

Las regiones de tiempo le permiten resaltar ciertas regiones de tiempo del gráfico para que sea más fácil ver, por ejemplo, los fines de semana, el horario comercial y / o las horas libres. Todas las regiones horarias configuradas se refieren a la hora UTC.

==== Panel de mapa de calor

===== Panel de mapa de calor

La visualización del Panel mapa de calor le permite ver histogramas a lo largo del tiempo. Para obtener más información sobre histogramas, consulte Introducción a los histogramas y mapas de calor.

image:extracted-media\media\image70.jpeg[https://grafana.com/static/img/docs/v43/heatmap_panel_cover.jpg,width=624,height=62]

====== Opciones de ejes

Utilice esta configuración para ajustar cómo se muestran los ejes en su visualización.

======= Eje Y

* *Unidad:* la unidad de visualización para el valor del eje Y
* *Escala:* la escala que se utilizará para el valor del eje Y.
** *linear:* escala lineal.
** *log (base 2):* Escala logarítmica con base 2.
** *log (base 10):* Escala logarítmica con base 10.
** *log (base 32):* Escala logarítmica con base 32.
** *log (base 1024):* escala logarítmica con base 1024.
* *Y-Min:* el valor Y mínimo (auto predeterminado).
* *Y-Max:* el valor Y máximo (auto predeterminado).
* *Decimales:* número de decimales para representar los valores del eje Y (auto predeterminado).

======= Cubos

*Nota:* Si el formato de los datos son *Cubos de series temporales*, esta sección no estará disponible.

* *Cubos del eje Y:* número de cubos en el que se dividirá el eje Y.
* *Tamaño:* (solo visible si la *Escala* es lineal). Tamaño de cada cubo del eje Y. Esta opción tiene prioridad sobre los *Cubos del Eje Y*.
* *Factor de división:* (solo visible si la *Escala* es _logarítmica_ _(base 2)_ o superior). De forma predeterminada, Grafana divide los valores de Y por base logarítmica. Esta opción permite dividir cada cubo predeterminado en un número específico de cubos.
* *Cubos del eje X:* número de cubos en los que se dividirá el eje X.
* *Tamaño:* tamaño de cada cubo del eje X. Número o intervalo de tiempo (10s, 5m, 1h, etc.). Intervalos admitidos: ms, s, m, h, d, w, M, y. Esta opción tiene prioridad sobre los *Cubos del Eje X*.

======= Atado al cubo

Cuando el Formato de datos es Cubos de series temporales, la fuente de datos devuelve series con nombres que representan el límite del cubo. Pero según la fuente de datos, un límite puede ser superior o inferior. Esta opción permite ajustar un tipo de límite. Si se configura Auto, se elegirá una opción enlazada en función del tipo de fuente de datos de los paneles.

======= Tamaño del cubo

Grafana utiliza las opciones de tamaño y recuento de cubos para calcular el tamaño de cada celda en el mapa de calor. Puede definir el tamaño del cubo por recuento (el primer cuadro de entrada) o especificando un intervalo de tamaño. Para el eje Y, el intervalo de tamaño es solo un valor, pero para el cubo X puede especificar un intervalo de tiempo en la entrada Tamaño, por ejemplo, el rango de tiempo 1h. Esto hará que las celdas tengan 1 hora de ancho en el eje X.

======= Formato de datos

Elija una opción en la lista *Formato*.

* *Series temporales:* Grafana clasifica todos los valores de las series temporales. Los tamaños e intervalos de los cubos se establecen en las opciones de Cubos.
* *Cubos de series temporales:* cada serie temporal ya representa un depósito del eje Y. El nombre de la serie temporal (alias) debe ser un valor numérico que represente el intervalo superior o inferior del cubo. Grafana no clasifica, por lo que las opciones de tamaño del cubo están ocultas.

====== Opciones de pantalla

Utilice esta configuración para refinar su visualización.

======= Colores

El espectro de colores controla el mapeo entre el recuento de valores (en cada cubo) y el color asignado a cada cubo. El color más a la izquierda del espectro representa el recuento mínimo y el color del lado derecho representa el recuento máximo. Algunos esquemas de color se invierten automáticamente cuando se usa el tema de día.

También puede cambiar el modo de color a Opacidad. En este caso, el color no cambiará, pero la cantidad de opacidad cambiará con el recuento de cubos.

* *Modo*
** *opacidad:* valor del cubo representado por la opacidad de la celda. Celda opaca significa valor máximo.
*** *Color:* color base de la celda.
*** *Escala:* escala para asignar los valores del cubo a la opacidad.
**** *linear:* escala lineal. El valor del cubo se asigna linealmente a la opacidad.
**** *sqrt:* escala de potencia. Opacidad de celda calculada como valor ^ k, donde k es un valor de *Exponente* configurado. Si el exponente es menor que 1, obtendrás una escala logarítmica. Si el exponente es mayor que 1, obtendrás una escala exponencial. En el caso de 1, la escala será la misma que la lineal.
*** *Exponente:* valor del exponente, mayor que 0.
** *espectro:* valor del cubo representado por el color de la celda.
*** *Esquema:* si el modo es *espectro*, seleccione un esquema de color.

======= Escala de colores

De forma predeterminada, Grafana calcula los colores de las celdas en función de los valores mínimos y máximos de los cubos. Con Min y Max puede sobrescribir esos valores. Piense en un valor de cubo como un eje Z y Min y Max como Z-Min y Z-Max respectivamente.

* *Min:* valor mínimo que se utiliza para el cálculo del color de la celda. Si el valor del cubo es menor que Min, entonces se asigna al color "mínimo". El valor predeterminado es el valor mínimo de la serie.
* *Max:* valor máximo que se utiliza para el cálculo del color de la celda. Si el valor del depósito es mayor que Max, entonces se asigna al color "máximo". El valor predeterminado es el valor máximo de la serie.

======= Leyenda

Elija si desea mostrar la leyenda del mapa de calor en la visualización o no.

======= Cubos

* *Ocultar cero:* no dibuje celdas con valores cero.
* *Espacio:* espacio en píxeles entre celdas. El valor predeterminado es 1 píxel.
* *Redondo:* redondez de la celda en píxeles. El valor predeterminado es 0.

======= Información sobre herramientas

* *Mostrar información sobre herramientas:* muestra información sobre herramientas de mapa de calor.
* *Histograma:* muestra el histograma del eje Y en la información sobre herramientas. El histograma representa la distribución de los valores del cubo para la marca de tiempo específica.
* *Decimales:* número de decimales para representar el valor del cubo (auto predeterminado).

==== Panel de registros

===== Panel de registros

La visualización del panel de registros muestra líneas de registro de fuentes de datos que admiten registros, como Elastic, Influx y Loki. Normalmente, utilizaría este panel junto a un panel de gráficos para mostrar la salida del registro de un proceso relacionado.

*Nota:* El panel Registros solo está disponible en Grafana v6.4 +.

image:extracted-media\media\image71.png[https://grafana.com/static/img/docs/v64/logs-panel.png,width=624,height=208]

El panel de registros muestra el resultado de las consultas que se ingresaron en la pestaña Consulta. Los resultados de varias consultas se combinan y ordenan por tiempo. Puede desplazarse dentro del panel si la fuente de datos devuelve más líneas de las que se pueden mostrar a la vez.

Para limitar el número de líneas renderizadas, puede usar la configuración de *Puntos de datos máximos* en las *Opciones de consulta*. Si no se establece, la fuente de datos generalmente aplicará un límite predeterminado.

====== Nivel de registro

Para los registros donde se especifica una etiqueta de *nivel*, usamos el valor de la etiqueta para determinar el nivel del registro y actualizar el color en consecuencia. Si el registro no tiene una etiqueta de nivel especificada, analizamos el registro para averiguar si su contenido coincide con alguna de las expresiones admitidas (consulte a continuación para obtener más información). El nivel de registro siempre está determinado por la primera coincidencia. En caso de que Grafana no pueda determinar un nivel de registro, se visualizará con un nivel de registro *desconocido*. Consulte los niveles de registro admitidos y las asignaciones de abreviaturas y expresiones de nivel de registro.

======= Opciones de pantalla

Utilice esta configuración para refinar su visualización:

* *Tiempo:* muestra u oculta la columna de tiempo. Esta es la marca de tiempo asociada con la línea de registro según lo informado desde la fuente de datos.
* *Etiquetas únicas:* muestra u oculta la columna de etiquetas únicas, que muestra solo etiquetas no comunes.
* *Ajustar líneas:* alternar el ajuste de líneas.
* *Orden:* muestra los resultados en orden de tiempo descendente o ascendente. El valor predeterminado es *Descendente*, mostrando primero los registros más recientes. Configure en *Ascendente* para mostrar primero las líneas de registro más antiguas.

==== Panel de noticias

===== Panel de noticias

Este panel muestra una fuente RSS. De forma predeterminada, muestra artículos del blog de Grafana Labs.

Introduzca la URL de un RSS en el campo URL de la sección Visualización. Este tipo de panel no acepta otras consultas.

==== Panel de gráfico de nodo

===== Panel de gráfico de nodo

*Nota*: este panel se encuentra actualmente en fase beta. Espere cambios en versiones futuras.

El _Gráfico de nodo_ puede visualizar gráficos o redes dirigidos. Utiliza un diseño de fuerza dirigida para posicionar de manera efectiva los nodos de modo que pueda ayudar a mostrar mapas de infraestructura complejos, jerarquías o diagramas de ejecución.

image:extracted-media\media\image72.png[Node graph panel,width=624,height=331]

====== Requerimientos de datos

El Panel de gráficos de nodos requiere una forma específica de los datos para poder mostrar sus nodos y bordes. Esto significa que no todas las fuentes de datos o consultas se pueden visualizar en este panel. Si desea utilizar esto como desarrollador de fuentes de datos, consulte la sección sobre API de datos.

La visualización del Gráfico de nodos consta de _nodos_ y _bordes_.

* Un _nodo_ se muestra como un círculo. Un nodo puede representar una aplicación, un servicio o cualquier otra cosa que sea relevante desde la perspectiva de una aplicación.
* Un _borde_ se muestra como una línea que conecta dos nodos. La conexión puede ser una solicitud, una ejecución o alguna otra relación entre los dos nodos.

Tanto los nodos como los bordes pueden tener metadatos o estadísticas asociados. La fuente de datos define qué información y valores se muestran, por lo que diferentes fuentes de datos pueden mostrar diferentes tipos de valores o no mostrar algunos valores.

======= Nodos

*Nota:* En este momento, el gráfico de nodos solo puede mostrar 1500 nodos. Si se cruza este límite, aparecerá una advertencia en la esquina superior derecha.

Por lo general, los nodos muestran dos valores estadísticos dentro del nodo y dos identificadores justo debajo del nodo, generalmente el nombre y el tipo. Los nodos también pueden mostrar otro conjunto de valores como un círculo de color alrededor del nodo, con secciones de diferentes colores que representan diferentes valores que deben sumar 1.

Por ejemplo, puede tener el porcentaje de errores representado por la parte roja del círculo. Se pueden mostrar detalles adicionales en un menú contextual cuando se muestra al hacer clic en el nodo. También puede haber enlaces adicionales en el menú contextual que pueden apuntar a otras partes de Grafana o cualquier enlace externo.

image:extracted-media\media\image73.gif[Node graph navigation,width=624,height=415]

======= Bordes

Los bordes también pueden mostrar estadísticas cuando se desplaza sobre el borde. De manera similar a los nodos, puede abrir un menú contextual con detalles y enlaces adicionales haciendo clic en el borde.

La primera fuente de datos que admite esta visualización es la fuente de datos de Rayos X para su función de Mapa de servicio. Para obtener más información, consulte la documentación del complemento de Rayos X.

====== Navegando por el gráfico de nodos

Puede desplazarse y acercar o alejar el gráfico de nodos.

======= Desplazar

Puede desplazar la vista haciendo clic fuera de cualquier nodo o borde y arrastrando el mouse.

======= Acercar o alejar

Use los botones en la esquina superior izquierda o use la rueda del mouse, el panel táctil de desplazamiento, junto con la tecla Ctrl o Cmd para acercar o alejar.

====== API de datos

Esta visualización necesita una forma específica de los datos que se devolverán desde la fuente de datos para mostrarlos correctamente.

La fuente de datos debe devolver dos marcos de datos, uno para los nodos y otro para los bordes, y también debe establecer frame.meta.preferredVisualisationType = 'nodeGraph' en ambos marcos de datos.

======= Parámetros de nodo

Campos requeridos:

[cols=",,",options="header",]
|===
|Nombre de campo |Tipo |Descripción
|id |cadena |Identificador único del nodo. Se hace referencia a este ID por borde en su campo de origen y destino.
|===

Campos opcionales:

[cols=",,",options="header",]
|===
|Nombre de campo |Tipo |Descripción
|title |cadena |Nombre del nodo visible justo debajo del nodo.
|subTitle |cadena |Adicional, nombre, tipo u otro identificador que se mostrará justo debajo del título.
|mainStat |cadena/número |Primera estadística que se muestra dentro del propio nodo. Puede ser una cadena, en cuyo caso el valor se mostrará tal cual o puede ser un número, en cuyo caso también se mostrará cualquier unidad asociada con ese campo.
|secundarioStat |cadena/número |Igual que mainStat pero se muestra justo debajo de él dentro del nodo.
|arc__* |número |Cualquier campo con el prefijo arc__ se utilizará para crear el círculo de color alrededor del nodo. Todos los valores en estos campos deben sumar 1. Puede especificar el color usando config.color.fixedColor.
|detail__* |cadena/número |Cualquier campo con el prefijo detail__ se mostrará en el encabezado del menú contextual cuando se haga clic en el nodo. Utilice config.displayName para una etiqueta más legible por humanos.
|===

======= Parámetros de borde

Campos requeridos:

[cols=",,",options="header",]
|===
|Nombre de campo |Tipo |Descripción
|Id |cadena |Identificador único del borde.
|source |cadena |Id del nodo de origen.
|target |cadena |Id del objetivo.
|===

Campos opcionales:

[cols=",,",options="header",]
|===
|Nombre de campo |Tipo |Descripción
|mainStat |cadena/número |Primera estadística que se muestra en la superposición al pasar el cursor sobre el borde. Puede ser una cadena, en cuyo caso el valor se mostrará tal cual o puede ser un número, en cuyo caso también se mostrará cualquier unidad asociada con ese campo.
|secondaryStat |cadena/número |Igual que mainStat pero se muestra justo debajo de él.
|detail__* |cadena/número |Cualquier campo con el prefijo detail__ se mostrará en el encabezado del menú contextual cuando se haga clic en el borde. Utilice config.displayName para una etiqueta más legible por humanos.
|===

==== Panel de gráfico circular

===== Panel de gráfico circular v2

*Nota:* esta documentación se refiere a una función beta.

El gráfico circular muestra series reducidas, o valores en una serie, de una o más consultas, según se relacionan entre sí, en forma de porciones de un pastel. La longitud del arco, el área y el ángulo central de un corte son proporcionales al valor de los cortes, ya que se relaciona con la suma de todos los valores. Este tipo de gráfico se utiliza mejor cuando desea una comparación rápida de un pequeño conjunto de valores en una forma estéticamente agradable.

image:extracted-media\media\image74.png[Pie chart panel,width=624,height=277]

====== Opciones de campo y datos

Las visualizaciones de gráficos circulares le permiten aplicar:

* Transformaciones de datos
* Opciones de campo y anulaciones
* Umbrales

====== Opciones de pantalla

Utilice las siguientes opciones para refinar su visualización:

======= Mostrar

Elija cuánta información mostrar.

* *Calcular:* reduce cada valor a un solo valor por serie.
* *Todos los valores:* muestra todos los valores de una única serie.

======= Cálculo

Seleccione un cálculo para reducir cada serie cuando se haya seleccionado Calcular. Para obtener información sobre los cálculos disponibles, consulte la Lista de cálculos.

======= Límite

Cuando se muestran todos los valores de una sola serie, esto limita el número de valores mostrados.

======= Campos

Seleccione qué campo o campos mostrar en la visualización. Cada nombre de campo está disponible en la lista, o puede seleccionar una de las siguientes opciones:

* *Campos numéricos:* todos los campos con valores numéricos.
* *Todos los campos:* todos los campos que no se eliminan mediante transformaciones.
* *Tiempo:* todos los campos con valores de tiempo.

======= Tipo de gráfico circular

Seleccione el estilo de visualización del gráfico circular.

======== Tarta

image:extracted-media\media\image75.png[Pie type chart,width=396,height=396]

======== Rosquilla

image:extracted-media\media\image76.png[Donut type chart,width=395,height=394]

======== Etiquetas

Seleccione etiquetas para mostrar en el gráfico circular. Puede seleccionar más de una.

* *Nombre:* el nombre de la serie o del campo.
* *Porcentaje:* el porcentaje del total.
* *Valor:* el valor numérico sin procesar.

Las etiquetas se muestran en blanco sobre el cuerpo del gráfico. Es posible que deba seleccionar colores de gráfico más oscuros para hacerlos más visibles. Los nombres o números largos pueden aparecer recortados.

El siguiente ejemplo muestra un gráfico circular con las etiquetas de *Nombre* y *Porcentaje*.

image:extracted-media\media\image77.png[Pie chart labels,width=400,height=398]

======= Modo de la leyenda

Utilice esta configuración para refinar cómo aparece la leyenda en su visualización.

* *Lista:* muestra la leyenda como una lista. Este es un modo de visualización predeterminado de la leyenda.
* *Tabla:* muestra la leyenda como una tabla.
* *Oculto:* oculta la leyenda.

======= Colocación de la leyenda

Elija dónde mostrar la leyenda.

* *Abajo:* debajo del gráfico.
* *Derecha:* a la derecha del gráfico.

======= Valores de leyenda

Seleccione valores para mostrar en la leyenda. Puede seleccionar más de uno.

* *Porcentaje:* el porcentaje del total.
* *Valor:* el valor numérico sin procesar.

==== Panel de estadísticas

===== Panel de estadísticas

El Panel de estadísticas muestra un valor de estadística grande con un minigráfico de gráficos opcional. Puede controlar el color de fondo o el valor mediante umbrales.

image:extracted-media\media\image78.png[Stat panel,width=624,height=95]

*Nota:* Este panel reemplaza al panel Singlestat, que quedó obsoleto en Grafana 7.0.

De forma predeterminada, el Panel de estadísticas muestra uno de los siguientes:

* Solo el valor de una sola serie o campo.
* Tanto el valor como el nombre de varias series o campos.

Puede utilizar el *Modo texto* para controlar si el texto se muestra o no.

Captura de pantalla de ejemplo:

image:extracted-media\media\image79.png[Stat panel,width=624,height=277]

====== Opciones de campo y datos

Las visualizaciones de estadísticas le permiten aplicar:

* Transformaciones de datos
* Opciones de campo y anulaciones
* Umbrales

====== Ajuste de diseño automático

El panel ajusta automáticamente el diseño según el ancho y la altura disponibles en el tablero. Oculta automáticamente el gráfico (minigráfico) si el panel se vuelve demasiado pequeño.

====== Opciones de pantalla

Utilice las siguientes opciones para refinar su visualización:

* *Mostrar:* elija cómo Grafana muestra sus datos.
** *Calcular:* muestra un valor calculado basado en todas las filas.
*** *Cálculo:* seleccione un cálculo para aplicar. Para obtener información sobre los cálculos disponibles, consulte la Lista de cálculos.
** *Todos los valores:* muestra una estadística separada para cada fila.
*** *Límite:* el número máximo de filas que se mostrarán.
* *Campos:* seleccione un nombre de campo o tipo de campo (incluidos *Todos los campos* o *Campos numéricos*) para incluirlo en este panel.
* *Valor:* seleccione una función de reducción que Grafana utilizará para reducir muchos campos a un solo valor. Haga clic en la lista *Valor* para ver las funciones y descripciones breves.
* *Orientación:* elija una dirección de apilamiento.
** *Auto:* Grafana selecciona lo que cree que es la mejor orientación.
** *Horizontal:* las barras se estiran horizontalmente, de izquierda a derecha.
** *Vertical:* las barras se estiran verticalmente, de arriba hacia abajo.
* *Modo de texto:* (solo disponible en Grafana 7.1+). Puede usar la opción Modo de texto para controlar qué texto muestra el panel. Si el valor no es importante, solo el nombre y el color lo son, cambie el *Modo de texto* a *Nombre*. El valor se seguirá utilizando para determinar el color y se muestra en una información sobre herramientas.
** *Automático:* si los datos contienen varias series o campos, muestra tanto el nombre como el valor.
** *Valor:* muestra solo el valor, nunca el nombre. En su lugar, el nombre se muestra en la información sobre herramientas flotante.
** *Valor y nombre:* muestre siempre el valor y el nombre.
** *Nombre:* muestra el nombre en lugar del valor. El valor se muestra en la información sobre herramientas flotante.
** *Ninguno:* no muestra nada (vacío). El nombre y el valor se muestran en la información sobre herramientas flotante.
* *Modo de color*
** *Valor:* colorea solo el valor y el área del gráfico.
** *Fondo:* también colorea el fondo.
* *Modo gráfico*
** *Ninguno:* oculta el gráfico y solo muestra el valor.
** *Área:* muestra el gráfico de área debajo del valor. Esto requiere que su consulta devuelva una columna de tiempo.
* *Modo de alineación:* elija un modo de alineación.
** *Automático:* si solo se muestra un valor único (sin repetición), el valor está centrado. Si se muestran varias series o filas, el valor se alinea a la izquierda.
** *Centro:* el valor de estadística está centrado.

==== Panel de tabla

===== Panel de tabla

El panel de la tabla es muy flexible y admite múltiples modos para series de tiempo y para tablas, anotaciones y datos JSON sin procesar. Este panel también proporciona opciones de formato de fecha, formato de valor y coloración.

image:extracted-media\media\image80.png[Table visualization,width=624,height=213]

====== Opciones de campo y datos

Las visualizaciones de tablas le permiten aplicar:

* Transformaciones de datos
* Opciones de campo y anulaciones
* Umbrales

====== Opciones de pantalla

*Nota:* Si está utilizando una visualización de tabla creada antes de Grafana 7.0, debe migrar a la nueva versión de tabla para ver estas opciones. Para migrar, en la pestaña Panel, haga clic en Visualización de *tabla*. Grafana actualiza la versión de la tabla y luego puede acceder a todas las opciones de la tabla.

* *Mostrar encabezado:* muestra u oculta los nombres de las columnas importadas de su fuente de datos.
* *Orden ascendente / descendente:* haga clic en el título de una columna para cambiar el orden de clasificación de predeterminado a descendente a ascendente. Cada vez que hace clic, el orden de clasificación cambia a la siguiente opción del ciclo. Solo puede ordenar por una columna a la vez.

____
image:extracted-media\media\image81.png[Sort descending,width=400,height=147]
____

* Las opciones de campo de la tabla le permiten cambiar las opciones de campo, como el ancho de columna, la alineación y el modo de visualización de celda.
* Filtrar columnas de la tabla: puede cambiar temporalmente cómo se muestran los datos de las columnas. Por ejemplo, puede ordenar los valores de mayor a menor u ocultar valores específicos.

====== Soporte de anotaciones

Actualmente, las anotaciones no son compatibles con el nuevo panel de la tabla. Esto podría volver a agregarse en una versión futura.

===== Opciones de campo de tabla

====== Opciones de campo de tabla

Esta sección explica todas las opciones de campo de tabla disponibles. Se enumeran en el mismo orden que en Grafana. Las opciones enumeradas en este tema se aplican solo a las visualizaciones del panel de tabla.

La mayoría de las opciones de campo no afectarán la visualización hasta que haga clic fuera del cuadro de opción de campo que está editando o presione Entrar.

Para obtener más información sobre cómo aplicar estas opciones, consulte:

* Configurar todos los campos
* Configurar campos específicos

======= Alineación de columnas

Elija cómo Grafana debe alinear el contenido de la celda:

* Auto (predeterminado)
* Izquierda
* Centrar
* Derecha

======= Ancho de columna

De forma predeterminada, Grafana calcula automáticamente el ancho de la columna en función del contenido de la celda. En esta opción de campo, puede anular la configuración y definir el ancho de todas las columnas en píxeles.

Por ejemplo, si ingresa 100 en el campo, cuando haga clic fuera del campo, todas las columnas se establecerán en 100 píxeles de ancho.

======= Modo de visualización de celda

De forma predeterminada, Grafana elige automáticamente la configuración de pantalla. Puede anular la configuración eligiendo una de las siguientes opciones para cambiar todos los campos.

*Nota:* Si los configura en la pestaña Campo, los modos de visualización se aplicarán a todos los campos, incluido el campo de tiempo. Muchas opciones funcionarán mejor si las configura en la pestaña Anular.

======== Texto en color

Si se establecen umbrales, el texto del campo se muestra en el color de umbral apropiado.

image:extracted-media\media\image82.png[Color text,width=400,height=118]

======== Fondo de color (degradado o sólido)

Si se establecen umbrales, el fondo del campo se muestra en el color de umbral apropiado.

image:extracted-media\media\image83.png[Color background,width=398,height=107]

======== Medidor de gradiente

Los niveles de umbral definen un gradiente.

image:extracted-media\media\image84.png[Gradient gauge,width=398,height=133]

======== Indicador LCD

El medidor se divide en pequeñas celdas que están encendidas o apagadas.

image:extracted-media\media\image85.png[LCD gauge,width=400,height=169]

======== Vista JSON

Muestra el valor formateado como código. Si un valor es un objeto, la vista JSON que permite navegar por el objeto JSON aparecerá al pasar el mouse.

image:extracted-media\media\image86.png[JSON view,width=398,height=113]

======== Imagen

Solo disponible en Grafana 7.3+

Si tiene un valor de campo que es una URL de imagen o una imagen codificada en base64, puede configurar la tabla para que se muestre como una imagen.

======= Filtro de columna

Nota: esta función está disponible en Grafana 7.2+.

Active esta opción para habilitar los filtros de campo de la tabla. Para obtener más información, consulte Filtrar columnas de la tabla.

===== Filtrar columnas de la tabla

====== Filtrar columnas de la tabla

*Nota:* esta función está disponible en Grafana 7.2+.

Si activa el *Filtro de columna* en las Opciones de la tabla, puede filtrar las opciones de la tabla.

======= Activar el filtrado de columnas

[arabic]
. En Grafana, navegue hasta el tablero con la tabla con las columnas que desea filtrar.
. En el panel de la tabla que desea filtrar, abra el editor de paneles.
. Haga clic en la pestaña *Campo*.
. En las Opciones de la tabla, active la opción de *Filtro de columna*.

Aparece un icono de filtro junto al título de cada columna.

image:extracted-media\media\image87.png[Column filtering turned on,width=512,height=99]

======= Filtrar valores de columna

Para filtrar valores de columna, haga clic en el icono de filtro (embudo) junto al título de una columna. Grafana muestra las opciones de filtro para esa columna.

image:extracted-media\media\image88.png[Filter column values,width=390,height=500]

Haga clic en la casilla de verificación junto a los valores que desea mostrar. Ingrese texto en el campo de búsqueda en la parte superior para mostrar esos valores en la pantalla para que pueda seleccionarlos en lugar de desplazarse para encontrarlos.

======= Borrar filtros de columna

Las columnas con filtros aplicados tienen un embudo azul junto al título.

image:extracted-media\media\image89.png[Filtered column,width=162,height=193]

Para eliminar el filtro, haga clic en el icono de embudo azul y luego haga clic en *Borrar filtro*.

==== Panel de texto

===== Panel de texto

El panel de texto le permite crear paneles de información y descripción para sus tableros.

En el *Modo*, seleccione si desea utilizar Markdown o HTML para darle estilo a su texto, luego ingrese el contenido en el cuadro a continuación. Grafana incluye un título y un párrafo para ayudarlo a comenzar, o puede pegar contenido de otro editor.

==== Panel de series de tiempo

===== Panel de series de tiempo

*Nota:* esta es una función beta. El panel de series de tiempo reemplazará al panel de gráficos en las versiones futuras.

El panel de series de tiempo es una visualización robusta para trazar datos de series de tiempo. Se puede representar como una línea, una ruta de puntos o una serie de barras. Este tipo de gráfico es lo suficientemente versátil como para mostrar casi cualquier dato de series de tiempo.

Para ver ejemplos de Paneles de series temporales, consulte las nuevas funciones del tablero de Grafana Play en v7.4.

====== Opciones de campo y datos

Las visualizaciones de series de tiempo le permiten aplicar:

* Transformaciones de datos
* Opciones de campo y anulaciones
* Umbrales

También puede usar las opciones de campo para crear diferentes tipos de gráficos o ajustar sus ejes:

* Graficar series de tiempo como líneas
* Graficar series de tiempo como barras
* Graficar series de tiempo como puntos
* Cambiar visualización de eje

====== Opciones de pantalla

*Nota:* Puede migrar las visualizaciones del Panel gráfico a Visualizaciones de series temporales. Para migrar, en la pestaña Panel, haga clic en Visualización de *serie temporal*. Grafana transfiere todas las configuraciones aplicables. (Mientras está en beta, la migración aún se está refinando. ¡Mejorará a medida que pase el tiempo!)

======= Modo de información sobre herramientas

Cuando pasa el cursor sobre el gráfico, Grafana puede mostrar información sobre herramientas. Elija cómo se comportan las descripciones emergentes.

* *Único:* la información sobre herramientas flotante muestra solo una serie única, la que está sobre la que se desplaza en el gráfico.
* *Todo:* la información sobre herramientas flotante muestra todas las series en el gráfico. Grafana destaca la serie sobre la que se desplaza en negrita en la lista de series en la información sobre herramientas.
* *Oculto:* no muestra la información sobre herramientas cuando interactúa con el gráfico.

*Nota:* Utilice una modificación para ocultar series individuales de la información sobre herramientas.

======= Modo de la leyenda

Utilice esta configuración para refinar cómo aparece la leyenda en su visualización.

* *Lista:* muestra la leyenda como una lista. Este es un modo de visualización predeterminado de la leyenda.
* *Tabla:* muestra la leyenda como una tabla.
* *Oculto:* oculta la leyenda.

======= Colocación de la leyenda

Elija dónde mostrar la leyenda.

* *Abajo:* debajo del gráfico.
* *Derecha:* a la derecha del gráfico.

======= Cálculos de leyenda

Elija cuál de los cálculos estándar mostrar en la leyenda. Puedes tener más de uno.

===== Graficar series de tiempo como líneas

====== Graficar series de tiempo como líneas

*Nota:* esta es una función beta. El panel de series de tiempo reemplazará al panel de gráficos en las versiones futuras.

Esta sección explica cómo utilizar las opciones del Campo Serie temporal para visualizar los datos de la serie temporal como líneas e ilustra lo que hacen las opciones.

======= Crear el panel

[arabic]
. Agregue un panel. Seleccione la Visualización de serie temporal.
. En el Editor de panel, haga clic en la pestaña *Campo*.
. En Estilo, haga clic en *Líneas*.

======= Estilizar las líneas

Utilice la siguiente configuración de campo para refinar su visualización.

Para obtener más información sobre cómo aplicar estas opciones, consulte:

* Configurar todos los campos
* Configurar campos específicos

Algunas opciones de campo no afectarán la visualización hasta que haga clic fuera del cuadro de opción de campo que está editando o presione Entrar.

======== Interpolación de línea

Elija cómo Grafana interpola la línea de la serie. Las capturas de pantalla a continuación muestran los mismos datos mostrados con diferentes interpolaciones de líneas.

========= Lineal

image:extracted-media\media\image90.png[Linear interpolation icon,width=142,height=65]

Los puntos están unidos por líneas rectas.

image:extracted-media\media\image91.png[Linear interpolation example,width=624,height=137]

========= Suave

image:extracted-media\media\image92.png[Smooth interpolation icon,width=143,height=65]

Los puntos están unidos por líneas curvas que dan como resultado transiciones suaves entre puntos.

image:extracted-media\media\image93.png[Smooth interpolation example,width=624,height=135]

========= Paso antes

image:extracted-media\media\image94.png[Step before interpolation icon,width=144,height=68]

La línea se muestra como pasos entre puntos. Los puntos se representan al final del paso.

image:extracted-media\media\image95.png[Step before interpolation example,width=624,height=138]

========= Paso después

image:extracted-media\media\image96.png[Step after interpolation icon,width=144,height=68]

La línea se muestra como pasos entre puntos. Los puntos se representan al comienzo del paso.

image:extracted-media\media\image97.png[Step after interpolation example,width=624,height=131]

======== Ancho de línea

Establezca el grosor de la línea de la serie, de 0 a 10 píxeles.

Grosor de línea establecido en 1:

image:extracted-media\media\image98.png[Line thickness 1 example,width=624,height=164]

Grosor de línea establecido en 7:

image:extracted-media\media\image99.png[Line thickness 7 example,width=624,height=164]

======== Opacidad de relleno

Establezca la opacidad del relleno de la serie, de 0 a 100 por ciento.

Opacidad de relleno establecida en 20:

image:extracted-media\media\image100.png[Fill opacity 20 example,width=624,height=163]

Opacidad de relleno establecida en 95:

image:extracted-media\media\image101.png[Fill opacity 95 example,width=624,height=158]

======== Modo de gradiente

Establece el modo del relleno degradado. El degradado de relleno se basa en el color de la línea. Para cambiar el color, use la opción de campo estándar de esquema de color.

La apariencia del degradado está influenciada por la configuración de *Opacidad de relleno*. En las capturas de pantalla a continuación, la *Opacidad de relleno* se establece en 50.

========= Ninguno

Sin relleno degradado. Ésta es la configuración predeterminada.

image:extracted-media\media\image102.png[Gradient mode none example,width=624,height=158]

========= Opacidad

La transparencia del gradiente se calcula en función de los valores del eje y. La opacidad del relleno aumenta con los valores del eje Y.

image:extracted-media\media\image103.png[Gradient mode opacity example,width=624,height=161]

========= Tono

El color degradado se genera en función del tono del color de la línea.

image:extracted-media\media\image104.png[Gradient mode hue example,width=624,height=159]

======== Estilo de línea

Establece el estilo de la línea. Para cambiar el color, use la opción de campo estándar de esquema de color.

La apariencia del estilo de línea está influenciada por la configuración de *Ancho de línea* y *Opacidad de relleno*. En las capturas de pantalla a continuación, el *Ancho de línea* se establece en 3 y la *Opacidad de relleno* se establece en 20.

========= Sólido

Muestra una línea sólida. Ésta es la configuración predeterminada.

image:extracted-media\media\image105.png[Line style solid example,width=624,height=157]

========= Guión

Muestre una línea discontinua. Cuando elige esta opción, aparece una lista para que pueda seleccionar la longitud y el espacio (largo, espacio) para los guiones de línea.

Espaciado de guiones establecido en 10, 10 (predeterminado):

image:extracted-media\media\image106.png[Line style dashed 10, 10 example,width=624,height=157]

Espaciado de guiones establecido en 10, 30:

image:extracted-media\media\image107.png[Line style dashed 10, 30 example,width=624,height=161]

Espaciado de guiones establecido en 40, 10:

image:extracted-media\media\image108.png[Line style dashed 40, 10 example,width=624,height=157]

========= Puntos

Muestra líneas de puntos. Cuando elige esta opción, aparece una lista para que pueda seleccionar el espacio (longitud = 0, espacio) para el espaciado de puntos.

Espaciado de puntos establecido en 0, 10 (predeterminado):

image:extracted-media\media\image109.png[Line style dots 0, 10 example,width=624,height=155]

Espaciado de puntos establecido en 0, 30:

image:extracted-media\media\image110.png[Line style dots 0, 30 example,width=624,height=157]

======== Valores nulos

Elija cómo se muestran los valores nulos (espacios en los datos) en el gráfico.

========= Brechas

Si hay una brecha en la serie, la línea en el gráfico se romperá y mostrará la brecha.

image:extracted-media\media\image111.png[Null values gaps example,width=624,height=264]

========= Conectado

Si hay un espacio en la serie, la línea saltará el espacio y se conectará al siguiente valor no nulo.

image:extracted-media\media\image112.png[Null values connected example,width=624,height=259]

======== Mostrar puntos

Elija cuándo deben mostrarse los puntos en el gráfico.

========= Auto

Grafana decide automáticamente si muestra o no los puntos en función de la densidad de los datos. Si la densidad es baja, se muestran los puntos.

========= Siempre

Muestre los puntos sin importar cuán denso sea el conjunto de datos. Este ejemplo usa un *Ancho de línea* de 1 y 50 puntos de datos. Si el ancho de la línea es más grueso que el tamaño del punto, la línea oscurece los puntos.

========== Tamaño de punto

Establezca el tamaño de los puntos, de 1 a 40 píxeles de diámetro.

Tamaño de punto establecido en 4:

image:extracted-media\media\image113.png[Show points point size 4 example,width=624,height=146]

Tamaño de punto establecido en 10:

image:extracted-media\media\image114.png[Show points point size 10 example,width=624,height=145]

========= Nunca

Nunca muestre los puntos.

image:extracted-media\media\image115.png[Show points point never example,width=624,height=148]

======= Rellene debajo hasta

Esta opción solo está disponible en la pestaña Anulaciones.

Rellena el área entre dos series. En la pestaña Anulaciones:

[arabic]
. Seleccione los campos para completar a continuación.
. En *Agregar propiedad de anulación*, seleccione *Rellenar debajo hasta*.
. Seleccione la serie en la que desea que se detenga el relleno.

Serie A rellenada hasta la serie B:

image:extracted-media\media\image116.png[Fill below to example,width=624,height=140]

======= Ejemplos de gráficos de líneas

A continuación se muestran algunos ejemplos de gráficos de líneas para darle ideas.

======== Varios estilos de línea

Este es un gráfico con diferentes estilos de línea y colores aplicados a cada serie y relleno de cero.

image:extracted-media\media\image117.png[Various line styles example,width=624,height=252]

======== Ejemplo de modos de interpolación

image:extracted-media\media\image118.png[Interpolation modes example,width=624,height=381]

======== Ejemplo de Rellene debajo hasta

Este gráfico muestra tres series: Min, Max y Valor. Las series Min y Max tienen el *Ancho de línea* establecido en 0. Max tiene una anulación de *Rellene debajo hasta* establecido en Min, que llena el área entre Max y Min con el color de línea Max.

image:extracted-media\media\image119.png[Fill below example,width=624,height=252]

===== Graficar series de tiempo como barras

====== Graficar series de tiempo como barras

*Nota:* esta es una función beta. El panel de series de tiempo reemplazará al panel de gráficos en las versiones futuras.

Esta sección explica cómo usar las opciones del campo Serie temporal para visualizar datos de series temporales como barras e ilustra lo que hacen las opciones.

======= Crea el panel

[arabic]
. Agrega un panel. Seleccione la Visualización de serie temporal.
. En el Editor de panel, haga clic en la pestaña *Campo*.
. En Estilo, haga clic en *Barras*.

======= Estilizar las barras

Utilice la siguiente configuración de campo para refinar su visualización.

Para obtener más información sobre cómo aplicar estas opciones, consulte:

* Configurar todos los campos
* Configurar campos específicos

Algunas opciones de campo no afectarán la visualización hasta que haga clic fuera del cuadro de opción de campo que está editando o presione Entrar.

======== Alineación de barras

Establece la posición de la barra relativa a un punto de datos. En los ejemplos siguientes, *Mostrar puntos* se establece en *Siempre* para que sea más fácil ver la diferencia que hace esta configuración. Los puntos no cambian; las barras cambian en relación a los puntos.

========= Antes

image:extracted-media\media\image120.png[Bar alignment before icon,width=114,height=67]

La barra se dibuja antes del punto. El punto se coloca en la esquina posterior de la barra.

image:extracted-media\media\image121.png[Bar alignment before example,width=624,height=182]

========= Centrar

image:extracted-media\media\image122.png[Bar alignment center icon,width=114,height=68]

La barra se dibuja alrededor del punto. El punto se coloca en el centro de la barra. Este es el predeterminado.

image:extracted-media\media\image123.png[Bar alignment center,width=624,height=183]

========= Después

image:extracted-media\media\image124.png[Bar alignment after icon,width=115,height=66]

La barra se dibuja después del punto. El punto se coloca en la esquina principal de la barra.

image:extracted-media\media\image125.png[Bar alignment after,width=624,height=184]

======== Ancho de línea

Establezca el grosor de los contornos de la barra de líneas, de 0 a 10 píxeles. La *Opacidad de relleno* se establece en 10 en los ejemplos siguientes.

Grosor de línea establecido en 1:

image:extracted-media\media\image126.png[Line thickness 1 example,width=624,height=192]

Grosor de línea establecido en 7:

image:extracted-media\media\image127.png[Line thickness 7 example,width=624,height=188]

======== Opacidad de relleno

Establezca la opacidad del relleno de la barra, de 0 a 100 por ciento. En los ejemplos siguientes, el *Ancho de línea* se establece en 1.

Opacidad de relleno establecida en 20:

image:extracted-media\media\image128.png[Fill opacity 20 example,width=624,height=188]

Opacidad de relleno establecida en 95:

image:extracted-media\media\image129.png[Fill opacity 95 example,width=624,height=190]

======== Modo de gradiente

Establece el modo del relleno degradado. El degradado de relleno se basa en el color de la línea. Para cambiar el color, use la opción estándar de campo de esquema de color.

La apariencia del degradado está influenciada por la configuración de b. En las capturas de pantalla a continuación, la *Opacidad de relleno* se establece en 50.

========= Ninguno

Sin relleno degradado. Ésta es la configuración predeterminada.

image:extracted-media\media\image130.png[Gradient mode none example,width=624,height=184]

========= Opacidad

La transparencia del gradiente se calcula en función de los valores del eje y. La opacidad del relleno aumenta con los valores del eje Y.

image:extracted-media\media\image131.png[Gradient mode opacity example,width=624,height=187]

Tono

El color degradado se genera en función del tono del color de la línea.

image:extracted-media\media\image132.png[Gradient mode hue example,width=624,height=186]

======== Mostrar puntos

Elija cuándo deben mostrarse los puntos en el gráfico

========= Auto

Grafana decide automáticamente si muestra o no los puntos en función de la densidad de los datos. Si la densidad es baja, se muestran los puntos.

========= Siempre

Muestre los puntos sin importar cuán denso sea el conjunto de datos. Este ejemplo usa un *Ancho de línea* de 1. Si el ancho de línea es más grueso que el tamaño del punto, entonces la línea oscurece los puntos.

========== Tamaño de punto

Establezca el tamaño de los puntos, de 1 a 40 píxeles de diámetro.

Tamaño de punto establecido en 6:

image:extracted-media\media\image133.png[Show points point size 6 example,width=624,height=184]

Tamaño de punto establecido en 20:

image:extracted-media\media\image134.png[Show points point size 20 example,width=624,height=186]

========= Nunca

Nunca muestre los puntos.

image:extracted-media\media\image135.png[Show points point never example,width=624,height=182]

======= Ejemplos de gráficos de barras

A continuación se muestran algunos ejemplos de gráficos de barras para darle ideas.

======== Gradiente de tono

image:extracted-media\media\image136.png[Bars with hue gradient example,width=403,height=303]

===== Graficar series de tiempo como puntos

====== Graficar series de tiempo como puntos

*Nota:* esta es una función beta. El panel de series de tiempo reemplazará al panel de gráficos en las versiones futuras.

Esta sección explica cómo utilizar las Opciones del campo Serie temporal para visualizar datos de series temporales como puntos e ilustra lo que hacen las opciones.

======= Crear el panel

[arabic]
. Agrega un panel. Seleccione la Visualización de serie temporal.
. En el Editor de Panel, haga clic en la pestaña *Campo*.
. En Estilo, haga clic en *Puntos*.

======= Estilizar los puntos

Utilice la siguiente configuración de campo para refinar su visualización.

Para obtener más información sobre cómo aplicar estas opciones, consulte:

* Configurar todos los campos
* Configurar campos específicos

Algunas opciones de campo no afectarán la visualización hasta que haga clic fuera del cuadro de opción de campo que está editando o presione Entrar.

======== Tamaño de punto

Establezca el tamaño de los puntos, de 1 a 40 píxeles de diámetro.

Tamaño de punto establecido en 6:

image:extracted-media\media\image137.png[Show points point size 6 example,width=624,height=169]

Tamaño de punto establecido en 20:

image:extracted-media\media\image138.png[Show points point size 20 example,width=624,height=170]

Tamaño de punto establecido en 35:

image:extracted-media\media\image139.png[Show points point size 35 example,width=624,height=174]

===== Cambiar visualización de eje

====== Cambiar visualización de eje

*Nota:* esta es una función beta. El panel de series de tiempo reemplazará al panel de gráficos en las versiones futuras.

Esta sección explica cómo utilizar las Opciones del campo Serie temporal para controlar la visualización de los ejes en la visualización e ilustra lo que hacen las opciones de los ejes.

Utilice la siguiente configuración de campo para refinar cómo se muestran sus ejes.

Para obtener más información sobre cómo aplicar estas opciones, consulte:

* Configurar todos los campos
* Configurar campos específicos

Algunas opciones de campo no afectarán la visualización hasta que haga clic fuera del cuadro de opción de campo que está editando o presione Entrar.

======= Ubicación

Seleccione la ubicación del eje Y.

======== Auto

Grafana asigna automáticamente el eje Y a la serie. Cuando hay dos o más series con diferentes unidades, Grafana asigna el eje izquierdo a la primera unidad y el derecho a las siguientes unidades.

======== Izquierda

Muestra todos los ejes Y en el lado izquierdo.

image:extracted-media\media\image140.png[Left Y-axis example,width=624,height=193]

======== Derecha

Muestre todos los ejes Y en el lado derecho.

image:extracted-media\media\image141.png[Right Y-axis example,width=624,height=200]

======== Oculto

Ocultar los ejes Y

image:extracted-media\media\image142.png[Hidden Y-axis example,width=624,height=177]

======= Etiqueta

Establece una etiqueta de texto en el eje Y.

image:extracted-media\media\image143.png[Label example,width=624,height=212]

Si tiene más de un eje Y, puede asignar etiquetas diferentes en la pestaña Anular.

======= Ancho

Establezca un ancho fijo del eje. De forma predeterminada, Grafana calcula dinámicamente el ancho de un eje.

Al establecer el ancho del eje, los datos cuyos tipos de ejes son diferentes pueden compartir las mismas proporciones de visualización. Esto hace que sea más fácil comparar los datos de más de un gráfico porque los ejes no se desplazan ni se estiran en una proximidad visual entre sí.

======= Mínimo suave y máximo suave

Configure una opción *mínimo suave* o *máximo suave* para un mejor control de los límites del eje Y. De forma predeterminada, Grafana establece el rango para el eje Y automáticamente según el conjunto de datos.

Los ajustes *mínimos suaves* y *máximos suaves* pueden evitar que los puntos se conviertan en montañas cuando los datos son en su mayoría planos, y los valores mínimos o máximos estrictos derivados de las opciones de campo mínimo y máximo estándar pueden evitar que los picos intermitentes aplanen los detalles útiles recortando los picos más allá de un punto definido.

Puede establecer opciones estándar min/max para definir límites estrictos del eje Y. Para obtener más información, consulte Opciones de campo estándar.

image:extracted-media\media\image144.png[Label example,width=624,height=210]

======= Escala

Establezca la escala que se utilizará para los valores del eje Y.

======== Lineal

Utilice una escala dividida en partes iguales.

======== Logarítmico

Utilice una escala logarítmica. Cuando se elige esta opción, aparece una lista donde puede elegir escala logarítmica binaria (base 2) o común (base 10).

=== Expresiones

==== Expresiones del lado del servidor

*Nota:* esta documentación es para una función beta.

Las expresiones del lado del servidor le permiten manipular los datos devueltos por consultas con matemáticas y otras operaciones. Las expresiones crean nuevos datos y no manipulan los datos devueltos por las fuentes de datos, además de una pequeña reestructuración de datos para hacer que los datos sean una entrada aceptable para las expresiones.

===== Usando expresiones

El caso de uso principal de las expresiones es para la próxima versión de las alertas de Grafana. Al igual que las alertas, el procesamiento se realiza en el lado del servidor, por lo que las expresiones pueden funcionar sin una sesión de navegador. Sin embargo, las expresiones también se pueden usar con fuentes de datos back-end y visualización.

*Nota:* Las expresiones no funcionan con las alertas actuales de Grafana.

*Nota:* Las expresiones no funcionan con variables de panel.

Las expresiones están destinadas a aumentar las fuentes de datos al permitir que las consultas de diferentes fuentes de datos se combinen o al proporcionar operaciones no disponibles en una fuente de datos.

*Nota:* Cuando sea posible, debe realizar el procesamiento de datos dentro de la fuente de datos. Copiar datos desde el almacenamiento al servidor Grafana para su procesamiento es ineficiente, por lo que las expresiones están dirigidas al procesamiento de datos livianos.

Las expresiones funcionan con consultas de fuentes de datos que devuelven series de tiempo o datos numéricos. También operan con datos multidimensionales. Por ejemplo, una consulta que devuelve varias series, donde cada serie se identifica mediante etiquetas o chapas.

Una expresión individual toma una o más consultas u otras expresiones como entrada y agrega datos al resultado. Cada expresión o consulta individual está representada por una variable que es un identificador con nombre conocido como su RefID (por ejemplo, la letra predeterminada A o B).

Para hacer referencia a la salida de una expresión individual o una consulta de fuente de datos en otra expresión, este identificador se utiliza como variable.

===== Tipos de expresión

Las expresiones funcionan con dos tipos de datos.

* Colecciones de series temporales.
* Una colección de números, donde cada colección puede ser una sola serie o un solo número.

Cada colección se devuelve desde una única consulta o expresión de fuente de datos y se representa mediante RefID. Cada colección es un conjunto, donde cada elemento del conjunto se identifica de forma única por sus dimensiones que se almacenan como etiquetas o pares clave-valor.

===== Consultas de fuentes de datos

Las expresiones del lado del servidor solo admiten consultas de fuentes de datos para fuentes de datos de back-end. En general, se supone que los datos se etiquetan como datos de series de tiempo. En el futuro, teníamos la intención de agregar una afirmación de los datos del tipo de retorno de la consulta (número o serie temporal) para que las expresiones puedan manejar mejor los errores.

Las consultas de fuentes de datos, cuando se utilizan con expresiones, son ejecutadas por el motor de expresiones. Cuando hace esto, reestructura los datos para que sean una serie de tiempo o un número por marco de datos. Entonces, por ejemplo, si usa una fuente de datos que devuelve múltiples series en un marco en la vista de tabla, puede notar que se ve diferente cuando se ejecuta con expresiones.

Actualmente, el único formato de serie que no es de tiempo (número) es compatible cuando se usan marcos de datos si tiene una respuesta de tabla que devuelve un marco de datos sin tiempo, columnas de cadena y una columna numérica:

[cols=",,",options="header",]
|===
|Loc |Host |Avg_CPU
|MIA |A |1
|NYC |B |2
|===

producirá un número que funciona con expresiones. Las columnas de cadena se convierten en etiquetas y la columna numérica en el valor correspondiente. Por ejemplo, \{"Loc": "MIA", "Host": "A"} con un valor de 1.

===== Operaciones

Puede utilizar las siguientes operaciones en expresiones: matemáticas, reducir y volver a muestrear.

====== Matemáticas

Mátematicas es para fórmulas matemáticas de forma libre en series de tiempo o datos numéricos. Las operaciones matemáticas toman números y series de tiempo como entrada y los cambian a diferentes números y series de tiempo.

Los datos de otras consultas o expresiones se referencian con el RefID prefijado con un signo de dólar, por ejemplo $A. Si la variable tiene espacios en el nombre, entonces puede usar una sintaxis de llaves como $\{my variable}.

Las constantes numéricas pueden estar en decimal (2.24), octal (con un cero inicial como 072) o hexadecimal (con un 0x inicial como 0x2A). También se admiten exponenciales y signos (p. Ej., -0.8e-2).

====== Operadores

La aritmética (+, binaria y unaria -, *, /, %, exponente **), relacional (<, >, ==, !=, >=, <=) Y lógica (&&, || y unaria !) los operadores son compatibles.

El comportamiento de la operación con los datos depende de si se trata de un número o de una serie temporal.

Con operaciones binarias, como $A + $B o $A || $B, el operador se aplica de las siguientes formas según el tipo de dato:

* Si tanto $A como $B son un número, la operación se realiza entre los dos números.
* Si una variable es un número y la otra variable es una serie de tiempo, entonces se realiza la operación entre el valor de cada punto de la serie de tiempo y el número.
* Si tanto $A como $B son datos de series de tiempo, la operación entre cada valor de las dos series se realiza para cada marca de tiempo que exista tanto en $A como en $B. La operación Remuestrear se puede utilizar para alinear las marcas de tiempo. (*Nota:* en el futuro, planeamos agregar opciones a la operación Matemática para diferentes comportamientos).

Entonces, en resumen:

* Número OP número = número
* Número OP serie = serie
* Serie OP serie = serie

Debido a que las expresiones funcionan con múltiples series o números representados por una sola variable, las operaciones binarias también realizan una unión entre las dos variables. Esto se hace en base a las etiquetas de identificación asociadas con cada serie o número individual.

Entonces, si tiene números con etiquetas como \{host=web01} en $A y otro número en $B con las mismas etiquetas, entonces la operación se realiza entre esos dos elementos dentro de cada variable, y el resultado compartirá las mismas etiquetas. Las reglas para el comportamiento de esta unión son las siguientes:

* Un artículo sin etiquetas se unirá a cualquier cosa.
* Si tanto $A como $B contienen cada uno solo un elemento (una serie o un número), se unirán.
* Si las etiquetas son matemáticas exactas, se unirán.
* Si las etiquetas son un subconjunto del otro, por ejemplo, y el elemento en $A está etiquetado como \{host=A, dc=MIA} y el elemento en $B está etiquetado como \{host=A}, se unirán.
* Actualmente, si dentro de una variable como $A hay diferentes _claves_ de etiqueta para cada elemento, el comportamiento de unión no está definido.

Los operadores lógicos y relacionales devuelven 0 para falso 1 para verdadero.

======= Funciones matemáticas

Si bien la mayoría de las funciones existen en las propias operaciones de expresión, la operación matemática tiene algunas funciones similares a los operadores matemáticos o símbolos. Cuando las funciones pueden tomar números o series, se devolverá el mismo tipo que el argumento. Cuando es una serie, la operación se realiza por el valor de cada punto de la serie.

======== abs

abs devuelve el valor absoluto de su argumento, que puede ser un número o una serie. Por ejemplo abs(-1) o abs($ A).

======== log

Log devuelve el logaritmo natural de de su argumento, que puede ser un número o una serie. Si el valor es menor que 0, se devuelve NaN. Por ejemplo, log(-1) o log($A).

======== inf, nan y null

Las funciones inf, nan y null devuelven un solo valor del nombre. Existen principalmente para realizar pruebas. Ejemplo: null(). (Nota: inf siempre devuelve infinito positivo, probablemente debería cambiar esto para tomar un argumento para que pueda devolver infinito negativo).

====== Reducir

Reducir toma una o más series de tiempo devueltas por una consulta o una expresión y convierte cada serie en un solo número. Las etiquetas de la serie temporal se mantienen como etiquetas en cada número reducido generado.

======= Campos:

* *Función:* la función de reducción a utilizar
* *Entrada:* la variable (refID (como A)) para volver a muestrear

======= Funciones de reducción

*Nota:* En el futuro planeamos agregar opciones para controlar el comportamiento vacío, NaN y nulo para las funciones de reducción.

======== Contar

Contar devuelve el número de puntos de cada serie.

======== Promediar

La media devuelve el total de todos los valores de cada serie dividido por el número de puntos de esa serie. Si algún valor de la serie es nulo o nan, o si la serie está vacía, se devuelve NaN.

======== Min y Max

Min y Max devuelven el valor más pequeño o más grande de la serie, respectivamente. Si algún valor de la serie es nulo o nan, o si la serie está vacía, se devuelve NaN.

======== Sumar

Sum devuelve el total de todos los valores de la serie. Si la serie tiene una longitud cero, la suma será 0. Si hay valores NaN o Null en la serie, se devuelve NaN.

====== Remuestrear

Volver a muestrear cambia las marcas de tiempo en cada serie de tiempo para tener un intervalo de tiempo coherente. El caso de uso principal es para que pueda volver a muestrear series de tiempo que no comparten las mismas marcas de tiempo para que se puedan realizar operaciones matemáticas entre ellas. Esto se puede hacer volviendo a muestrear cada una de las dos series, y luego en una Operación matemática haciendo referencia a las variables remuestreadas.

======= Campos:

* *Entrada:* la variable de datos de series de tiempo (refID (como A)) para volver a muestrear
* *Volver a muestrear a:* la duración del tiempo para volver a muestrear, por ejemplo, 10s. Las unidades pueden ser s segundos, m para minutos, h para horas, d para días, w para semanas e y para años.
* *Downsample:* la función de reducción que se utiliza cuando hay más de un punto de datos por muestra de ventana. Consulte la operación de reducción para obtener detalles sobre el comportamiento.
* *Upsample:* el método que se usa para llenar una muestra de ventana que no tiene puntos de datos.
** *almohadilla* se llena con el último valor conocido
** *relleno* con el siguiente valor conocido
** *fillna* para llenar ventanas de muestra vacías con NaNs

== Tableros

=== Descripción general del tablero

Un _tablero_ es un conjunto de uno o más paneles organizados y dispuestos en una o más filas. Grafana se envía con una variedad de paneles. Grafana facilita la construcción de las consultas correctas y personaliza las propiedades de visualización para que puedas crear el tablero perfecto para tus necesidades. Cada panel puede interactuar con datos de cualquier fuente de datos de Grafana configurada (actualmente Graphite, Prometheus, Elasticsearch, InfluxDB, OpenTSDB, MySQL, PostgreSQL, Microsoft SQL Server y AWS Cloudwatch).

==== Interfaz de usuario del tablero

image:extracted-media\media\image145.png[https://grafana.com/static/img/docs/v50/dashboard_annotated.png,width=624,height=265]

[arabic]
. Alejar rango de tiempo
. Menú desplegable del selector de tiempo. Aquí puede acceder a opciones de rango de tiempo relativo, opciones de actualización automática y establecer rangos de tiempo absolutos personalizados.
. Botón de actualización manual. Hará que todos los paneles se actualicen (obtengan nuevos datos).
. Panel del tablero. Haga clic en el título del panel para editar paneles.
. Leyenda del gráfico. Puede cambiar los colores de la serie, el eje Y y la visibilidad de la serie directamente desde la leyenda.

==== Encabezado del tablero

Haga clic en el enlace nuevo Tablero en el lado derecho del selector de Tablero. Ahora tiene un Tablero en blanco.

image:extracted-media\media\image146.png[https://grafana.com/static/img/docs/v50/top_nav_annotated.png,width=624,height=99]

La imagen de arriba muestra el encabezado superior de un Tablero.

[arabic]
. {blank}
+
____
Alternar barra de menú lateral: esto alterna el menú lateral, lo que le permite concentrarse en los datos presentados en el tablero. El menú lateral proporciona acceso a funciones no relacionadas con un Tablero, como Usuarios, Organizaciones y Fuentes de datos.
____
. {blank}
+
____
Menú desplegable del tablero: este menú desplegable le muestra qué Tablero está viendo actualmente y le permite cambiar fácilmente a un nuevo Tablero. Desde aquí también puede crear un nuevo Tablero o carpeta, importar Tableros existentes y administrar listas de reproducción del Tablero.
____
. {blank}
+
____
Agregar Panel: agrega un nuevo panel al Tablero actual.
____
. {blank}
+
____
Destacar Tablero: Destaca (o desmarca) el Tablero actual. Los Tableros destacados aparecerán en su propio Tablero de inicio de forma predeterminada y son una forma conveniente de marcar los Tableros que le interesan.
____
. {blank}
+
____
Compartir Tablero: Comparta el tablero actual creando un enlace o una instantánea estática del mismo. Asegúrese de que el Tablero esté guardado antes de compartir.
____
. {blank}
+
____
Guardar tablero: el Tablero actual se guardará con el nombre del Tablero actual.
____
. {blank}
+
____
Configuración: administre la configuración y las funciones del Tablero, como Plantillas y Anotaciones.
____

==== Administrar tableros

El período de tiempo para el tablero se puede controlar mediante los controles de rango de tiempo en la parte superior derecha del tablero.

Los tableros pueden usar plantillas para hacerlos más dinámicos e interactivos.

Los tableros pueden usar anotaciones para mostrar datos de eventos en todos los paneles. Esto puede ayudar a correlacionar los datos de la serie temporal en el panel con otros eventos.

Puede compartir tableros de diversas formas.

Los paneles se pueden etiquetar y el selector de paneles proporciona acceso rápido y de búsqueda a todos los paneles de una organización en particular.

==== Filas

Una fila es un divisor lógico dentro de un tablero. Se utiliza para agrupar paneles.

Las filas siempre tienen 12 "unidades" de ancho. Estas unidades se escalan automáticamente dependiendo de la resolución horizontal de su navegador. Puede controlar el ancho relativo de los paneles dentro de una fila estableciendo su ancho específico.

Usamos una abstracción de unidades para que Grafana se vea genial en todos los tamaños de pantalla.

*Nota:* Con la funcionalidad MaxDataPoint, Grafana puede mostrarle el número perfecto de puntos de datos, independientemente de la resolución o el rango de tiempo.

Contraiga una fila haciendo clic en el título de la fila. Si guarda un tablero con una fila contraída, se guarda en ese estado y no carga esos gráficos hasta que expande la fila.

Utilice la función de filas repetidas para crear o eliminar dinámicamente filas enteras, que se pueden rellenar con paneles, según las variables de plantilla seleccionadas.

=== Anotaciones

==== Anotaciones

image:extracted-media\media\image147.png[https://grafana.com/static/img/docs/v46/annotations.png,width=624,height=245]

Las anotaciones proporcionan una forma de marcar puntos en el gráfico con eventos enriquecidos. Cuando pasa el cursor sobre una anotación, puede obtener la descripción del evento y las etiquetas del evento. El campo de texto puede incluir enlaces a otros sistemas con más detalle.

===== Anotaciones nativas

Grafana viene con un almacén de anotaciones nativo y la capacidad de agregar eventos de anotaciones directamente desde el panel de gráficos o mediante la API HTTP.

===== Agregar anotaciones

Manteniendo presionado Ctrl/Cmd+Clic. Agregar etiquetas a la anotación hará que se pueda buscar desde otros tableros.

====== Agregar eventos de regiones

También puede mantener presionada la tecla Ctrl/Cmd y seleccionar una región para crear una anotación de región.

====== Consulta incorporada

Después de agregar una anotación, aún estarán visibles. Esto se debe a la consulta de anotaciones incorporada que existe en todos los paneles. Esta consulta de anotación obtendrá todos los eventos de anotación que se originan en el tablero actual y los mostrará en el panel donde se crearon. Esto incluye anotaciones del historial de estado de alerta. Puede evitar que las anotaciones se obtengan y dibujen abriendo la configuración de *Anotaciones* (a través del menú de engranajes del Tablero) y modificando la consulta denominada Annotations & Alerts (Built-in).

Cuando copia un tablero con la función *Guardar como*, obtendrá una nueva identificación de tablero, por lo que las anotaciones creadas en el tablerode origen ya no serán visibles en la copia. Aún puede mostrarlos si agrega una nueva *Consulta de Anotación* y filtra por etiquetas. Pero esto solo funciona si las anotaciones en el tablero de origen tenían etiquetas por las que filtrar.

====== Consulta por etiqueta

Puede crear nuevas consultas de anotaciones que obtengan anotaciones del almacén de anotaciones nativo a través de la fuente de datos -- Grafana --y estableciendo _Filtrar por_ en Tags. Especifique al menos una etiqueta. Por ejemplo, cree una consulta de anotación con el nombre de outage y especifique una etiqueta llamada outage. Esta consulta mostrará todas las anotaciones que cree (desde cualquier tablero o mediante API) que tengan la etiqueta de outage. De forma predeterminada, si agrega varias etiquetas en la consulta de anotaciones, Grafana solo mostrará las anotaciones que tengan todas las etiquetas que proporcionó. Puede invertir el comportamiento habilitando Match any cualquiera, lo que significa que Grafana mostrará anotaciones que contengan al menos una de las etiquetas que proporcionó.

En Grafana v5.3 +, es posible utilizar variables de plantilla en la consulta de etiquetas. Entonces, si tiene un tablero que muestra estadísticas para diferentes servicios y una variable de plantilla que dicta qué servicios mostrar, ahora puede usar la misma variable de plantilla en su consulta de anotaciones para mostrar solo anotaciones para esos servicios.

image:extracted-media\media\image148.png[https://grafana.com/static/img/docs/v53/annotation_tag_filter_variable.png,width=624,height=307]

===== Consultar otras fuentes de datos

Los eventos de anotación se obtienen mediante consultas de anotación. Para agregar una nueva consulta de anotación a un tablero, abra el menú de configuración del tablero y luego seleccione Anotaciones. Esto abrirá la vista de configuración de anotaciones del tablero. Para crear una nueva consulta de anotación, presione el botón Nuevo.

image:extracted-media\media\image149.png[https://grafana.com/static/img/docs/v50/annotation_new_query.png,width=624,height=234]

Especifique un nombre para la consulta de anotación. Este nombre se le da a la palanca (casilla de verificación) que le permitirá habilitar/deshabilitar la visualización de eventos de anotación de esta consulta. Por ejemplo, puede tener dos consultas de anotación denominadas Implementaciones e Interrupciones. La palanca le permitirá decidir qué anotaciones mostrar.

====== Detalles de la consulta de anotación

Las opciones de consulta de anotación son diferentes para cada fuente de datos. Para obtener información sobre las anotaciones en una fuente de datos específica, consulte el tema de la fuente de datos específica.

=== Carpetas de tableros

==== Carpetas de tableros

Las carpetas son una forma de organizar y agrupar tableros, muy útil si tiene muchos tableros o varios equipos que utilizan la misma instancia de Grafana.

*Nota:* Solo los administradores y superadministradores de Grafana pueden crear, editar o eliminar carpetas. Consulte Roles de la organización para obtener más información.

===== Cómo crear una carpeta

* Cree una carpeta utilizando el enlace Crear carpeta en el menú lateral (debajo del menú Crear (icono +))
* Utilice el botón Crear carpeta en la página Administrar Tableros.
* Al guardar un tablero, puede elegir una carpeta para guardar el tablero o crear una nueva carpeta.

En la página Crear Carpeta, ingrese un nombre único para la carpeta y luego haga clic en Crear.

===== Administrar tableros

image:extracted-media\media\image150.png[https://grafana.com/static/img/docs/v50/manage_dashboard_menu.png,width=205,height=329]

Hay una nueva página Administrar Tableros donde puede realizar una variedad de tareas:

* crear una carpeta
* crear un tablero
* mover tableros a carpetas
* eliminar varios tableros
* navegue a una página de carpeta (donde puede establecer permisos para una carpeta y/o sus tableros)

===== Página de carpeta del tablero

Para llegar a la página de la carpeta del tablero, haga clic en el icono de engranaje que aparece cuando pasa el cursor sobre una carpeta en la lista del tablero en el resultado de la búsqueda o en la página Administrar Tableros.

La Página de la carpeta del tablero es similar a la página Administrar Tableros y es donde puede realizar las siguientes tareas:

* Le permite mover o eliminar tableros en una carpeta.
* Cambiar el nombre de una carpeta (en la pestaña Configuración).
* Configure los permisos para la carpeta (heredados por los tableros de la carpeta).

===== Permisos

Los permisos se pueden asignar a una carpeta y heredarlos a los tableros que contienen. Se utiliza una Lista de Control de Acceso (ACL) en la que se pueden asignar permisos al *Rol de la organización*, al *Equipo* y al *Usuario* individual. Lea los documentos de Permisos de Carpetas y Tableros para obtener más detalles sobre el sistema de permisos.

=== Lista de reproducción

==== Lista de reproducción

Una lista de reproducción es una lista de tableros que se muestran en una secuencia. Puede utilizar una lista de reproducción para crear conciencia de la situación o para presentar sus métricas a su equipo o visitantes.

Grafana escala automáticamente los tableros a cualquier resolución, lo que los hace perfectos para pantallas grandes.

Puede acceder a la función Lista de reproducción desde el menú lateral de Grafana, en el submenú Tableros.

image:extracted-media\media\image151.png[https://grafana.com/static/img/docs/v50/playlist.png,width=624,height=451]

===== Crear una lista de reproducción

Crea una lista de reproducción para presentar tableros en una secuencia, con un orden establecido y un intervalo de tiempo entre tableros.

[arabic]
. Para acceder a la función de lista de reproducción, coloque el cursor sobre el menú lateral de Grafana.
. Haz clic en *Listas de reproducción*.
. Haz clic en *Nueva lista de reproducción*.
. En el cuadro de texto *Nombre*, ingrese un nombre para su lista de reproducción.
. En el cuadro de texto *Intervalo*, ingrese un intervalo de tiempo.

El intervalo de tiempo es la cantidad de tiempo que Grafana permanece en un tablero en particular antes de avanzar al siguiente en la lista de reproducción.

[arabic]
. Junto a los tableros que desea agregar a su lista de reproducción, haga clic en *Agregar a lista de reproducción*.
. Haga clic en *Crear*.

===== Editar una lista de reproducción

Puede editar listas de reproducción mientras las crea o después de guardarlas.

[arabic]
. Para acceder a la función de lista de reproducción, coloque el cursor sobre el menú lateral de Grafana.
. Haz clic en *Listas de reproducción*.
. Haga clic en la Lista de reproducción que desea editar.

====== Editar el nombre de una lista de reproducción

[arabic]
. {blank}
+
____
Haga doble clic en el cuadro de texto *Nombre*.
____
. {blank}
+
____
Ingresa un nombre.
____
. {blank}
+
____
Haga clic en *Guardar* para guardar sus cambios.
____

====== Editar el intervalo de una lista de reproducción

[arabic]
. {blank}
+
____
Haga doble clic en el cuadro de texto *Intervalo*.
____
. {blank}
+
____
Ingrese un intervalo de tiempo.
____
. {blank}
+
____
Haga clic en *Guardar* para guardar sus cambios.
____

====== Agregar un tablero a una lista de reproducción

[arabic]
. {blank}
+
____
Junto al tablero que desea agregar, haga clic en *Agregar a lista de reproducción*.
____
. {blank}
+
____
Haga clic en *Guardar* para guardar sus cambios.
____

====== Busque un tablero para agregar

[arabic]
. {blank}
+
____
Haga clic en el cuadro de texto *Buscar tableros por nombre*.
____
. {blank}
+
____
Busque la lista de reproducción por nombre o expresión regular.
____
. {blank}
+
____
Si es necesario, filtre sus resultados por estado destacado o etiquetas. De forma predeterminada, sus tableros destacados aparecerán como opciones para agregar a la lista de reproducción.
____
. {blank}
+
____
Haga clic en *Guardar* para guardar sus cambios.
____

====== Reorganizar el orden de los tableros

[arabic]
. {blank}
+
____
Junto al tablero que desea mover, haga clic en la flecha hacia arriba o hacia abajo.
____
. {blank}
+
____
Haga clic en *Guardar* para guardar sus cambios.
____

====== Quitar un tablero

[arabic]
. {blank}
+
____
Haga clic en *Eliminar* para eliminar un tablero de la lista de reproducción.
____
. {blank}
+
____
Haga clic en *Guardar* para guardar sus cambios.
____

====== Eliminar una lista de reproducción

[arabic]
. {blank}
+
____
Haz clic en *Listas de reproducción*.
____
. {blank}
+
____
Junto a la lista de reproducción que desea eliminar, haga clic en *Eliminar*.
____

===== Guardar una lista de reproducción

Puede guardar una lista de reproducción para agregarla a su página *Listas de reproducción*, donde puede iniciarla. Asegúrese de que todos los tableros que desea que aparezcan en su lista de reproducción se agreguen al crear o editar la lista de reproducción antes de guardarla.

[arabic]
. Para acceder a la función de Lista de reproducción, coloque el cursor sobre el menú lateral de Grafana.
. Haz clic en *Listas de reproducción*.
. Haga clic en la lista de reproducción.
. Edita la lista de reproducción.
* Asegúrese de que su lista de reproducción tenga un *Nombre*, *Intervalo* y al menos un *Tablero* agregado.
. Clic en *Guardar*.

===== Iniciar una lista de reproducción

Puede iniciar una lista de reproducción en cinco modos de vista diferentes, que determinan cómo se muestran los menús y la barra de navegación en los tableros.

De forma predeterminada, cada tablero se muestra durante la cantidad de tiempo ingresada en el campo Intervalo, que se puede configurar al crear o editar una lista de reproducción. Una vez que se inicia una lista de reproducción, se puede controlar usando la barra de navegación en la parte superior de la pantalla.

[arabic]
. En el submenú Tableros, haga clic en *Listas de reproducción*.
. Junto a la lista de reproducción que desea iniciar, haga clic en *Iniciar lista de reproducción*.
. En el menú desplegable, seleccione el modo en el que desea que se muestre la lista de reproducción.
* *Modo normal:*
** El menú lateral permanece visible.
** Los controles de la barra de navegación, la fila y el panel aparecen en la parte superior de la pantalla.
* *Modo TV:*
** El menú lateral está oculto / eliminado.
** Los controles de la barra de navegación, la fila y el panel aparecen en la parte superior de la pantalla.
** Se habilita automáticamente después de un minuto de inactividad del usuario.
** Puede habilitarlo manualmente usando el acceso directo de secuencia d v, o agregando el parámetro ?inactive a la URL del tablero.
** Puede desactivarlo con cualquier movimiento del mouse o acción del teclado.
* *Modo TV (con paneles de ajuste automático):*
** El menú lateral está oculto/eliminado.
** Los controles de la barra de navegación, la fila y el panel aparecen en la parte superior de la pantalla.
** Los paneles del tablero se ajustan automáticamente para optimizar el espacio en la pantalla.
* *Modo quiosco:*
** El menú lateral, la barra de navegación, los controles de filas y paneles están completamente ocultos / eliminados de la vista.
** Puede habilitarlo manualmente usando el acceso directo de secuencia d v después de que la lista de reproducción haya comenzado.
** Puede desactivarlo manualmente con el mismo atajo.
* *Modo quiosco (con paneles de ajuste automático):*
** El menú lateral, la barra de navegación, los controles de filas y paneles están completamente ocultos / eliminados de la vista.
** Los paneles del tablero se ajustan automáticamente para optimizar el espacio en la pantalla.

===== Controla una lista de reproducción

Puedes controlar una lista de reproducción en modo *Normal* o *TV* después de que se inicie, usando la barra de navegación en la parte superior de su pantalla.

[cols=",",options="header",]
|===
|Botón |Resultado
|Siguiente (flecha doble a la derecha) |Avanza al siguiente tablero.
|Atrás (flecha izquierda) |Vuelve al tablero anterior.
|Detener (cuadrado) |Finaliza la lista de reproducción y sale al tablero actual.
|Modo rotar vista (icono de monitor) |Gira la pantalla de los tableros en diferentes modos de vista.
|Rango de tiempo |Muestra datos dentro de un rango de tiempo. Puede configurarse para mostrar los últimos 5 minutos hasta hace 5 años, o un rango de tiempo personalizado, usando la flecha hacia abajo.
|Actualizar (flecha circular) |Vuelve a cargar el tablero para mostrar los datos actuales. Puede configurarse para actualizar automáticamente de 5 segundos a 1 día, usando la flecha desplegable.
|===

Atajo: presione la tecla Esc para detener la lista de reproducción desde su teclado.

===== Compartir una lista de reproducción en un modo de visualización

Puede compartir una lista de reproducción copiando la dirección del enlace en el modo de visualización que prefiera y pegando la URL en su destino.

[arabic]
. En el submenú Tableros, haga clic en *Listas de reproducción*.
. Junto a la lista de reproducción que desea compartir, haga clic en *Iniciar lista de reproducción*.
. En el menú desplegable, haga clic con el botón derecho en el modo de visualización que prefiera.
. Haga clic en *Copiar dirección de enlace* para copiar la URL a su portapapeles.

____
Ejemplo: la URL de la primera lista de reproducción en el sitio Grafana Play en modo Quiosco se verá así: https://play.grafana.org/playlists/play/1?kiosk.
____

[arabic, start=5]
. Pegue la URL en su destino.

=== Buscar

==== Buscar en el tablero

Los tableros se pueden buscar por el nombre del tablero, filtrar por una (o muchas) etiquetas o filtrar por estado destacado. Se accede a la búsqueda del tablero a través del selector de tablero, disponible en el área de navegación superior del tablero. La búsqueda del tablero también se puede abrir usando el atajo F.

image:extracted-media\media\image152.png[https://grafana.com/static/img/docs/v50/dashboard_search_annotated.png,width=624,height=474]

[arabic]
. *Barra de búsqueda:* la barra de búsqueda le permite ingresar cualquier cadena y buscar en la base de datos y en los tableros basados ​​en archivos en tiempo real.
. *Destacados:* aquí encontrará todos sus tableros destacados.
. *Reciente:* aquí encontrará los últimos tableros creados.
. *Carpetas:* el filtro de etiquetas le permite filtrar la lista por etiquetas del tablero.
. *Raíz:* la raíz contiene todos los tableros que no se colocan en una carpeta.
. *Etiquetas:* el filtro de etiquetas le permite filtrar la lista por etiquetas del tablero.

Cuando solo usa un teclado, puede usar las teclas de flecha del teclado para navegar por los resultados, presione enter para abrir el tablero seleccionado.

===== Buscar por nombre de tablero

Empiece a escribir cualquier parte de los nombres de los tableros deseados en la barra de búsqueda. La búsqueda devolverá resultados para cualquier coincidencia de cadena parcial en tiempo real, a medida que escribe.

La búsqueda del tablero es:

* Tiempo real
* No distingue entre mayúsculas y minúsculas
* Funcional en tableros almacenados y basados ​​en archivos.

===== Filtrar por etiqueta(s)

Las etiquetas son una excelente manera de organizar sus tableros, especialmente a medida que aumenta el número de tableros. Las etiquetas se pueden agregar y administrar en la configuración del tablero.

Para filtrar la lista del tablero por etiqueta, haga clic en cualquier etiqueta que aparezca en la columna de la derecha. La lista se puede filtrar aún más haciendo clic en etiquetas adicionales:

Alternativamente, para ver una lista de todas las etiquetas disponibles, haga clic en el menú desplegable de etiquetas. Se mostrarán todas las etiquetas y, cuando se seleccione una etiqueta, la búsqueda del tablero se filtrará instantáneamente:

Cuando se usa solo un teclado: tab para enfocarse en el enlace de _etiquetas_, ▼ tecla de flecha hacia abajo para buscar una etiqueta y seleccionar con la tecla Enter.

*Nota:* Cuando se seleccionan varias etiquetas, Grafana mostrará tableros que las incluyen todas.

=== Atajos de teclado

==== Atajos de teclado

Grafana tiene varios atajos de teclado disponibles. Presione Shift + ? en su teclado para mostrar todos los atajos de teclado disponibles en su versión de Grafana.

*Atajos populares:*

* Ctrl+S guarda el tablero actual.
* Ctrl+F abre el buscador/búsqueda del tablero.
* Ctrl+H oculta todos los controles (bueno para pantallas de televisión).
* Presione Escape para salir del gráfico cuando esté en pantalla completa o en modo de edición.

=== Controles de rango de tiempo

==== Controles de rango de tiempo

Grafana proporciona varias formas de administrar los rangos de tiempo de los datos que se visualizan, tanto a nivel del tablero como a nivel del panel.

Esta página describe las unidades de tiempo admitidas y los rangos relativos, los controles de tiempo comunes, la configuración de tiempo de todo el tablero y la configuración de tiempo específica del panel.

===== Unidades de tiempo y rangos relativos

Se admiten las siguientes unidades de tiempo: s (segundos), m (minutos), h (horas), d (días), w (semanas), M (meses), y (años).

El operador menos le permite retroceder en el tiempo, en relación con el ahora. Si desea mostrar el período completo de la unidad (día, semana, mes, etc.), agregue /<time unit> al final.

El operador más le permite avanzar en el tiempo en relación con el ahora. Puede utilizar esta función para ver datos pronosticados en el futuro, por ejemplo.

Aquí hay unos ejemplos:

[cols=",,",options="header",]
|===
|Ejemplo de rango relativo |Desde: |Hasta:
|Últimos 5 minutos |now-5m |now
|El día hasta ahora |now/d |now
|Esta semana |now/w |now/w
|Esta semana hasta ahora |now/w |now
|Este mes |now/M |now/M
|Este mes hasta ahora |now/M |now
|Mes anterior |now-1M/M |now-1M/M
|Este año hasta ahora |now/Y |now
|Este año |now/Y |`now/Y
|===

===== Controles de rango de tiempo común

El tablero y los controles de tiempo del panel tienen una interfaz de usuario (UI) común.

image:extracted-media\media\image153.png[https://grafana.com/static/img/docs/time-range-controls/common-time-controls-7-0.png,width=452,height=76]

Las opciones se definen a continuación.

====== Rango de tiempo actual

El rango de tiempo actual, también llamado _selector de tiempo_, muestra el rango de tiempo que se muestra actualmente en el tablero o panel que está viendo.

Pase el cursor sobre el campo para ver las marcas de tiempo exactas en el rango y su fuente (como el navegador local).

image:extracted-media\media\image154.png[https://grafana.com/static/img/docs/time-range-controls/time-picker-7-0.png,width=262,height=223]

Haga clic en el rango de tiempo actual para cambiar el rango de tiempo. Puede cambiar la hora actual utilizando un rango de tiempo relativo, como los últimos 15 minutos, o un rango de tiempo absoluto, como 2020-05-14 00:00:00 to 2020-05-15 23:59:59.

image:extracted-media\media\image155.png[https://grafana.com/static/img/docs/time-range-controls/change-current-time-range-7-0.png,width=624,height=471]

====== Rango de tiempo relativo

Seleccione el intervalo de tiempo relativo de la lista de *Intervalos de tiempo relativos*. Algunos ejemplos de rangos de tiempo son:

* Últimos 30 minutos
* Últimas 12 horas
* Últimos 7 días
* Últimos 2 años
* Ayer
* Anteayer
* Este día la semana pasada
* Hoy hasta ahora
* Esta semana hasta ahora
* Este mes hasta ahora

====== Rango de tiempo absoluto

Establezca un intervalo de tiempo absoluto de dos formas:

* Escriba valores en los campos *Desde* y *Hasta*. Puede escribir valores de tiempo exactos o valores relativos, como now-24h, y luego hacer clic en *Aplicar rango de tiempo*.
* Haga clic en el campo *Desde* o *Hasta*. Grafana muestra un calendario. Haga clic en el día o los días que desea usar como rango de tiempo actual y luego haga clic en *Aplicar rango de tiempo*.

Esta sección también muestra los rangos absolutos usados ​​recientemente.

====== Alejar (Cmd+Z o Ctrl+Z)

Haga clic en el icono *Alejar* para ver un intervalo de tiempo más grande en el tablero o visualización del panel.

====== Acercar (solo aplicable a visualizaciones de gráficos)

Haga clic y arrastre para seleccionar el rango de tiempo en la visualización que desea ver.

====== Actualizar el tablero

Haga clic en el icono *Actualizar tablero* para ejecutar inmediatamente todas las consultas en el tablero y actualizar las visualizaciones. Grafana cancela cualquier solicitud pendiente cuando se activa una nueva actualización.

De forma predeterminada, Grafana no actualiza automáticamente el tablero. Las consultas se ejecutan en su propio horario de acuerdo con la configuración del panel. Sin embargo, si desea actualizar periódicamente el tablero, haga clic en la flecha hacia abajo junto al icono *Actualizar tablero* y luego seleccione un intervalo de actualización.

===== Configuración de tiempo del tablero

La configuración de tiempo se guarda por tablero.

Para acceder a la configuración de tiempo del tablero, haga clic en el icono de *configuración del Tablero* (engranaje) en la parte superior de la pantalla. La configuración se encuentra en la sección *Opciones de tiempo* de la pestaña General.

* *Zona horaria:* especifique la zona horaria local del servicio o sistema que está supervisando. Esto puede resultar útil al monitorear un sistema o servicio que opera en varias zonas horarias.
** *Predeterminado:* se utiliza la zona horaria seleccionada predeterminada para el perfil de usuario, el equipo o la organización. Si no se especifica una zona horaria para el perfil de usuario, un equipo del que el usuario es miembro o la organización, entonces Grafana usa la hora del navegador local.
** *Hora local del navegador:* se utiliza la zona horaria configurada para el navegador del usuario de visualización. Esta suele ser la misma zona horaria que la configurada en la computadora.
** Zonas horarias estándar ISO 8601, incluido UTC.
* *Actualización automática:* personalice las opciones que se muestran por tiempo relativo y las opciones de actualización automática. Las entradas están separadas por comas y aceptan cualquier unidad de tiempo válida.
* *Ahora retrasa ahora:* anule el valor now introduciendo un retraso de tiempo. Por lo general, esta función se utiliza para adaptarse a retrasos conocidos en la agregación de datos para evitar valores nulos.
* *Ocultar selector de tiempo:* seleccione esta opción si no desea que Grafana muestre el selector de tiempo.

===== Anulaciones de tiempo del panel y cambio de tiempo

En las Opciones de consulta, puede anular el intervalo de tiempo relativo para paneles individuales, lo que hace que sean diferentes de lo que está seleccionado en el selector de tiempo del tablero en la parte superior derecha. Esto le permite mostrar métricas de diferentes períodos de tiempo o días al mismo tiempo.

===== Controle el rango de tiempo usando una URL

El rango de tiempo de un tablero se puede controlar proporcionando los siguientes parámetros de consulta en la URL del panel:

* from: define el límite inferior del rango de tiempo, especificado en ms epoch o tiempo relativo
* to: define el límite superior del rango de tiempo, especificado en ms epoch o tiempo relativo
* time y time.window: define un rango de tiempo desde time-time.window/2 hasta time+time.window/2. Ambos parámetros deben especificarse en ms. Por ejemplo ?time=1500000000000&time.window=10000 dará como resultado un rango de tiempo de 10s desde 1499999995000 a 1500000005000

=== Reportando

==== Reportando

La generación de informes le permite generar archivos PDF desde cualquiera de sus paneles y enviarlos a las partes interesadas según un cronograma.

image:extracted-media\media\image156.png[https://grafana.com/static/img/docs/enterprise/reports_list.png,width=624,height=207]

Los informes solo están disponibles en Grafana Enterprise, v6.4 o posterior. Para obtener más información, consulte Reportes en Grafana Enterprise.

=== Historial de versiones del tablero

==== Historial de versiones del tablero

Siempre que guarde una versión de su tablero, se guarda una copia de esa versión para que las versiones anteriores de su tablero nunca se pierdan. Una lista de estas versiones está disponible ingresando a la configuración del tablero y luego seleccionando "Versiones" en el menú del lado izquierdo.

image:extracted-media\media\image157.png[https://grafana.com/static/img/docs/v50/dashboard_versions_list.png,width=624,height=312]

La función de historial de versiones del tablero le permite comparar y restaurar versiones del tablero guardadas previamente.

===== Comparación de dos versiones de tablero

Para comparar dos versiones del tablero, seleccione las dos versiones de la lista que desea comparar. Una vez seleccionado, se podrá hacer clic en el botón "Comparar versiones". Haga clic en el botón para ver la diferencia entre las dos versiones.

image:extracted-media\media\image158.png[https://grafana.com/static/img/docs/v50/dashboard_versions_select.png,width=624,height=312]

Al hacer clic en el botón, accederá a la vista de diferencias. De forma predeterminada, verá un resumen textual de los cambios, como en la imagen a continuación.

image:extracted-media\media\image159.png[https://grafana.com/static/img/docs/v50/dashboard_versions_diff_basic.png,width=624,height=312]

Si desea ver las diferencias del JSON sin procesar que representa su tablero, también puede hacerlo haciendo clic en el botón "Ver diferencias JSON" en la parte inferior.

Si desea restaurar a la versión con la que se diferencia, puede hacerlo haciendo clic en el botón "Restaurar a la versión <x>" en la parte superior derecha.

===== Restaurar a una versión de tablero previamente guardada

Si necesita restaurar a una versión del tablero previamente guardada, puede hacerlo haciendo clic en el botón "Restaurar" a la derecha de una fila en la lista de versiones del tablero o haciendo clic en el botón "Restaurar a la versión <x>" que aparece en la vista de diferencias. Al hacer clic en el botón, aparecerá la siguiente ventana emergente que le pedirá que confirme la restauración.

image:extracted-media\media\image160.png[https://grafana.com/static/img/docs/v50/dashboard_versions_restore.png,width=624,height=312]

Después de restaurar a una versión anterior, se creará una nueva versión que contiene los mismos datos exactos que la versión anterior, solo que con un número de versión diferente. Esto se indica en la “columna Notas” de la fila de la nueva versión del tablero. Esto se hace simplemente para garantizar que las versiones anteriores del tablero no se vean afectadas por el cambio.

=== Exportar e importar

==== Exportar e importar

Los Tableros de Grafana se pueden exportar e importar fácilmente, ya sea desde la interfaz de usuario o desde la API HTTP.

===== Exportar un tablero

Los tableros se exportan en formato Grafana JSON y contienen todo lo que necesita (diseño, variables, estilos, fuentes de datos, consultas, etc.) para importar el tablero en un momento posterior.

Se accede a la función de exportación en la ventana de compartir que se abre haciendo clic en el botón de compartir en el menú del tablero.

image:extracted-media\media\image161.png[https://grafana.com/static/img/docs/export/export-modal.png,width=624,height=210]

====== Hacer un tablero portátil

Si desea exportar un tablero para que otros lo usen, podría ser una buena idea agregar variables de plantilla para cosas como un prefijo de métrica (use una variable constante) y el nombre del servidor.

Una variable de plantilla del tipo Constant se ocultará automáticamente en el tablero y también se agregará como entrada requerida cuando se importe el tablero.

===== Importar un tablero

Para importar un tablero, haga clic en el icono + en el menú lateral y luego haga clic en *Importar*.

image:extracted-media\media\image162.png[https://grafana.com/static/img/docs/v70/import_step1.png,width=624,height=403]

Desde aquí puede cargar un archivo JSON de tablero, pegar una URL de tablero de Grafana.com o pegar el texto JSON del tablero directamente en el área de texto.

En el paso 2 del proceso de importación, Grafana le permitirá cambiar el nombre del tablero, elegir qué fuente de datos desea que use el tablero y especificar cualquier prefijo de métrica (si el tablero usa alguno).

===== Descubra tableros en Grafana.com

Encuentre tableros para aplicaciones de servidor comunes en Grafana.com/dashboards.

image:extracted-media\media\image163.png[https://grafana.com/static/img/docs/v50/gcom_dashboard_list.png,width=624,height=361]

===== Importar y compartir con Grafana 2.xo 3.0

Los tableros de Grafana.com utilizan una nueva función en Grafana 3.1 que permite que el proceso de importación actualice cada panel para que utilicen una fuente de datos de su elección. Si está ejecutando una versión de Grafana anterior a la 3.1, es posible que deba realizar algunos pasos manuales antes o después de la importación para que el tablero funcione correctamente.

Los tableros exportados desde Grafana 3.1+ tienen una nueva sección json __inputs que define qué fuentes de datos y prefijos métricos usa el tablero.

Ejemplo:

\{

"__inputs": [

\{

"name": "DS_GRAPHITE",

"label": "graphite",

"description": "",

"type": "datasource",

"pluginId": "graphite",

"pluginName": "Graphite"

},

\{

"name": "VAR_PREFIX",

"type": "constant",

"label": "prefix",

"value": "collectd",

"description": ""

}

]

}

Luego, se hace referencia a estos en los paneles del tablero de la siguiente manera:

\{

"rows": [

\{

"panels": [

\{

"type": "graph",

"datasource": "$\{DS_GRAPHITE}"

}

]

}

]

}

Estas entradas y su uso en las propiedades de la fuente de datos se agregan automáticamente durante la exportación en Grafana 3.1. Si ejecuta una versión anterior de Grafana y desea compartir un tablero en Grafana.com, debe agregar manualmente las entradas y crear plantillas de las propiedades de la fuente de datos como se indicó anteriormente.

Si desea importar un tablero de Grafana.com a una versión anterior de Grafana, puede importarlo como de costumbre y luego actualizar la opción de fuente de datos en la pestaña de métricas para que el panel utilice la fuente de datos correcta. Otra alternativa es abrir el archivo json en un editor de texto y actualizar las propiedades de la fuente de datos a un valor que coincida con el nombre de su fuente de datos.

===== Nota

En Grafana v5.3.4 +, el modal de exportación tiene una nueva casilla de verificación para compartir para uso externo (otras instancias). Si la casilla de verificación no está marcada, la sección __inputs no se incluirá en el archivo JSON exportado.

=== Modelo JSON

==== Modelo JSON de tablero

Un tablero en Grafana está representado por un objeto JSON, que almacena metadatos de su tablero. Los metadatos del tablero incluyen propiedades del tablero, metadatos de paneles, variables de plantilla, consultas de panel, etc.

Para ver el JSON de un panel:

[arabic]
. {blank}
+
____
Navegue a un tablero.
____
. {blank}
+
____
En el menú de navegación superior, haga clic en el icono de *Configuración del tablero* (engranaje).
____
. {blank}
+
____
Haga clic en *Modelo JSON*.
____

===== Campos JSON

Cuando un usuario crea un tablero nuevo, se inicializa un objeto JSON de tablero nuevo con los siguientes campos:

*Nota:* En el siguiente JSON, id se muestra como nulo, que es el valor predeterminado que se le asigna hasta que se guarda un tablero. Una vez que se guarda un tablero, se asigna un valor entero al campo id.

\{

"id": null,

"uid": "cLV5GDCkz",

"title": "New dashboard",

"tags": [],

"style": "dark",

"timezone": "browser",

"editable": true,

"hideControls": false,

"graphTooltip": 1,

"panels": [],

"time": \{

"from": "now-6h",

"to": "now"

},

"timepicker": \{

"time_options": [],

"refresh_intervals": []

},

"templating": \{

"list": []

},

"annotations": \{

"list": []

},

"refresh": "5s",

"schemaVersion": 17,

"version": 0,

"links": []

}

Cada campo del JSON del tablero se explica a continuación con su uso:

[cols=",",options="header",]
|===
|Nombre |Uso
|*id* |identificador numérico único para el tablero. (generado por la base de datos)
|*uid* |identificador de tablero único que puede ser generado por cualquier persona. cadena (8-40)
|*title* |título actual del tablero
|*tags* |etiquetas asociadas con el tablero, una matriz de cadenas
|*style* |tema del tablero, es decir, oscuro o claro
|*timezone* |zona horaria del tablero, es decir, utc o browser
|*editable* |si un tablero es editable o no
|*graphTooltip* |0 para ninguna cruz compartida o información sobre herramientas (predeterminado), 1 para cruz compartida, 2 para cruz compartida E información sobre herramientas compartida
|*time* |intervalo de tiempo para el tablero, es decir, últimas 6 horas, últimos 7 días, etc.
|*timepicker* |metadatos de selector de tiempo, consulte la sección de selector de tiempo para obtener más detalles
|*templating* |metadatos de plantillas, consulte la sección de plantillas para obtener más detalles
|*annotations* |metadatos de anotaciones, consulte la sección de anotaciones para obtener más detalles
|*refresh* |el intervalo de actualización automática
|*schemaVersion* |versión del esquema JSON (int), que se incrementa cada vez que una actualización de Grafana trae cambios a dicho esquema
|*version* |versión del tablero (int), que se incrementa cada vez que se actualiza el tablero
|*panels* |Matriz de paneles, consulte los detalles a continuación.
|===

===== Paneles

Los paneles son los componentes básicos de un tablero. Consiste en consultas de fuentes de datos, tipo de gráficos, alias, etc. El panel JSON consiste en una matriz de objetos JSON, cada uno de los cuales representa un panel diferente. La mayoría de los campos son comunes para todos los paneles, pero algunos campos dependen del tipo de panel. A continuación se muestra un ejemplo de panel JSON de un panel de texto.

"panels": [

\{

"type": "text",

"title": "Panel Title",

"gridPos": \{

"x": 0,

"y": 0,

"w": 12,

"h": 9

},

"id": 4,

"mode": "markdown",

"content": "/* title"

}

====== Tamaño y posición del panel

La propiedad gridPos describe el tamaño y la posición del panel en coordenadas de cuadrícula.

* w 1-24 (el ancho del tablero se divide en 24 columnas)
* h En unidades de altura de cuadrícula, cada una representa 30 píxeles.
* x La posición x, en la misma unidad que w.
* y La posición y, en la misma unidad que h.

La cuadrícula tiene una gravedad negativa que mueve los paneles hacia arriba si hay un espacio vacío encima de un panel.

====== timepicker (selector de tiempo)

"timepicker": \{

"collapse": false,

"enable": true,

"notice": false,

"now": true,

"refresh_intervals": [

"5s",

"10s",

"30s",

"1m",

"5m",

"15m",

"30m",

"1h",

"2h",

"1d"

],

"status": "Stable",

"type": "timepicker"

}

El uso de los campos se explica a continuación:

[cols=",",options="header",]
|===
|Nombre |Uso
|*collapse* |si el selector de tiempo está colapsado o no
|*enable* |si el selector de tiempo está habilitado o no
|*notice* |TODO
|*now* |TODO
|*refresh_intervals* |TODO
|*status* |TODO
|*type* |TODO
|===

====== templating (plantillas)

El campo templating contiene una matriz de variables de plantilla con sus valores guardados junto con algunos otros metadatos, por ejemplo:

"templating": \{

"enable": true,

"list": [

\{

"allFormat": "wildcard",

"current": \{

"tags": [],

"text": "prod",

"value": "prod"

},

"datasource": null,

"includeAll": true,

"name": "env",

"options": [

\{

"selected": false,

"text": "All",

"value": "*"

},

\{

"selected": false,

"text": "stage",

"value": "stage"

},

\{

"selected": false,

"text": "test",

"value": "test"

}

],

"query": "tag_values(cpu.utilization.average,env)",

"refresh": false,

"type": "query"

},

\{

"allFormat": "wildcard",

"current": \{

"text": "apache",

"value": "apache"

},

"datasource": null,

"includeAll": false,

"multi": false,

"multiFormat": "glob",

"name": "app",

"options": [

\{

"selected": true,

"text": "tomcat",

"value": "tomcat"

},

\{

"selected": false,

"text": "cassandra",

"value": "cassandra"

}

],

"query": "tag_values(cpu.utilization.average,app)",

"refresh": false,

"regex": "",

"type": "query"

}

]

}

El uso de los campos mencionados anteriormente en la sección de plantillas se explica a continuación:

[cols=",",options="header",]
|===
|Nombre |Uso
|*enable* |si la creación de plantillas está habilitada o no
|*list* |una matriz de objetos, cada uno representando una variable de plantilla
|*allFormat* |formato para usar al obtener todos los valores de la fuente de datos, por ejemplo: wildcard, glob, regex, pipe, etc.
|*current* |muestra el texto/valor de la variable seleccionada en el tablero actual
|*data source* |muestra la fuente de datos para las variables
|*includeAll* |si todas las opciones de valor están disponibles o no
|*multi* |si se pueden seleccionar o no varios valores de la lista de valores de variable
|*multiFormat* |para usar mientras se obtienen series temporales de la fuente de datos
|*name* |nombre de la variable
|*options* |matriz de de pares de variables valores/texto disponibles para su selección en el tablero
|*query* |consulta de fuente de datos utilizada para obtener valores para una variable
|*refresh* |TODO
|*regex* |TODO
|*type* |tipo de variable, es decir, custom, query o interval
|===

== Compartir

=== Compartir tableros y paneles

Grafana le permite compartir tableros y paneles con otros usuarios dentro de una organización y, en determinadas situaciones, públicamente en la Web. Puede compartir usando:

* Un enlace directo
* Una captura instantánea
* Un enlace integrado (solo para paneles)
* Un enlace de exportación (solo para tableros)

Consulte Compartir un tablero y Compartir un panel para obtener más información.

Debe tener un permiso de espectador autorizado para ver una imagen representada por un enlace directo.

También se requiere el mismo permiso para ver enlaces incrustados a menos que tenga habilitado el permiso de acceso anónimo para su instancia de Grafana. Puede habilitar el acceso anónimo usted mismo en Grafana OSS. Para habilitar el acceso anónimo en una instancia de Grafana Cloud, comuníquese con Atención al cliente.

Cuando comparte un panel o tablero como una instantánea, una instantánea (del panel o del tablero en ese momento) está disponible públicamente en la web. Cualquiera que tenga un enlace puede acceder a él. Dado que las instantáneas no necesitan autorización para verlas, Grafana elimina la información relacionada con la cuenta de la que provienen, así como cualquier dato confidencial de la instantánea.

=== Compartir un tablero

==== Compartir un tablero

Puede compartir un tablero como enlace directo o como instantánea. También puede exportar un tablero. Si ha realizado cambios en el tablero, verifique que esos cambios se guarden antes de compartirlos.

Para compartir un tablero:

[arabic]
. Vaya a la página de inicio de su instancia de Grafana.
. Haga clic en el icono de compartir en la navegación superior. Se abre el cuadro de diálogo para compartir y muestra la pestaña Vínculo.

image:extracted-media\media\image164.png[Dashboard share direct link,width=624,height=318]

===== Usar enlace directo

La pestaña Enlace tiene el rango de tiempo actual, las variables de plantilla y el tema seleccionado de forma predeterminada. Opcionalmente, puede seleccionar una URL abreviada para compartir.

Para compartir un enlace directo:

[arabic]
. Haga clic en *Copiar*. Esto copia la URL predeterminada o abreviada en el portapapeles.
. Envíe la URL copiada a un usuario de Grafana con autorización para ver el enlace.

===== Publica una instantánea

Una instantánea del tablero comparte públicamente un tablero interactivo. Grafana elimina los datos confidenciales como consultas (métricas, plantillas y anotaciones) y enlaces de paneles, dejando solo los datos de métricas visibles y los nombres de las series incrustados en su tablero. Cualquiera que tenga el enlace puede acceder a las instantáneas del tablero.

Puede publicar instantáneas en su instancia local o en snapshot.raintank.io. Este último es un servicio gratuito proporcionado por Grafana Labs que le permite publicar instantáneas del tablero en una instancia externa de Grafana. Se siguen aplicando las mismas reglas: cualquiera que tenga el enlace puede verlo. Puede establecer un tiempo de vencimiento si desea que se elimine la instantánea después de un cierto período de tiempo.

image:extracted-media\media\image165.png[Dashboard share snapshot,width=624,height=487]

Para publicar una instantánea:

[arabic]
. Haga clic en *Instantánea local* o *Publicar en snapshot.raintank.io*. Esto genera el enlace de la instantánea.
. Copie el enlace de la instantánea y compártalo dentro de su organización o públicamente en la web.

En caso de que haya creado una instantánea por error, haga clic en *eliminar instantánea* para eliminar la instantánea de su instancia de Grafana.

===== Exportación de tablero

Los trableros de Grafana se pueden exportar e importar fácilmente. Para obtener más información, consulte Exportar e importar tablero.

image:extracted-media\media\image166.png[Export,width=624,height=166]

=== Compartir un panel

==== Compartir un panel

Puede compartir un panel como un enlace directo, como una instantánea o como un enlace incrustado.

Para compartir un panel:

[arabic]
. Haga clic en el título de un panel para abrir el menú del panel.
. Haga clic en *Compartir*. Se abre el cuadro de diálogo para compartir y muestra la pestaña Vínculo.

image:extracted-media\media\image167.png[Panel share direct link,width=624,height=348]

===== Usar enlace directo

La pestaña Enlace tiene el rango de tiempo actual, las variables de plantilla y el tema seleccionado de forma predeterminada. Opcionalmente, puede habilitar una URL abreviada para compartir.

Para compartir un enlace directo:

[arabic]
. Haga clic en *Copiar*. Esto copia la URL predeterminada o abreviada en el portapapeles.
. Envíe la URL copiada a un usuario de Grafana con autorización para ver el enlace.
. Opcionalmente, también puede hacer clic en *Imagen renderizada de enlace directo* para compartir una imagen del panel.

Para obtener más información, consulte el tema Procesamiento de imágenes.

Aquí hay un ejemplo de un enlace a un PNG renderizado del lado del servidor:

https://play.grafana.org/d/000000012/grafana-play-home?orgId=1&from=1568719680173&to=1568726880174&panelId=4&fullscreen

====== Parámetros de cadena de consulta para imágenes renderizadas del lado del servidor

* *width:* ancho en píxeles. El valor predeterminado es 800.
* *height:* altura en píxeles. El valor predeterminado es 400.
* *tz:* zona horaria en el formato UTC%2BHH%3AMM donde HH y MM se compensan en horas y minutos después de UTC
* *timeout:* número de segundos. El tiempo de espera se puede aumentar si la consulta del panel necesita más de los 30 segundos predeterminados.
* *scale:* valor numérico para configurar el factor de escala del dispositivo. El valor predeterminado es 1. Utilice un valor más alto para producir imágenes más detalladas (DPI más alto). Compatible con Grafana v7.0 +.

===== Publicar instantánea

Una instantánea del panel comparte un panel interactivo públicamente. Grafana elimina los datos confidenciales dejando solo los datos de métricas visibles y los nombres de las series incrustados en su tablero. Cualquiera que tenga el enlace puede acceder a las instantáneas del panel.

Puede publicar instantáneas en su instancia local o en snapshot.raintank.io. Este último es un servicio gratuito proporcionado por Raintank, que le permite publicar instantáneas del tablero en una instancia externa de Grafana. Opcionalmente, puede establecer un tiempo de vencimiento si desea que la instantánea se elimine después de un cierto período de tiempo.

image:extracted-media\media\image168.png[Panel share snapshot,width=624,height=475]

Para publicar una instantánea:

[arabic]
. En el cuadro de diálogo Compartir Panel, haga clic en *Instantánea* para abrir la pestaña.
. Haga clic en *Instantánea local* o *Publicar en snapshot.raintank.io*. Esto genera el enlace de la instantánea.
. Copie el enlace de la instantánea y compártalo dentro de su organización o públicamente en la web.

Si creó una instantánea por error, haga clic en *eliminar instantánea* para eliminar la instantánea de su instancia de Grafana.

===== Insertar panel

Puede incrustar un panel mediante un iframe en otro sitio web. A menos que se habilite el permiso de acceso anónimo, el espectador debe iniciar sesión en Grafana para ver el gráfico.

image:extracted-media\media\image169.png[Panel share embed,width=624,height=349]

A continuación, se muestra un ejemplo del código HTML:

<iframe src="https://snapshot.raintank.io/dashboard-solo/snapshot/y7zwi2bZ7FcoTlB93WN7yWO4aMiz3pZb?from=1493369923321&to=1493377123321&panelId=4" width="650" height="300" frameborder="0"></iframe>

El resultado es un gráfico Grafana interactivo incrustado en un iframe:

image:extracted-media\media\image170.png[image,width=624,height=290]

== Explorar

Explorar

La interfaz de usuario del tablero de Grafana tiene que ver con la creación de tableros para la visualización. Explorar elimina el tablero y las opciones del panel para que pueda concentrarse en la consulta. Le ayuda a iterar hasta que tenga una consulta que funcione y luego piense en la creación de un tablero.

Si solo desea explorar sus datos y no desea crear un tablero, Explorar lo hace mucho más fácil. Si su fuente de datos admite datos de tablas y gráficos, Explorar muestra los resultados tanto en forma de gráfico como de tabla. Esto le permite ver tendencias en los datos y más detalles al mismo tiempo. Ver también:

* Gestión de consultas en Explorar
* Integración de registros en Explorar
* Trace la integración en Explorar

=== Empiece a explorar

Para acceder a Explorar, debe tener un rol de editor o administrador. Consulte Roles de la organización para obtener más información sobre a qué tiene acceso cada rol.

Para acceder a Explorar:

[arabic]
. {blank}
+
____
Haga clic en el icono Explorar en la barra de menú.
____

____
image:extracted-media\media\image171.png[Screenshot of the new Explore Icon,width=146,height=271]
____

[arabic, start=2]
. {blank}
+
____
Se abre una pestaña Explorar vacía.
____

Alternativamente, para comenzar con una consulta existente en un panel, elija la opción Explorar en el menú Panel. Esto abre una pestaña Explorar con la consulta del panel y le permite modificar o iterar en la consulta fuera de su tablero.

image:extracted-media\media\image172.png[Screenshot of the new Explore option in the panel menu,width=624,height=213]

[arabic, start=3]
. {blank}
+
____
Elija su fuente de datos del menú desplegable en la parte superior izquierda. Prometheus tiene una implementación Explorar personalizada, las otras fuentes de datos usan su editor de consultas estándar.
____
. {blank}
+
____
En el campo de consulta, escriba su consulta para explorar sus datos. Hay tres botones al lado del campo de consulta, un botón para borrar (X), un botón para agregar consulta (+) y el botón para eliminar consulta (-). Al igual que el editor de consultas normal, puede agregar y eliminar varias consultas.
____

=== Dividir y comparar

La vista dividida proporciona una manera fácil de comparar gráficos y tablas uno al lado del otro o de mirar datos relacionados juntos en una página.

Para abrir la vista dividida:

[arabic]
. Haga clic en el botón dividir para duplicar la consulta actual y dividir la página en dos consultas en paralelo.

Es posible seleccionar otra fuente de datos para la nueva consulta que, por ejemplo, le permite comparar la misma consulta para dos servidores diferentes o comparar el entorno de ensayo con el entorno de producción.

image:extracted-media\media\image173.png[Screenshot of Explore option in the panel menu,width=624,height=292]

En la vista dividida, los selectores de tiempo de ambos paneles se pueden vincular (si cambia uno, el otro también se cambia) haciendo clic en uno de los botones de sincronización de tiempo adjuntos a los selectores de tiempo. La vinculación de selectores de tiempo ayuda a mantener sincronizadas las horas de inicio y finalización de las consultas de vista dividida. Garantiza que esté mirando el mismo intervalo de tiempo en ambos paneles divididos.

Para cerrar la consulta recién creada, haga clic en el botón Cerrar división.

=== Navegar entre Explorar y un tablero

Para ayudar a acelerar los flujos de trabajo que implican cambiar regularmente de Explorar a un tablero y viceversa, Grafana le brinda la capacidad de volver al tablero de origen después de navegar a Explorar desde el menú desplegable del panel.

Una vez que haya navegado a Explorar, debería ver un botón "Atrás" en la barra de herramientas Explorar. Simplemente haga clic en él para volver al tablero de origen. Para traer al tablero los cambios que realice en Explorar, haga clic en la flecha junto al botón para mostrar un elemento de menú "Volver al panel con cambios".

image:extracted-media\media\image174.png[Screenshot of the expanded explore return dropdown,width=328,height=67]

=== Compartir enlace acortado

*Nota:* Disponible en Grafana 7.3 y versiones posteriores.

La función Compartir enlace abreviado le permite crear URL más pequeñas y sencillas con el formato /goto/:uid en lugar de utilizar URL más largas con parámetros de consulta. Para crear un enlace abreviado, haga clic en la opción *Compartir* en la barra de herramientas Explorar. Cualquier enlace abreviado que nunca se utilice se eliminará automáticamente después de 7 días.

=== Gestión de consultas

==== Gestión de consultas en Explorar

Para ayudar con la depuración de consultas, Explorar le permite investigar solicitudes y respuestas de consultas, así como estadísticas de consultas, a través del inspector de Consultas. Esta funcionalidad es similar a la pestaña Estadísticas y la pestaña Consulta del inspector de paneles.

image:extracted-media\media\image175.png[Screenshot of the query inspector button in Explore,width=624,height=94]

===== Historial de consultas

El historial de consultas es una lista de consultas que ha utilizado en Explorar. El historial es local para su navegador y no se comparte. Para abrir e interactuar con su historial, haga clic en el botón *Historial de consultas* en Explorar.

====== Ver historial de consultas

El historial de consultas le permite ver el historial de sus consultas. Para cada consulta individual, puede:

* Ejecute una consulta.
* Cree y/o edite un comentario.
* Copie una consulta al portapapeles.
* Copie un enlace abreviado con la consulta en el portapapeles.
* Marque una consulta.

====== Gestionar consultas favoritas

Todas las consultas destacadas en la pestaña Historial de consultas se muestran en Destacadas. Esto le permite acceder a sus consultas favoritas más rápido y reutilizar estas consultas sin tener que escribirlas desde cero.

====== Ordenar historial de consultas

De forma predeterminada, el historial de consultas muestra las consultas más recientes. Puede ordenar su historial por fecha o por nombre de fuente de datos en orden ascendente o descendente.

[arabic]
. Haga clic en el campo *Ordenar consultas por*.
. Selecciona una de las siguientes opciones:
* La más reciente primero
* La más vieja primero
* Fuente de datos A-Z
* Fuente de datos Z-A

*Nota:* Si está en modo dividido, el modo de clasificación elegido se aplica solo al panel activo.

====== Filtrar historial de consultas

Filtrar el historial de consultas en la pestaña Historial de consultas y Destacados por nombre de fuente de datos:

[arabic]
. Haga clic en el campo *Filtrar consultas para fuentes de datos específicas*.
. Seleccione la fuente de datos por la que le gustaría filtrar su historial. Puede seleccionar varias fuentes de datos.

En la pestaña *Historial de consultas* también es posible filtrar las consultas por fecha usando el control deslizante:

[arabic]
. Utilice el control deslizante vertical para filtrar las consultas por fecha.
. Arrastrar el asa superior, ajusta la fecha de inicio.
. Arrastrando el asa superior, ajusta la fecha de finalización.

*Nota:* Si está en modo dividido, los filtros se aplican solo a su panel activo actualmente.

====== Buscar en el historial de consultas

Puede buscar en su historial entre consultas y comentarios. La búsqueda es posible para consultas en la pestaña Historial de consultas y la pestaña Destacados.

[arabic]
. Haga clic en el campo *Consultas de búsqueda*.
. Escriba el término que está buscando en el campo de búsqueda.

====== Configuración del historial de consultas

Puede personalizar el historial de consultas en la pestaña Configuración. Las opciones se describen en la tabla siguiente.

[cols=",",options="header",]
|===
|Configuración |Valor predeterminado
|Período de tiempo durante el cual Grafana guardará su historial de consultas |1 semana
|Cambiar la pestaña activa predeterminada |Pestaña Historial de consultas
|Mostrar solo consultas para la fuente de datos actualmente activa en Explorar |Verdadero
|Borrar historial de consultas |Elimina permanentemente todas las consultas almacenadas.
|===

*Nota:* La configuración del historial de consultas es global y se aplica a ambos paneles en modo dividido.

===== Funciones específicas de Prometheus

La primera versión de Explorar presenta una experiencia de consulta personalizada para Prometheus. Cuando se ejecuta una consulta, en realidad ejecuta dos consultas, una consulta normal de Prometheus para el gráfico y una consulta instantánea para la tabla. Una Consulta Instantánea devuelve el último valor para cada serie de tiempo que muestra un buen resumen de los datos que se muestran en el gráfico.

====== Explorador de métricas

En el lado izquierdo del campo de consulta, haga clic en *Métricas* para abrir el Explorador de Métricas. Esto muestra un menú jerárquico con métricas agrupadas por su prefijo. Por ejemplo, todas las métricas de Alertmanager se agrupan bajo el prefijo alertmanager. Este es un buen punto de partida si solo desea explorar qué métricas están disponibles.

image:extracted-media\media\image176.png[Screenshot of the new Explore option in the panel menu,width=624,height=247]

====== Campo de consulta

El campo Consulta admite el autocompletado para nombres de métricas, funciones y funciona casi de la misma manera que el editor de consultas estándar de Prometheus. Presione la tecla enter para ejecutar una consulta.

El menú de autocompletar se puede activar presionando Ctrl+Espacio. El menú Autocompletar contiene una nueva sección de Historial con una lista de consultas ejecutadas recientemente.

Las sugerencias pueden aparecer debajo del campo de consulta; haga clic en ellas para actualizar su consulta con el cambio sugerido.

[arabic]
. Para los contadores (métricas que aumentan monótonamente), se sugerirá una función de tasa.
. Para los cubos, se sugerirá una función de histograma.
. Para registrar reglas, es posible expandir las reglas.

====== Filtros de tabla

Haga clic en el botón de filtro en la columna "etiqueta" de un panel Tabla para agregar filtros a la expresión de la consulta. También puede agregar filtros para múltiples consultas; el filtro se agrega para todas las consultas.

=== Registros en Explorar

==== Registros en Explorar

Junto con las métricas, Explorar le permite investigar sus registros en las siguientes fuentes de datos:

* Elasticsearch
* InfluxDB
* Loki

Durante el monitoreo de la infraestructura y la respuesta a incidentes, puede profundizar en las métricas y los registros para encontrar la causa. Explore también le permite correlacionar métricas y registros al verlos uno al lado del otro. Esto crea un nuevo flujo de trabajo de depuración:

[arabic]
. Reciba una alerta.
. Profundice y examine las métricas.
. Vuelva a profundizar y busque registros relacionados con la métrica y el intervalo de tiempo (y, en el futuro, seguimientos distribuidos).

===== Visualización de registros

Los resultados de las consultas de registros se muestran como histogramas en el gráfico y los registros individuales se muestran a continuación. Si la fuente de datos no envía datos de histograma para el rango de tiempo solicitado, el modelo de registros calcula una serie de tiempo basada en los recuentos de filas de registros agrupados por un intervalo de tiempo calculado automáticamente y el inicio del histograma está anclado por la marca de tiempo de la primera fila de registros. del resultado. El final de la serie temporal está anclado al rango *Hasta* del selector de tiempo.

====== Nivel de registro

Para los registros donde se especifica una etiqueta de *nivel*, usamos el valor de la etiqueta para determinar el nivel del registro y actualizar el color en consecuencia. Si el registro no tiene una etiqueta de nivel especificada, analizamos el registro para averiguar si su contenido coincide con alguna de las expresiones admitidas (consulte a continuación para obtener más información). El nivel de registro siempre está determinado por la primera coincidencia. En caso de que Grafana no pueda determinar un nivel de registro, se visualizará con un nivel de registro *desconocido*.

*Niveles de registro admitidos y mapeo de abreviaturas y expresiones de nivel de registro:*

[cols=",,",options="header",]
|===
|Expresiones admitidas |Nivel de registro |Color
|emerg |crítico |púrpura
|fatal |crítico |púrpura
|alert |crítica |púrpura
|crit |crítico |púrpura
|critical |crítico |púrpura
|err |error |rojo
|eror |error |rojo
|error |error |rojo
|warn |advertencia |amarillo
|warning |advertencia |amarillo
|info |info |verde
|information |información |verde
|notice |información |verde
|dbug |depuración |azul
|debug |depurar |azul
|trace |traza |azul claro
|* |gris |desconocido
|===

===== Opciones de visualización

Puede personalizar cómo se muestran los registros y seleccionar qué columnas se muestran.

====== Hora

Muestra u oculta la columna de tiempo. Esta es la marca de tiempo asociada con la línea de registro según lo informado desde la fuente de datos.

====== Etiquetas únicas

Muestra u oculta la columna de etiquetas únicas que incluye solo etiquetas no comunes. Todas las etiquetas comunes se muestran arriba.

====== Envolver líneas

Establezca esto en True si desea que la pantalla utilice el ajuste de línea. Si se establece en False, resultará en un desplazamiento horizontal.

====== Deduplicación

Los datos de registro pueden ser muy repetitivos y Explorar puede ayudar al ocultar líneas de registro duplicadas. Hay algunos algoritmos de deduplicación diferentes que puede utilizar:

* *Exacto:* las coincidencias exactas se realizan en toda la línea, excepto en los campos de fecha.
* *Números:* coincidencias en la línea después de eliminar números, como duraciones, direcciones IP, etc.
* *Firma:* la deduplicación más agresiva, elimina todas las letras y números y coincide con el espacio en blanco y la puntuación restante.

====== Voltear el orden de los resultados

Puede cambiar el orden de los registros recibidos del orden descendente predeterminado (el más reciente primero) al orden ascendente (el más antiguo primero).

===== Etiquetas y campos detectados

Cada fila de registro tiene un área extensible con sus etiquetas y campos detectados, para una interacción más robusta. Para todas las etiquetas, hemos agregado la capacidad de filtrar (filtro positivo) y filtrar (filtro negativo) las etiquetas seleccionadas. Cada campo o etiqueta también tiene un icono de estadísticas para mostrar estadísticas ad-hoc en relación con todos los registros mostrados.

====== Vínculos de campos derivados

Al utilizar los campos derivados, puede convertir cualquier parte de un mensaje de registro en un enlace interno o externo. El enlace creado es visible como un botón junto al campo Detectado en la vista Detalles del registro.

image:extracted-media\media\image27.png[Detected fields link in Explore,width=624,height=239]

====== Alternar campos detectados

*Nota:* Disponible en Grafana 7.2 y versiones posteriores.

Si sus registros están estructurados en json o logfmt, puede mostrar u ocultar los campos detectados. Expanda una línea de registro y luego haga clic en el icono del ojo para mostrar u ocultar campos.

image:extracted-media\media\image177.gif[Toggling detected fields in Explore,width=624,height=351]

===== Características específicas de Loki

Como se mencionó, una de las integraciones de registros es para el nuevo sistema de agregación de registros de código abierto de Grafana Labs - Loki. Loki está diseñado para ser muy rentable, ya que no indexa el contenido de los registros, sino un conjunto de etiquetas para cada flujo de registros. Los registros de Loki se consultan de forma similar a la consulta con selectores de etiquetas en Prometheus. Utiliza etiquetas para agrupar los flujos de registros que se pueden hacer para que coincidan con sus etiquetas de Prometheus. Para obtener más información sobre Grafana Loki, consulte Grafana Loki o la variante alojada de Grafana Labs: Grafana Cloud Logs.

Para obtener más información, consulte la documentación de la fuente de datos de Loki sobre cómo consultar datos de registro.

====== Cambiar de métricas a registros

Si cambia de una consulta de Prometheus a una consulta de registros (puede hacer una división primero para tener sus métricas y registros uno al lado del otro), entonces mantendrá las etiquetas de su consulta que existen en los registros y las utilizará para consultar los flujos de registro. Por ejemplo, la siguiente consulta de Prometheus:

grafana_alerting_active_alerts\{job="grafana"}

después de cambiar a la fuente de datos de Registros, la consulta cambia a:

\{job="grafana"}

Esto devolverá una parte de los registros en el rango de tiempo seleccionado que se pueden buscar por texto.

====== Seguimiento en vivo

Utilice la función de seguimiento en vivo para ver registros en tiempo real en fuentes de datos compatibles.

Haga clic en el botón *En vivo* en la barra de herramientas Explorar para cambiar a la vista de seguimiento en vivo.

Mientras esté en la vista Seguimiento en vivo, los nuevos registros vendrán desde la parte inferior de la pantalla y tendrán un fondo de contraste que se desvanecerá para que pueda realizar un seguimiento de las novedades. Haga clic en el botón *Pausa* o desplácese por la vista de registros para pausar el seguimiento en vivo y explorar registros anteriores sin interrupción. Haga clic en el botón *Reanudar* para reanudar el seguimiento en vivo o haga clic en el botón *Detener* para salir del seguimiento en vivo y volver a la vista de exploración estándar.

image:extracted-media\media\image178.gif[Explore Live tailing in action,width=624,height=436]

=== Rastreo en Explorar

==== Rastreo en Explore

Explore le permite visualizar los rastros de las fuentes de datos de rastreo. Está disponible en Grafana v7.0 +.

Las fuentes de datos admitidas son:

* Jaeger
* Tempo
* Radiografía
* Zipkin

Para obtener información sobre cómo configurar consultas para las fuentes de datos enumeradas anteriormente, consulte la documentación de la fuente de datos específica.

image:extracted-media\media\image179.png[Screenshot of the trace view,width=624,height=192]

===== Encabezado

image:extracted-media\media\image180.png[Screenshot of the trace view header,width=624,height=66]

* Título del encabezado: muestra el nombre del intervalo raíz y el ID de seguimiento.
* Buscar: resalta los intervalos que contienen el texto buscado.
* Metadatos: varios metadatos sobre el seguimiento.

===== Minimapa

image:extracted-media\media\image181.png[Screenshot of the trace view minimap,width=624,height=69]

Muestra la vista condensada o la línea de tiempo de seguimiento. Arrastre el mouse sobre el minimapa para hacer zoom en un rango de tiempo más pequeño. El zoom también actualizará la línea de tiempo principal, por lo que es fácil ver intervalos más cortos. Al pasar el cursor sobre el minimapa, cuando se hace zoom, se mostrará el botón Restablecer selección que restablece el zoom.

===== Linea de tiempo

image:extracted-media\media\image182.png[Screenshot of the trace view timeline,width=624,height=149]

Muestra la lista de tramos dentro del seguimiento. Cada fila de tramo consta de estos componentes:

* Botón Expandir hijos: expande o contrae todos los intervalos secundarios del intervalo seleccionado.
* Nombre del servicio: nombre del servicio que registró el intervalo.
* Nombre de la operación: nombre de la operación que representa este intervalo.
* Barra de duración del intervalo: representación visual de la duración de la operación dentro del seguimiento.

Al hacer clic en cualquier parte de la fila del intervalo, se muestran los detalles del intervalo.

===== Detalles del tramo

image:extracted-media\media\image183.png[Screenshot of the trace view span details,width=624,height=311]

* Nombre de la operación
* Metadatos de extensión
* Etiquetas: cualquier etiqueta asociada con este intervalo.
* Metadatos del proceso: metadatos sobre el proceso que registró este intervalo.
* Registros: lista de registros registrados por este intervalo y valores clave asociados. En el caso de la sección de registros de Zipkin, se muestran las anotaciones de Zipkin.

===== Seguimiento de registros

*Nota:* Disponible en Grafana 7.4 y versiones posteriores.

Puede navegar desde un tramo en una vista de seguimiento directamente a los registros relevantes para ese tramo. Esto está disponible para las fuentes de datos Tempo, Jaeger y Zipkin en este momento. su documentación relevante para obtener instrucciones sobre cómo configurar esta función.

image:extracted-media\media\image184.png[Screenshot of the trace view in Explore with icon next to the spans,width=624,height=385]

Haga clic en el icono del documento para abrir una vista dividida en Explorar con la fuente de datos configurada y consultar los registros relevantes para el intervalo.

===== API de datos

Esta visualización necesita una forma específica de los datos que se devolverán desde la fuente de datos para mostrarlos correctamente.

La fuente de datos debe devolver el marco de datos y establecer frame.meta.preferredVisualisationType = 'trace'.

====== Estructura del marco de datos

Campos requeridos:

[cols=",,",options="header",]
|===
|Nombre de campo |Tipo |Descripción
|traceID |cadena |Identificador del seguimiento completo. Debe haber solo un rastro en el marco de datos.
|spanID |cadena |Identificador del intervalo actual. Los SpanID deben ser únicos por seguimiento.
|parentSpanID |cadena |SpanID del intervalo principal para crear una relación principal secundaria en la vista de seguimiento. Puede ser indefinido para el intervalo raíz sin padre.
|serviceName |cadena |Nombre del servicio del que forma parte este intervalo.
|serviceTags |TraceKeyValuePair [] |Lista de etiquetas relevantes para el servicio.
|startTime |número |Hora de inicio del intervalo en milisegundos de tiempo de época.
|duration |número |Duración del intervalo en milisegundos.
|===

Campos opcionales:

[cols=",,",options="header",]
|===
|Nombre de campo |Tipo |Descripción
|logs |TraceLog [] |Lista de registros asociados con el intervalo actual.
|tags |TraceKeyValuePair [] |Lista de etiquetas asociadas con el intervalo actual.
|warnings |cadena[] |Lista de advertencias asociadas con el intervalo actual.
|stackTraces |cadena[] |Lista de seguimientos de pila asociados con el intervalo actual.
|errorIconColor |cadena |Color del icono de error en caso de que el intervalo esté etiquetado con error: true.
|===

Para obtener detalles sobre los tipos, consulte TraceSpanRow, TraceKeyValuePair y TraceLog

== Alertas

=== Resumen de alertas

Las alertas le permiten identificar problemas en su sistema momentos después de que ocurran. Al identificar rápidamente los cambios no deseados en su sistema, puede minimizar las interrupciones en sus servicios.

Las alertas constan de dos partes:

* Reglas de alerta: cuando se activa la alerta. Las reglas de alerta están definidas por una o más condiciones que Grafana evalúa periódicamente.
* Canal de notificación: cómo se envía la alerta. Cuando se cumplen las condiciones de una regla de alerta, Grafana notifica a los canales configurados para esa alerta.

Actualmente, solo la visualización del panel de gráficos admite alertas.

==== Tareas de alerta

Puede realizar las siguientes tareas para las alertas:

* Agregar o editar un canal de notificación de alerta
* Crea una regla de alerta
* Ver las reglas de alerta existentes y su estado actual
* Probar las reglas de alerta y solucionar problemas

==== Agrupación

Actualmente, las alertas admiten una forma limitada de alta disponibilidad. Desde la versión 4.2.0 de Grafana, las notificaciones de alerta se deducen cuando se ejecutan varios servidores. Esto significa que todas las alertas se ejecutan en todos los servidores, pero no se envían notificaciones de alerta duplicadas debido a la lógica de deduplicación. En el futuro se introducirá un equilibrio de carga adecuado de alertas.

==== Notificaciones

También puede configurar notificaciones de reglas de alerta junto con un mensaje detallado sobre la regla de alerta. El mensaje puede contener cualquier cosa: información sobre cómo podría resolver el problema, vínculo al runbook, etc.

Las notificaciones reales se configuran y comparten entre múltiples alertas.

==== Ejecución de alerta

Las reglas de alerta se evalúan en el backend de Grafana en un programador y un motor de ejecución de consultas que forma parte del núcleo de Grafana. Las reglas de alerta solo pueden consultar fuentes de datos de back-end con las alertas habilitadas. Tales fuentes de datos son:

* integradas o desarrolladas y mantenidas por grafana, como Graphite, Prometheus, Loki, InfluxDB, Elasticsearch, Google Cloud Monitoring, Cloudwatch, Azure Monitor, MySQL, PostgreSQL, MSSQL, OpenTSDB, Oracle y Azure Data Explorer
* cualquier fuente de datos de backend de la comunidad con alertas habilitadas (las propiedades de backend y de alerting se establecen en el plugin.json)

==== Métricas del motor de alertas

El motor de alertas publica algunas métricas internas sobre sí mismo. Puede leer más sobre cómo Grafana publica métricas internas.

[cols=",,",options="header",]
|===
|Descripción |Tipo |Nombre de métrica
|Número total de alertas |contador |alerting.active_alerts
|Resultado de ejecución de alerta |contador |alerting.result
|Notificaciones de contador enviadas |contador |alerting.notifications_sent
|Temporizador de ejecución de alerta |temporizador |alerting.execution_time
|===

=== Notificaciones de alerta

==== Notificaciones de alerta

Cuando una alerta cambia de estado, envía notificaciones. Cada regla de alerta puede tener varias notificaciones. Para agregar una notificación a una regla de alerta, primero debe agregar y configurar un canal de notification (puede ser correo electrónico, PagerDuty u otra integración).

Esto se hace desde la página de Canales de Notificación.

*Nota:* Las alertas solo están disponibles en Grafana v4.0 y superior.

===== Agregar un canal de notificación

[arabic]
. En la barra lateral de Grafana, pase el cursor sobre el icono de *Alerta* (campana) y luego haga clic en *Canales de notificación*.
. Haz clic en *Agregar canal*.
. Complete los campos o seleccione las opciones que se describen a continuación.

===== Nuevos campos de canal de notificación

====== Predeterminado (enviar en todas las alertas)

* *Nombre:* ingrese un nombre para este canal. Se mostrará cuando los usuarios agreguen notificaciones a las reglas de alerta.
* *Tipo:* seleccione el tipo de canal. Consulte la Lista de notificadores admitidos para obtener más detalles.
* *Predeterminado (enviar en todas las alertas):* cuando se selecciona, esta opción envía una notificación en este canal para todas las reglas de alerta.
* *Incluir imagen:* consulte Habilitar imágenes en notificaciones para obtener más detalles.
* *Desactivar mensaje de resolución:* cuando se selecciona, esta opción desactiva el mensaje de resolución [OK] que se envía cuando el estado de alerta vuelve a ser falso.
* *Enviar recordatorios:* cuando esta opción está marcada, se enviarán notificaciones adicionales (recordatorios) para las alertas activadas. Puede especificar la frecuencia con la que se deben enviar los recordatorios utilizando el número de segundos (s), minutos (m) u horas (h), por ejemplo, 30s, 3m, 5m o 1h.

*Importante:* los recordatorios de alerta se envían después de evaluar las reglas. Por lo tanto, nunca se puede enviar un recordatorio con más frecuencia que un intervalo de evaluación de regla de alerta configurado.

Estos ejemplos muestran con qué frecuencia y cuándo se envían recordatorios para una alerta activada.

[cols=",,",options="header",]
|===
|Intervalo de evaluación de la regla de alerta |Enviar recordatorios cada |Recordatorio enviado cada (después de la última notificación de alerta)
|30s |15s |~30 segundos
|1m |5m |~5 minutos
|5m |15m |~15 minutos
|6m |20m |~24 minutos
|1h |15m |~1 hora
|1h |2h |~2 horas
|===

====== Correo electrónico

Para habilitar las notificaciones por correo electrónico, debe configurar la configuración de SMTP en la configuración de Grafana. Las notificaciones por correo electrónico cargarán una imagen del gráfico de alerta en un destino de imagen externo, si está disponible, o un respaldo para adjuntar la imagen al correo electrónico. Tenga en cuenta que si utiliza el almacenamiento de imagen local, es posible que los servidores de correo electrónico y los clientes no puedan acceder a la imagen.

*Nota:* las variables de plantilla no se admiten en las alertas de correo electrónico.

[cols=",",options="header",]
|===
|Configuración |Descripción
|Correo electrónico único |Envíe un correo electrónico único a todos los destinatarios. Desactivado por defecto.
|Direcciones |Direcciones de correo electrónico de los destinatarios. Puede ingresar varias direcciones de correo electrónico con un ";" separador.
|===

====== Webhook

La notificación de webhook es una forma sencilla de enviar información sobre un cambio de estado a través de HTTP a un punto final personalizado. Con esta notificación, puede integrar Grafana en un sistema de su elección.

Ejemplo de cuerpo json:

\{

"dashboardId":1,

"evalMatches":[

\{

"value":1,

"metric":"Count",

"tags":\{}

}

],

"imageUrl":"https://grafana.com/assets/img/blog/mixed_styles.png",

"message":"Notification Message",

"orgId":1,

"panelId":2,

"ruleId":1,

"ruleName":"Panel Title alert",

"ruleUrl":"http://localhost:3000/d/hZ7BuVbWz/test-dashboard?fullscreen\u0026edit\u0026tab=alert\u0026panelId=2\u0026orgId=1",

"state":"alerting",

"tags":\{

"tag name":"tag value"

},

"title":"[Alerting] Panel Title alert"

}

* *state*: los valores posibles para el estado de alerta son: ok, paused, alerting, pending, no_data.

====== Prometheus Alertmanager

Alertmanager maneja las alertas enviadas por aplicaciones cliente como el servidor Prometheus o Grafana. Se encarga de deduplicarlos, agruparlos y enrutarlos al receptor correcto. Las notificaciones de Grafana se pueden enviar a Alertmanager a través de un simple webhook entrante. Consulte la documentación oficial de Prometheus Alertmanager para obtener información sobre la configuración.

*Precaución:* En caso de una configuración de alta disponibilidad, no equilibre la carga del tráfico entre Grafana y Alertmanagers para mantener la coherencia entre todas sus instancias de Alertmanager. En su lugar, apunte a Grafana a una lista de todos los administradores de alertas, enumerando sus URL separadas por comas en la configuración del canal de notificación.

===== Habilitar imágenes en notificaciones

Grafana puede representar el panel asociado con la regla de alerta como una imagen PNG e incluirlo en la notificación. Obtenga más información sobre los requisitos y cómo configurar la representación de imágenes.

Debe configurar un proveedor de almacenamiento de imágenes externo para recibir imágenes en notificaciones de alerta. Si su canal de notificación requiere que la imagen sea de acceso público (por ejemplo, Slack, PagerDuty), configure un proveedor que cargue la imagen en un almacén de imágenes remoto como Amazon S3, Webdav, Google Cloud Storage o Azure Blob Storage. De lo contrario, se puede utilizar el proveedor local para entregar la imagen directamente desde Grafana.

Los servicios de notificación que necesitan acceso a imágenes públicas están marcados como "solo externos".

===== Configure el enlace de regreso a Grafana desde notificaciones de alerta

Todas las notificaciones de alerta contienen un enlace a la alerta activada en la instancia de Grafana. Esta URL se basa en la configuración del dominio en Grafana.

===== Plantillas de notificación

*Nota:* La creación de plantillas de notificación de alerta solo está disponible en Grafana v7.4 y versiones posteriores.

La función de plantilla de notificación de alerta le permite tomar el valor de la etiqueta de una consulta de alerta e inyectarlo en las notificaciones de alerta.

=== Plantillas de notificación de alerta

==== Plantillas de notificación de alerta

Puede proporcionar información detallada para alertar a los destinatarios de las notificaciones inyectando datos de consulta de alerta en una notificación de alerta. Este tema explica cómo puede utilizar etiquetas de consulta de alerta en notificaciones de alerta.

Las etiquetas que existen a partir de la evaluación de la consulta de alerta se pueden utilizar en el nombre de la regla de alerta y en los campos del mensaje de notificación de alerta. Los datos de la etiqueta de alerta se inyectan en los campos de notificación cuando la alerta está en estado de alerta. Cuando hay varios valores únicos para la misma etiqueta, los valores están separados por comas.

Este tema explica cómo puede utilizar etiquetas de consulta de alerta en notificaciones de alerta.

===== Agregar datos de etiquetas de alerta a su notificación de alerta

[arabic]
. Navegue hasta el panel para el que desea agregar o editar una regla de alerta.
. Haga clic en el título del panel y luego en *Editar*.
. En la pestaña Alerta, haga clic en *Crear alerta*. Si ya existe una alerta para este panel, puede editar la alerta directamente.
. Consulte las etiquetas de consulta de alerta en el nombre de la regla de alerta y/o en el campo del mensaje de notificación de alerta utilizando la sintaxis $\{Label}.
. Haga clic en *Guardar* en la esquina superior derecha para guardar la regla de alerta y el tablero.

image:extracted-media\media\image185.png[Alerting notification template,width=624,height=539]

=== Crear alertas

==== Crear alertas

Las alertas de Grafana le permiten adjuntar reglas a los paneles de su tablero. Cuando guarda el tablero, Grafana extrae las reglas de alerta en un almacenamiento de reglas de alerta separado y las programa para su evaluación.

image:extracted-media\media\image186.gif[Alerting overview,width=624,height=475]

En la pestaña Alerta del panel de gráficos, puede configurar la frecuencia con la que se debe evaluar la regla de alerta y las condiciones que deben cumplirse para que la alerta cambie de estado y active sus notificaciones.

Actualmente, solo el panel de gráficos admite reglas de alerta.

===== Agregar o editar una regla de alerta

[arabic]
. Navegue hasta el panel para el que desea agregar o editar una regla de alerta, haga clic en el título y luego en *Editar*.
. En la pestaña Alerta, haga clic en *Crear alerta*. Si ya existe una alerta para este panel, puede editar los campos en la pestaña Alerta.
. Complete los campos. Las descripciones se enumeran a continuación en los Campos de reglas de alerta.
. Cuando haya terminado de escribir su regla, haga clic en *Guardar* en la esquina superior derecha para guardar la regla de alerta y el tablero.
. (Opcional pero recomendado) Haga clic en *Probar regla* para asegurarse de que la regla devuelva los resultados esperados.

===== Eliminar una alerta

Para eliminar una alerta, desplácese hasta la parte inferior de la alerta y luego haga clic en *Eliminar*.

===== Campos de reglas de alerta

Esta sección describe los campos que llena para crear una alerta.

====== Regla

* *Nombre:* ingrese un nombre descriptivo. El nombre se mostrará en la lista de reglas de alerta. Este campo admite plantillas.
* *Evaluar cada:* especifique la frecuencia con la que el programador debe evaluar la regla de alerta. Esto se conoce como _intervalo de evaluación_.
* *Por:* especifique cuánto tiempo necesita la consulta para violar los umbrales configurados antes de que se active la notificación de alerta.

Puede establecer un intervalo de evaluación mínimo en el campo de configuración alerting.min_interval_seconds, para establecer un tiempo mínimo entre evaluaciones. Consulte Configuración para obtener más información.

*Precaución:* No utilice For con el ajuste If no data o rall values are null establecido en No Data. La activación de No Data se activará instantáneamente y no se tendrá en cuenta For. Esto también puede provocar que no se envíe una notificación OK si la alerta cambia de No Data -> Pending -> OK.

Si una regla de alerta tiene configurado For y la consulta viola el umbral configurado, primero pasará de OK a Pending. Pasar de OK a Pending Grafana no enviará ninguna notificación. Una vez que la regla de alerta se haya activado durante más de un período de duración de For, cambiará a Alerting y enviará notificaciones de alerta.

Por lo general, siempre es una buena idea usar esta configuración, ya que a menudo es peor obtener un falso positivo que esperar unos minutos antes de que se active la notificación de alerta. Si Alert List o Alert list panels observará las alertas pendientes.

A continuación, puede ver una línea de tiempo de ejemplo de una alerta utilizando la configuración For. A las ~16:04, el estado de alerta cambia a Pending y después de 4 minutos cambia a Alerting, que es cuando se envían las notificaciones de alerta. Una vez que la serie vuelve a la normalidad, la regla de alerta vuelve a estar OK.

image:extracted-media\media\image187.png[Alerting For,width=624,height=179]

====== Condiciones

image:extracted-media\media\image188.png[Alerting Conditions,width=624,height=312]

Actualmente, el único tipo de condición que existe es una condición de Query que le permite especificar una letra de consulta, un rango de tiempo y una función de agregación.

======= Ejemplo de condición de consulta

avg() OF query(A, 15m, now) IS BELOW 14

* avg() Controla cómo se deben reducir los valores de *cada* serie a un valor que se pueda comparar con el umbral. Haga clic en la función para cambiarla a otra función de agregación.
* query (A, 15m, now) La letra define qué consulta ejecutar desde la pestaña *Métricas*. Los dos segundos parámetros definen el rango de tiempo, 15m, now significa 15 minutos atrás hasta ahora. También puede hacer 10m, now-2 para definir un rango de tiempo que será de hace 10 minutos a hace 2 minutos. Esto es útil si desea ignorar los últimos 2 minutos de datos.
* IS BELOW 14 Define el tipo de umbral y el valor del umbral. Puede hacer clic en IS BELOW para cambiar el tipo de umbral.

La consulta utilizada en una regla de alerta no puede contener variables de plantilla. Actualmente solo admitimos operadores AND y OR entre condiciones y se ejecutan en serie. Por ejemplo, tenemos 3 condiciones en el siguiente orden: condición: _condition:A(evaluates to: TRUE) OR condition:B(evaluates to: FALSE) AND condition:C(evaluates to: TRUE)_ por lo que el resultado se calculará como ((TRUE OR FALSE) AND TRUE) = TRUE.

Planeamos agregar otros tipos de condiciones en el futuro, como Other Alert, donde puede incluir el estado de otra alerta en sus condiciones y Time of Day.

======= Múltiples series

Si una consulta devuelve varias series, la función de agregación y la verificación de umbral se evaluarán para cada serie. Lo que Grafana no hace actualmente es rastrear el estado de la regla de alerta *por serie*. Esto tiene implicaciones que se detallan en el escenario siguiente.

* Condición de alerta con consulta que devuelve 2 series: *servidor1* y *servidor2*
* La serie *servidor1* hace que la regla de alerta se active y cambie al estado Alerting.
* Las notificaciones se envían con el mensaje: _pico de carga (servidor1)_
* En una evaluación posterior de la misma regla de alerta, la serie *servidor2* también hace que se active la regla de alerta.
* No se envían nuevas notificaciones como la regla de alerta ya está en estado Alerting.

Entonces, como puede ver en el escenario anterior, Grafana no enviará notificaciones cuando otras series hagan que se active la alerta si la regla ya está en estado Alerting. Para mejorar la compatibilidad con las consultas que devuelven varias series, planeamos realizar un seguimiento del estado *por serie* en una versión futura.

A partir de Grafana v5.3, puede configurar recordatorios para que se envíen para las alertas activadas. Esto enviará notificaciones adicionales cuando se continúe disparando una alerta. Si otras series (como servidor2 en el ejemplo anterior) también hacen que se active la regla de alerta, se incluirán en la notificación de recordatorio. Dependiendo del canal de notificación que esté usando, es posible que pueda aprovechar esta función para identificar series nuevas/existentes que provocan que se active la alerta.

====== Manejor de errores y falta de datos

A continuación, se muestran las condiciones en las que puede configurar cómo el motor de evaluación de reglas debe manejar las consultas que no devuelven datos o solo valores nulos.

[cols=",",options="header",]
|===
|Opción Sin Datos |Descripción
|No Data |Establece el estado de regla de alerta a NoData
|Alerting |Establece el estado de la regla de alerta en Alerting
|Keep Last State |Mantiene el estado actual de la regla de alerta, sea cual sea.
|Ok |No estoy seguro de por qué querrías enviarte una alerta cuando las cosas estén bien, pero podrías.
|===

====== Errores de ejecución o tiempos de espera

Dígale a Grafana cómo manejar la ejecución o los errores de tiempo de espera.

[cols=",",options="header",]
|===
|Opción de error o tiempo de espera |Descripción
|Alerting |Establecer el estado de la regla de alerta en Alerting
|Keep Last State |Mantiene el estado actual de la regla de alerta, sea cual sea.
|===

Si tiene un almacén de series de tiempo no confiable desde el cual las consultas en algún momento se agotan o fallan al azar, puede configurar esta opción en Keep Last State para básicamente ignorarlas.

===== Notificaciones

En la pestaña de alerta también puede especificar notificaciones de reglas de alerta junto con un mensaje detallado sobre la regla de alerta. El mensaje puede contener cualquier cosa, información sobre cómo podría resolver el problema, un vínculo al runbook, etc.

Las notificaciones reales se configuran y comparten entre múltiples alertas. Lea las Notificaciones de alerta para obtener información sobre cómo configurar y configurar las notificaciones.

* *Enviar a:* seleccione un canal de notificación de alerta si tiene uno configurado.
* *Mensaje:* ingrese un mensaje de texto que se enviará en el canal de notificación. Algunos notificadores de alertas admiten la transformación del texto a HTML u otros formatos enriquecidos. Este campo admite plantillas.
* *Etiquetas:* especifique una lista de etiquetas (clave/valor) que se incluirán en la notificación. Solo es compatible con algunos notificadores.

===== Historial y anotaciones del estado de alerta

Los cambios de estado de alerta se registran en la tabla de anotaciones internas en la base de datos de Grafana. Los cambios de estado se visualizan como anotaciones en el panel de gráficos de la regla de alerta. También puede acceder al submenú Historial del estado en la pestaña de alerta para ver y borrar el historial del estado.

=== Pausar regla de alerta

==== Pausar una regla de alerta

A veces, puede resultar útil detener la evaluación de una regla de alerta. Por ejemplo, durante una ventana de mantenimiento, la pausa de las reglas de alerta puede evitar la activación de una avalancha de alertas.

[arabic]
. En la barra lateral de Grafana, pase el cursor sobre el icono de Alerta (campana) y luego haga clic en *Reglas de Alerta*. Se enumeran todas las reglas de alerta configuradas, junto con su estado actual.
. Busque su alerta en la lista y haga clic en el icono de *Pausa* a la derecha. El icono de *Pausa* se convierte en un icono de *Reproducción*.
. Haga clic en el icono *Reproducir* para reanudar la evaluación de su alerta.

=== Ver alertas

==== Ver las reglas de alerta existentes

Grafana almacena reglas de alerta individuales en los paneles donde están definidas, pero también puede ver una lista de todas las reglas de alerta existentes y su estado actual.

En la barra lateral de Grafana, pase el cursor sobre el icono de Alerta (campana) y luego haga clic en *Reglas de Alerta*. Se enumeran todas las reglas de alerta configuradas, junto con su estado actual.

Puede hacer varias cosas mientras ve las alertas.

* *Filtrar alertas por nombre:* escriba un nombre de alerta en el campo *Buscar alertas*.
* *Filtrar alertas por estado:* en *Estados*, seleccione los estados de alerta que desea ver. Todos los demás estarán ocultos.
* *Pausar o reanudar una alerta:* haga clic en el icono *Pausar* o *Reproducir* junto a la alerta para pausar o reanudar la evaluación. Consulte Pausar una regla de alerta para obtener más información.
* *Acceda a la configuración de la regla de alerta:* haga clic en el nombre de la alerta o en el icono *Editar regla de alerta* (engranaje). Grafana abre la pestaña Alerta del panel donde se define la regla de alerta. Esto es útil cuando se activa una alerta pero no sabe en qué panel está definida.

=== Solucionar problemas de alertas

==== Solucionar problemas de alertas

Si las alertas no se comportan como esperaba, aquí hay algunos pasos que puede seguir para solucionar problemas y averiguar qué está fallando.

image:extracted-media\media\image189.png[Test Rule,width=624,height=360]

El primer nivel de resolución de problemas que puede hacer es hacer clic en *Probar Regla*. Obtendrá un resultado que puede expandir hasta el punto en que pueda ver los datos sin procesar que se devolvieron de su consulta.

También se pueden solucionar más problemas inspeccionando el registro del servidor grafana. Si no es un error o por alguna razón el registro no dice nada, puede habilitar el registro de depuración para algunos componentes relevantes. Esto se hace en el archivo de configuración ini de Grafana.

Ejemplo que muestra registradores que podrían ser relevantes a la hora de solucionar problemas de alertas.

{empty}[log]

filters = alerting.scheduler:debug \

alerting.engine:debug \

alerting.resultHandler:debug \

alerting.evalHandler:debug \

alerting.evalContext:debug \

alerting.extractor:debug \

alerting.notifier:debug \

alerting.notifier.slack:debug \

alerting.notifier.pagerduty:debug \

alerting.notifier.email:debug \

alerting.notifier.webhook:debug \

tsdb.graphite:debug \

tsdb.prometheus:debug \

tsdb.opentsdb:debug \

tsdb.influxdb:debug \

tsdb.elasticsearch:debug \

tsdb.elasticsearch.client:debug \

Si desea registrar la consulta sin procesar enviada a su TSDB y la respuesta sin procesar en el registro, también debe configurar la opción de grafana.ini app_mode en development.

== Solución de problemas

=== Solución de problemas

Esta página enumera algunas herramientas y consejos para ayudar a solucionar problemas comunes de Grafana.

==== Solucionar problemas con registros

Si encuentra un error o problema, puede consultar el registro del servidor Grafana. Normalmente se encuentra en /var/log/grafana/grafana.log en sistemas Unix o en <grafana_install_dir>/data/log en otras plataformas e instalaciones manuales.

Puede habilitar más registros cambiando el nivel de registro en el archivo de configuración de Grafana.

Para obtener más información, consulte Habilitar el registro de depuración en la CLI de Grafana y la sección de registro en Configuración.

==== Solucionar problemas de transformaciones

El orden de las transformaciones importa. Si la salida de datos final de varias transformaciones parece incorrecta, intente cambiar el orden de transformación. Cada transformación transforma los datos devueltos por la transformación anterior, no los datos sin procesar originales.

==== Preguntas frecuentes

Consulte la sección de preguntas frecuentes en la página de la Comunidad de Grafana para obtener respuestas a las preguntas más frecuentes.

=== Solucionar problemas de tableros

==== Solucionar problemas de tableros

Esta página proporciona información para resolver problemas comunes del tablero.

===== El tablero está lento

* ¿Está tratando de representar docenas (o cientos o miles) de series de tiempo en un gráfico? Esto puede hacer que el navegador se retrase y se sienta lento. Intente usar funciones como highestMax (en Graphite) para reducir la serie devuelta.
* A veces, los nombres de las series pueden ser muy grandes. Esto provoca tamaños de respuesta más grandes. Intente utilizar un alias para reducir el tamaño de los nombres de las series devueltas.
* ¿Está consultando muchas series de tiempo o durante un largo período de tiempo? Ambos pueden hacer que Grafana o su fuente de datos extraigan una gran cantidad de datos, lo que puede ralentizarlos.
* Podría ser una gran carga en su infraestructura de red. Si la lentitud no es constante, este puede ser el problema.

===== Problemas con la frecuencia de actualización del tablero

De forma predeterminada, Grafana consulta su fuente de datos cada 30 segundos. Establecer una frecuencia de actualización baja en sus tableros ejerce una tensión innecesaria en el backend. En muchos casos, consultar esto con frecuencia no tiene sentido, porque los datos no se envían al sistema de manera que se puedan ver cambios.

Recomendamos lo siguiente:

* No habilite la actualización automática en tableros, paneles o variables a menos que lo necesite. Los usuarios pueden actualizar su navegador manualmente o puede establecer la frecuencia de actualización para un período de tiempo que tenga sentido (cada diez minutos, cada hora, etc.).
* Si es necesario, configure la frecuencia de actualización en una vez por minuto. Nuevamente, los usuarios siempre pueden actualizar el tablero manualmente.
* Si su tablero tiene un período de tiempo más largo (como una semana), entonces realmente no necesita una actualización automática.

===== El manejo o la representación de datos nulos es incorrecto/confuso/extraño

Algunas aplicaciones publican datos de forma intermitente; por ejemplo, solo publican una métrica cuando ocurre un evento. De forma predeterminada, los gráficos de Grafana conectan líneas entre los puntos de datos. Esto puede resultar muy engañoso.

En la imagen de abajo hemos habilitado:

Puntos y radio de 3 puntos para resaltar dónde están realmente presentes los puntos de datos.

El *valor Nulo* se establece en *conectado*.

image:extracted-media\media\image190.png[https://grafana.com/static/img/docs/troubleshooting/grafana_null_connected.png,width=624,height=252]

En este gráfico, configuramos el gráfico para mostrar barras en lugar de líneas y establecemos el *valor Nulo* para graficar *nulo como cero*. Hay una gran diferencia en las imágenes.

image:extracted-media\media\image191.png[https://grafana.com/static/img/docs/troubleshooting/grafana_null_zero.png,width=624,height=250]

=== Habilitar diagnósticos

==== Habilitar diagnósticos

Puede configurar el proceso grafana-server para habilitar ciertos diagnósticos cuando se inicia. Esto puede resultar útil a la hora de investigar determinados problemas de rendimiento. _No_ se recomienda tener estos habilitados de forma predeterminada.

===== Activar la creación de perfiles

El grafana-server se puede iniciar con los argumentos -profile para habilitar la creación de perfiles y -profile-port para anular el puerto HTTP predeterminado (6060) donde los puntos finales de depuración pprof están disponibles, por ejemplo:

./grafana-server -profile -profile-port=8080

Tenga en cuenta que los puntos finales de depuración de pprof se sirven en un puerto diferente al del servidor HTTP de Grafana.

Puede configurar o anular la configuración de creación de perfiles mediante variables de entorno:

export GF_DIAGNOSTICS_PROFILING_ENABLED=true

export GF_DIAGNOSTICS_PROFILING_PORT=8080

Consulte el comando Go pprof para obtener más información sobre cómo recopilar y analizar datos de creación de perfiles.

===== Usar seguimiento

grafana-server se puede iniciar con los argumentos -tracing para habilitar el seguimiento y -tracing-file para anular el archivo de seguimiento predeterminado (trace.out) donde se escribe el resultado del rastreo. Por ejemplo:

./grafana-server -tracing -tracing-file=/tmp/trace.out

Puede configurar o anular la configuración de creación de perfiles mediante variables de entorno:

export GF_DIAGNOSTICS_TRACING_ENABLED=true

export GF_DIAGNOSTICS_TRACING_FILE=/tmp/trace.out

Ver el seguimiento en un navegador web (Es necesario tener Go instalado):

go tool trace <trace file>

2019/11/24 22:20:42 Parsing trace...

2019/11/24 22:20:42 Splitting trace...

2019/11/24 22:20:42 Opening browser. Trace viewer is listening on http://127.0.0.1:39735

Consulte Seguimiento de comandos Go para obtener más información sobre cómo analizar archivos de seguimiento.

=== Solucionar problemas de consultas

==== Solucionar problemas de consultas

Esta página proporciona información para resolver problemas comunes del tablero.

===== Obtengo resultados diferentes cuando reorganizo mis funciones

El orden de las funciones es muy importante. Al igual que en matemáticas, el orden en que coloque sus funciones puede afectar el resultado.

===== Inspeccione su solicitud de consulta y respuesta

Los problemas más comunes están relacionados con la consulta y la respuesta de su fuente de datos. Incluso si parece un error o un problema de visualización en Grafana, casi siempre es un problema con la consulta de la fuente de datos o la respuesta de la fuente de datos. Empiece por inspeccionar la consulta y respuesta de su panel.

Para obtener más información, consulte Inspeccionar un panel.

===== Mi consulta es lenta

¿Cuántos puntos de datos devuelve su consulta? Una consulta que devuelve muchos puntos de datos será lenta. Pruebe esto:

* En las *Opciones de consulta*, limite los *Puntos de datos máximos* devueltos.
* En *Opciones de consulta*, aumente el *Intervalo de tiempo mínimo*.
* En su consulta, utilice una función group by.
