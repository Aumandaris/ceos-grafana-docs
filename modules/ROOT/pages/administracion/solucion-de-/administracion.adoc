
== Administración

=== Administración

Esta sección incluye información para administradores de Grafana, administradores de equipo y usuarios que realizan tareas administrativas:

* [Cambiar preferencias]
* [Configuración]
* [Seguridad]

=== Preferencias

==== Preferencias de Grafana

Las preferencias de Grafana son configuraciones básicas. Controlan el tema de la interfaz de usuario, el panel de inicio, la zona horaria, etc.

Las preferencias a veces son confusas porque se pueden establecer en cuatro niveles diferentes, enumerados del nivel más alto al más bajo:

* *Servidor:* afecta a todos los usuarios del servidor de Grafana. Establecido por un [administrador de servidor de Grafana].
* *Organización:* afecta a todos los usuarios de una organización. Establecido por un [administrador de la organización].
* *Equipo:* afecta a todos los usuarios asignados a un equipo. Establecido por un administrador de organización o administrador de equipo. Para obtener más información sobre estos roles, consulte [Roles de la organización].
* *Cuenta de usuario:* afecta al usuario individual. Establecido por el usuario en su propia cuenta.

El nivel más bajo siempre tiene prioridad. Por ejemplo, si un usuario establece su tema en Luz, entonces su visualización de Grafana muestra el tema de luz. Nada en ningún nivel superior puede anular eso.

Si el usuario es consciente del cambio y tiene la intención de hacerlo, ¡es genial! Pero si el usuario es un administrador de servidor que hizo el cambio en sus preferencias de usuario hace mucho tiempo, es posible que haya olvidado que lo hizo. Luego, si ese administrador del servidor está tratando de cambiar el tema a nivel del servidor, se frustrará ya que ninguno de sus cambios tiene ningún efecto que puedan ver. (Además, los usuarios del servidor pueden estar confundidos, ¡porque pueden ver los cambios en el nivel del servidor!)

==== Cambiar nombre y correo electrónico

===== Cambiar el nombre y el correo electrónico de Grafana

En Grafana, puede cambiar sus nombres y correos electrónicos asociados con grupos o cuentas en Configuración o Preferencias. Este tema proporciona instrucciones para cada tarea.

Algunas tareas requieren ciertos permisos. Para obtener más información sobre los roles, consulte [Permisos].

====== Cambiar el nombre de la organización

Los administradores del servidor de Grafana y los administradores de la organización pueden cambiar los nombres de las organizaciones.

*Cambiar el nombre de la organización como administrador del servidor de grafana*

Siga estas instrucciones si es administrador del servidor de Grafana.

[arabic]
. Pase el cursor sobre el icono de *Administrador de Servidor* (escudo) hasta que aparezca un menú.
. Haga clic en *Organizaciones*.
. En la lista de organizaciones, haga clic en el nombre de la organización que desea cambiar.
. En *Nombre*, ingrese el nuevo nombre de la organización.
. Haga clic en *Actualizar*.

*Cambiar el nombre de la organización como administrador de la organización*

Si es administrador de una organización, siga estos pasos:

[arabic]
. Pase el cursor sobre el icono de *Configuración* (engranaje).
. Haga clic en *Preferencias*.
. En *Nombre de la organización*, ingrese el nuevo nombre.
. Haz clic en *Actualizar nombre de la organización*.

====== Cambiar el nombre o el correo electrónico del equipo

Los administradores de la organización y los administradores del equipo pueden cambiar los nombres y las direcciones de correo electrónico del equipo. Para cambiar el nombre del equipo o el correo electrónico, siga estos pasos:

[arabic]
. Pase el cursor sobre el icono de *Configuración* (engranaje) en el menú lateral.
. Haz clic en *Equipos*. Grafana muestra la lista de equipos.
. En la lista de equipos, haga clic en el nombre del equipo que desea cambiar.
. Haga clic en la pestaña *Configuración*.
. En la sección Configuración del equipo, puede editar lo siguiente:
** *Nombre:* edite este campo para cambiar el nombre asociado con el equipo.
** *Correo electrónico:* edite este campo para cambiar la dirección de correo electrónico asociada con el equipo.
. Haga clic en *Actualizar*.

====== Cambiar nombre de usuario o correo electrónico

Para saber cómo editar su información de usuario, consulte [Perfil de la cuenta de usuario de Grafana].

==== Cambiar el tema de la interfaz de usuario

===== Cambiar el tema de la interfaz de usuario de Grafana

En Grafana, puede modificar el tema de la interfaz de usuario configurado en Configuración o Preferencias. Configure el tema de la interfaz de usuario para el servidor, una organización, un equipo o su cuenta de usuario personal siguiendo las instrucciones de este tema.

Algunas tareas requieren ciertos permisos. Para obtener más información sobre los roles, consulte [Permisos].

====== Opciones de tema

El tema afecta la forma en que Grafana muestra gráficos, menús y otros elementos de la interfaz de usuario.

*Predeterminado*

El tema *predeterminado* es el tema de oscuro o el que haya sido seleccionado en un nivel superior. Por ejemplo, si un administrador de la organización estableció el tema de *Claro*, entonces ese es el predeterminado para todos los equipos de esa organización.

*Oscuro*

Aquí hay un ejemplo del tema oscuro.

image:media\image4.png[Dark theme example,width=624,height=119]

*Claro*

Aquí hay un ejemplo del tema de claro.

image:media\image5.png[Light theme example,width=624,height=118]

====== Cambiar el tema de la interfaz de usuario del servidor

Los administradores del servidor pueden cambiar el tema de la interfaz de usuario de Grafana para todos los usuarios del servidor configurando la opción [default_theme] en el archivo de configuración de Grafana.

Para ver cuál es la configuración actual, consulte [Ver la configuración del servidor].

====== Cambiar el tema de la interfaz de usuario de la organización

Los administradores de la organización pueden cambiar el tema de la interfaz de usuario para todos los usuarios de una organización.

[arabic]
. Pase el cursor sobre el icono de *Configuración* (engranaje).
. Haga clic en *Preferencias*.
. En la sección Preferencias, seleccione el *tema de la interfaz de usuario*.
. Clic en *Guardar*.

====== Cambiar el tema de la interfaz de usuario del equipo

Los administradores de la organización y del equipo pueden cambiar el tema de la interfaz de usuario para todos los usuarios de un equipo.

[arabic]
. Pase el cursor sobre el icono de *Configuración* (engranaje) en el menú lateral.
. Haz clic en *Equipos*. Grafana muestra la lista de equipos.
. Haga clic en el equipo para el que desea cambiar el tema de la interfaz de usuario y luego navegue a la pestaña *Configuración*.
. En la sección Preferencias, seleccione el *tema de la interfaz de usuario*.
. Clic en *Guardar*.

====== Cambia tu tema de interfaz de usuario personal

Puede cambiar el tema de la interfaz de usuario para su cuenta de usuario. Esta configuración anula la configuración del tema de la interfaz de usuario en niveles superiores.

[arabic]
. En el menú de la izquierda, coloca el cursor sobre tu avatar y luego haz clic en *Preferencias*.
. En la sección Preferencias, seleccione el *tema de la interfaz de usuario*.
. Clic en *Guardar*.

==== Cambiar el tablero de inicio

===== Cambiar el tablero de inicio predeterminado

El tablero de inicio que configura es el que todos los usuarios verán de forma predeterminada cuando inicien sesión. Puede configurar el tablero de inicio para el servidor, una organización, un equipo o su cuenta de usuario personal. Este tema proporciona instrucciones para cada tarea.

Algunas tareas requieren ciertos permisos. Para obtener más información sobre los roles, consulte [Permisos].

====== Navega hasta el tablero de inicio

El tablero de inicio es el primer tablero que ve un usuario cuando inicia sesión en Grafana. También puede navegar al tablero de inicio de forma manual.

[arabic]
. Coloque el cursor sobre el ícono *Tableros* (cuatro cuadrados).
. Haga clic en *Inicio*.

====== Configurar el tablero de inicio para el servidor

Los usuarios con la marca de administrador de servidor de Grafana en su cuenta o acceso al archivo de configuración pueden definir un archivo JSON para usar como tablero de inicio para todos los usuarios en el servidor.

*[Opcional] Convierta un tablero existente en un archivo JSON*

[arabic]
. Navegue a la página del tablero que desea utilizar como tablero de inicio.
. Haga clic en el icono *Compartir tablero* junto al título del tablero.
. En la pestaña Exportar, haga clic en *Guardar en archivo*. Grafana convierte el tablero en un archivo JSON y lo guarda localmente.

*Utilice un archivo JSON como tablero de inicio*

[arabic]
. Guarde su archivo JSON en algún lugar al que Grafana pueda acceder. Por ejemplo, en la carpeta data de Grafana.
. Actualice su archivo de configuración para establecer la ruta al archivo JSON. Consulte [default_home_dashboard_path] para obtener más información sobre cómo modificar los archivos de configuración de Grafana.

ˋ{empty}[dashboards]

/* Ruta al tablero de inicio predeterminado. Si este valor está vacío, entonces Grafana usa StaticRootPath + "dashboards/home.json"
default_home_dashboard_path = data/main-dashboard.jsonˋ

====== Configure el tablero de inicio de su organización

Los administradores de la organización pueden elegir un tablero de inicio para su organización.

[arabic]
. Navegue hasta el tablero que desea establecer como tablero de inicio.
. Haga clic en la estrella junto al título del tablero para marcar el tablero como favorito si aún no lo está.
. Pase el cursor sobre el icono de *Configuración* (engranaje).
. Haga clic en *Preferencias*.
. En el campo *Tablero de inicio*, seleccione el tablero que desea utilizar para su tablero de inicio. Las opciones incluyen todos los tableros marcados con estrellas.
. Clic en *Guardar*.

====== Configure el tablero de inicio para su equipo

Los administradores de la organización y los administradores del equipo pueden elegir un tablero de inicio para un equipo.

[arabic]
. Navegue hasta el tablero que desea establecer como tablero de inicio.
. Haga clic en la estrella junto al título del tablero para marcar el tablero como favorito si aún no lo está.
. Pase el cursor sobre el icono de *Configuración* (engranaje) en el menú lateral.
. Haga clic en *Equipos*. Grafana muestra la lista de equipos.
. Haga clic en el equipo para el que desea cambiar el tablero de inicio y luego navegue hasta la pestaña *Configuración*.
. En el campo *Tablero de inicio*, seleccione el tablero que desea utilizar para su tablero de inicio. Las opciones incluyen todos los tablero marcados con estrellas.
. Clic en *Guardar*.

====== Configura tu tablero de inicio personal

Puede elegir su propio tablero de inicio personal. Esta configuración anula todos los tableros de inicio establecidos en niveles superiores.

[arabic]
. Navegue hasta el tablero que desea establecer como tablero de inicio.
. Haga clic en la estrella junto al título del tablero para marcar el tablero como favorito si aún no lo está.
. En el menú de la izquierda, coloque el cursor sobre su avatar y luego haga clic en *Preferencias*.
. En el campo *Tablero de inicio*, seleccione el tablero que desea utilizar para su tablero de inicio. Las opciones incluyen todos los tableros marcados con estrellas.
. Clic en *Guardar*.

==== Cambiar la zona horaria predeterminada

===== Cambiar la zona horaria predeterminada de Grafana

De forma predeterminada, Grafana usa la zona horaria en su navegador web. Sin embargo, puede anular esta configuración a nivel de servidor, organización, equipo o usuario individual. Este tema proporciona instrucciones para cada tarea.

Algunas tareas requieren ciertos permisos. Para obtener más información sobre los roles, consulte [Permisos].

====== Establecer zona horaria del servidor

Los administradores del servidor de Grafana pueden elegir una zona horaria predeterminada para todos los usuarios del servidor configurando la opción [default_timezone] en el archivo de configuración de Grafana.

====== Establecer zona horaria de la organización

Los administradores de la organización pueden elegir una zona horaria predeterminada para su organización.

[arabic]
. Pase el cursor sobre el icono de *Configuración* (engranaje).
. Haga clic en *Preferencias*.
. Haga clic para seleccionar una opción en la lista *Zona horaria*. El valor *predeterminado* es la zona horaria local del navegador o la zona horaria seleccionada en un nivel superior. Consulte [Controles de rango de tiempo] para obtener más información sobre la configuración de tiempo de Grafana.
. Clic en *Guardar*.

====== Establecer zona horaria del equipo

Los administradores de la organización y los administradores del equipo pueden elegir una zona horaria predeterminada para todos los usuarios de un equipo.

[arabic]
. Pase el cursor sobre el icono de *Configuración* (engranaje) en el menú lateral.
. Haz clic en *Equipos*. Grafana muestra la lista de equipos.
. Haga clic en el equipo para el que desea cambiar la zona horaria y luego navegue a la pestaña *Configuración*.
. Haga clic para seleccionar una opción en la lista *Zona horaria*. El valor *predeterminado* es la zona horaria local del navegador o la zona horaria seleccionada en un nivel superior. Consulte [Controles de rango de tiempo] para obtener más información sobre la configuración de tiempo de Grafana.
. Clic en *Guardar*.

====== Establece tu zona horaria personal

Puede cambiar la zona horaria de su cuenta de usuario. Esta configuración anula la configuración de la zona horaria en los niveles más altos.

[arabic]
. En el menú de la izquierda, coloca el cursor sobre tu avatar y luego haz clic en *Preferencias*.
. Haga clic para seleccionar una opción en la lista *Zona horaria*. El valor *predeterminado* es la zona horaria local del navegador o la zona horaria seleccionada en un nivel superior. Consulte [Controles de rango de tiempo] para obtener más información sobre la configuración de tiempo de Grafana.
. Clic en *Guardar*.

=== Ver servidor

==== Ver información del servidor

Esta configuración contiene información sobre las herramientas que los administradores de servidores de Grafana pueden utilizar para obtener más información sobre sus servidores.

==== Métricas internas de Grafana

===== Métricas internas de Grafana

Grafana recopila algunas métricas sobre sí mismo internamente. Admite enviar métricas a Graphite o exponerlas para que Prometheus las extraiga.

Para obtener más información sobre las opciones de configuración relacionadas con las métricas de Grafana, consulte [métricas] y [metrics.graphite] en [Configuración].

====== Métricas disponibles

Cuando está habilitado, Grafana expone una serie de métricas, que incluyen:

* Instancias activas de Grafana
* Número de tableros, usuarios y listas de reproducción
* Códigos de estado HTTP
* Solicitudes por grupo de enrutamiento
* Alertas activas de Grafana
* Rendimiento de Grafana

====== Extraiga métricas de Grafana a Prometheus

Estas instrucciones asumen que ya ha agregado Prometheus como fuente de datos en Grafana.

[arabic]
. Habilite Prometheus para extraer métricas de Grafana. En su archivo de configuración (ˋgrafana.iniˋ o ˋcustom.iniˋ según su sistema operativo) elimine el punto y coma para habilitar las siguientes opciones de configuración:

ˋ/* Métricas disponibles en la URL / métricas de la API HTTP
{empty}[metrics]
/* Deshabilitar / habilitar métricas internas
enabled = true

/* Deshabilitar las métricas de estadísticas totales (stat_totals_ *) que se generarán
disable_total_stats = falseˋ

[arabic, start=2]
. (opcional) Si desea solicitar autorización para ver el punto final de métricas, descomente y configure las siguientes opciones:

ˋbasic_auth_username =
basic_auth_password =ˋ

[arabic, start=3]
. Reinicie Grafana. Grafana ahora expone métricas en http://localhost:3000/metrics.
. Agregue la tarea a su archivo prometheus.yml. Ejemplo:

ˋ- job_name: 'grafana_metrics'

scrape_interval: 15s
scrape_timeout: 5s

static_configs:
- targets: ['localhost: 3000']ˋ

[arabic, start=5]
. Reinicie Prometheus. Su nueva tarea debería aparecer en la pestaña Objetivos.
. En Grafana, pase el mouse sobre el ícono de *Configuración* (engranaje) en la barra lateral izquierda y luego haga clic en *Fuentes de datos*.
. Seleccione la fuente de datos de *Prometheus*.
. En la pestaña Tableros, *Importe* el tablero de métricas de Grafana. Todas las métricas raspadas de Grafana están disponibles en el tablero.

====== Ver métricas de Grafana en Graphite

Estas instrucciones asumen que ya ha agregado Graphite como fuente de datos en Grafana.

[arabic]
. Habilite el envío de métricas a Graphite. En su archivo de configuración (ˋgrafana.iniˋ o ˋcustom.iniˋ según su sistema operativo) elimine el punto y coma para habilitar las siguientes opciones de configuración:

ˋ/* Métricas disponibles en la URL / métricas de la API HTTP
{empty}[metrics]
/* Deshabilitar / habilitar métricas internas
enabled = true

/* Deshabilitar las métricas de estadísticas totales (stat_totals_*) que se generarán
disable_total_stats = falseˋ

[arabic, start=2]
. Habilite las opciones de [metrics.graphite]:

ˋ/* Envía métricas internas a Graphite
{empty}[metrics.graphite]
/* Habilite estableciendo la configuración de la dirección (ex localhost:2003)
address = <hostname or ip>:<port/*>
prefix = prod.grafana.%(instance_name)s.ˋ

[arabic, start=3]
. Reinicie Grafana. Grafana ahora expone métricas en http:/localhost:3000/metrics y las envía a la ubicación de Graphite que especificó.

==== Ver la configuración del servidor

===== Ver la configuración del servidor de Grafana

Si es un administrador del servidor Grafana, use la pestaña [Configuración] para ver la configuración que se aplica a su servidor Grafana a través del archivo de Configuración y cualquier variable ambiental.

****
 Solo los administradores del servidor Grafana pueden acceder al menú *Administrador del servidor*. Para obtener más información sobre los permisos administrativos, consulte administrador del servidor de Grafana.
****

====== Ver la configuración del servidor

[arabic]
. Inicie sesión en su servidor de Grafana con una cuenta que tenga la marca de administrador de Grafana.
. Pase el cursor sobre el icono de *Administrador del servidor* (escudo) en el menú lateral y luego haga clic en la pestaña *Configuración*.

====== Configuraciones disponibles

Para obtener una lista completa de la configuración del servidor, consulte [Configuración].

==== Ver estadísticas del servidor

===== Ver estadísticas del servidor Grafana

Si es administrador del servidor de Grafana, puede ver estadísticas útiles sobre su servidor Grafana en la pestaña Estadísticas.

[NOTE] 
====
Solo los administradores del servidor Grafana pueden acceder al menú *Administrador del servidor*. Para obtener más información sobre los permisos administrativos, consulte el administrador del servidor de Grafana.
====

====== Ver estadísticas del servidor

[arabic]
. Inicie sesión en su servidor de Grafana con una cuenta que tenga la marca de administrador de Grafana.
. Pase el cursor sobre el icono de *Administrador del servidor* (escudo) en el menú lateral y luego haga clic en la pestaña *Estadísticas*.

====== Estadísticas disponibles

Las siguientes estadísticas se muestran en la pestaña Estadísticas:

* Total de usuarios *Nota:* Total de usuarios = Total de administradores + Total de editores + Total de espectadores
* Total de administradores
* Total de editores
* Total de espectadores
* Usuarios activos (visto en los últimos 30 días) *Nota:* Usuarios activos = Administradores activos + Editores activos + Espectadores activos
* Administradores activos (visto en los últimos 30 días)
* Editores activos (vistos los últimos 30 días)
* Espectadores activos (visto en los últimos 30 días)
* Sesiones activas
* Total de tableros
* Total de organizaciones
* Total de listas de reproducción
* Total de instantáneas
* Total de etiquetas de tablero
* Total de paneles destacados
* Total de alertas

====== Contando usuarios

Si un usuario pertenece a varias organizaciones, ese usuario se cuenta una vez como usuario en el rol de organización más alto que se le asigne, independientemente de la cantidad de organizaciones a las que pertenezca.

Por ejemplo, si Sofía es espectadora en dos organizaciones, editora en dos organizaciones y administradora en tres organizaciones, entonces se reflejaría en las estadísticas como:

* Total de usuarios 1
* Total de administradores 1

=== Configuración

==== Configuración

Grafana tiene una serie de opciones de configuración que puede especificar en un archivo de configuración ˋ.iniˋ o especificar mediante variables de entorno.

[NOTE] 
====
Debe reiniciar Grafana para que se apliquen los cambios de configuración.
====

Para ver todas las configuraciones actualmente aplicadas al servidor Grafana, consulte [Ver configuración del servidor].

===== Ubicaciones de archivos de configuración

¡_No_ cambie ˋdefaults.iniˋ! Los valores predeterminados de Grafana se almacenan en este archivo. Dependiendo de su sistema operativo, realice todos los cambios de configuración en ˋcustom.iniˋ o ˋgrafana.iniˋ.

* Configuración predeterminada desde ˋ$WORKING_DIR/conf/defaults.iniˋ
* Configuración personalizada desde ˋ$WORKING_DIR/conf/custom.iniˋ
* La ruta del archivo de configuración personalizada se puede anular mediante el parámetro ˋ–configˋ

====== Windows

ˋsample.iniˋ está en el mismo directorio que ˋdefaults.iniˋ y contiene todas las configuraciones comentadas. Copie sampleˋ.iniˋ y asígnele el nombre ˋcustom.iniˋ.

===== Comentarios en archivos .ini

El punto y coma (el símbolo ˋ;ˋ) es la forma estándar de comentar líneas en un archivo ˋ.iniˋ. Si desea cambiar una configuración, debe eliminar el punto y coma (ˋ;ˋ) delante de la configuración antes de que funcione.

====== Ejemplo

ˋ/* El puerto HTTP a usar
;http_port = 3000ˋ

Un problema común es olvidar descomentar una línea en el archivo ˋcustom.iniˋ (o ˋgrafana.iniˋ), lo que hace que se ignore la opción de configuración.

===== Configurar con variables de entorno

Todas las opciones en el archivo de configuración se pueden anular usando variables de entorno, usando la sintaxis:

ˋGF_<SectionName>_<KeyName>ˋ

Donde el nombre de la sección es el texto entre corchetes. Todo debe estar en mayúsculas,ˋ.ˋ y ˋ-ˋ deben reemplazarse por ˋ_ˋ. Por ejemplo, si tiene estas opciones de configuración:

ˋ/* sección predeterminada
instance_name = $\{HOSTNAME}

{empty}[security]
admin_user = admin

{empty}[auth.google]
client_secret = 0ldS3cretKey

{empty}[plugin.grafana-image-renderer]
rendering_ignore_https_errors = trueˋ

Puede anularlos en máquinas Linux con:

ˋexporta GF_DEFAULT_INSTANCE_NAME =my-instance
exporta GF_SECURITY_ADMIN_USER =owner
exporta GF_AUTH_GOOGLE_CLIENT_SECRET =newS3cretKey
exporta GF_PLUGIN_GRAFANA_IMAGE_RENDERER_RENDERING_IGNORE_HTTPS_ERRORS =trueˋ

===== Expansión variable

[NOTE] 
====
Solo disponible en Grafana 7.1+.
====

Si alguna de sus opciones contiene la expresión ˋ$__<provider>\{<argument>}ˋ o ˋ$\{<enviroment variable>}ˋ, serán procesadas por el expansor de variables de Grafana. El expansor ejecuta el proveedor con el argumento proporcionado para obtener el valor final de la opción.

Hay tres proveedores: ˋenvˋ, ˋfileˋ y ˋvaultˋ.

====== Proveedor de env

El proveedor de env se puede utilizar para expandir una variable de entorno. Si establece una opción en ˋ$__env\{PORT}ˋ, la variable de entorno ˋPORTˋ se utilizará en su lugar. Para las variables de entorno, también puede utilizar la sintaxis abreviada ˋ$\{PORT}ˋ. El directorio de registro de Grafana se establecería en el directorio grafana en el directorio detrás de la variable de entorno ˋLOGDIRˋ en el siguiente ejemplo.

ˋ{empty}[paths]
logs = $__env\{LOGDIR}/grafanaˋ

====== Proveedor de archivos

ˋfileˋ lee un archivo del sistema de archivos. Recorta los espacios en blanco desde el principio y el final de los archivos. La contraseña de la base de datos en el siguiente ejemplo sería reemplazada por el contenido del archivo ˋ/etc/secrets/gf_sql_passwordˋ:

ˋ{empty}[database]
password = $__file\{/etc/secrets/gf_sql_password}ˋ

====== Proveedor de bóveda

El proveedor ˋvaultˋ le permite administrar sus secretos con [Hashicorp Vault].

****
El proveedor Vault solo está disponible en Grafana Enterprise v7.1 +. Para obtener más información, consulte [Integración de Vault] en [Grafana Enterprise].
****

===== app_mode

Las opciones son ˋproductionˋ y ˋdevelopmentˋ. El valor predeterminado es ˋproductionˋ. _No_ cambie esta opción a menos que esté trabajando en el desarrollo de Grafana.

===== instance_name

Establezca el nombre de la instancia de grafana-server. Se utiliza en registros, métricas internas e información de agrupación. El valor predeterminado es: ˋ$\{HOSTNAME}ˋ, que se reemplazará con la variable de entorno ˋHOSTNAMEˋ, si está vacía o no existe, Grafana intentará usar llamadas al sistema para obtener el nombre de la máquina.

===== [paths]

====== data

Ruta de acceso a donde Grafana almacena la base de datos sqlite3 (si se usa), sesiones basadas en archivos (si se usan) y otros datos. Esta ruta generalmente se especifica a través de la línea de comando en el script init.d o en el archivo de servicio systemd.

====== temp_data_lifetime

Cuánto tiempo se deben conservar las imágenes temporales en el directorio ˋdataˋ. Predeterminado a: ˋ24hˋ. Modificadores admitidos: ˋh (horas)ˋ,ˋm (minutos)ˋ, por ejemplo: ˋ168hˋ, ˋ30mˋ, ˋ10h30mˋ.

Utilice ˋ0ˋ para no limpiar nunca archivos temporales.

====== logs

Ruta al lugar donde Grafana almacena los registros. Esta ruta generalmente se especifica a través de la línea de comando en el script init.d o en el archivo de servicio systemd. Puede anularlo en el archivo de configuración o en el archivo de variable de entorno predeterminado. Sin embargo, tenga en cuenta que al anular esto, la ruta de registro predeterminada se utilizará temporalmente hasta que Grafana se haya iniciado por completo.

Anule la ruta del registro utilizando el argumento de línea de comando ˋcfg:default.paths.logsˋ:

ˋ./grafana-server --config /custom/config.ini --homepath /custom/homepath cfg:default.paths.logs=/custom/pathˋ

====== plugins

Directorio donde Grafana escanea y busca complementos automáticamente. Para obtener información sobre la instalación manual o automática de complementos, consulte [Instalar complementos de Grafana].

====== provisioning

Carpeta que contiene archivos de configuración de aprovisionamiento que Grafana aplicará al inicio. Los tableros se volverán a cargar cuando cambien los archivos json.

===== [server]

====== protocol

ˋhttpˋ, ˋhttpsˋ, ˋh2ˋ o ˋsocketˋ

====== http_addr

La dirección IP a la que enlazar. Si está vacío, se vinculará a todas las interfaces

====== http_port

El puerto al que se va a enlazar, por defecto es ˋ3000. Para usar el puerto 80, debe otorgar el permiso binario de Grafana, por ejemplo:

ˋ$ sudo setcap 'cap_net_bind_service=+ep' /usr/sbin/grafana-serverˋ

O redirigir el puerto 80 al puerto de Grafana usando:

ˋ$ sudo iptables -t nat -A PREROUTING -p tcp --dport 80 -j REDIRECT --to-port 3000ˋ

Otra forma es poner un servidor web como Nginx o Apache frente a Grafana y hacer que hagan de proxy a las solicitudes hacia Grafana.

====== domain

Esta configuración solo se usa como parte de la configuración ˋroot_urlˋ (ver más abajo). Importante si usa GitHub o Google OAuth.

====== enforce_domain

Redirije al dominio correcto si el encabezado del host no coincide con el dominio. Evita los ataques de revinculación de DNS. El valor predeterminado es ˋfalseˋ.

====== root_url

Esta es la URL completa que se utiliza para acceder a Grafana desde un navegador web. Esto es importante si usa la autenticación de Google o GitHub OAuth (para que la URL de devolución de llamada sea correcta).

[NOTE] 
====
Esta configuración también es importante si tiene un proxy inverso frente a Grafana que lo expone a través de una subruta. En ese caso, agregue la subruta al final de esta configuración de URL.
====

====== serve_from_sub_path

Sirve Grafana desde la subruta especificada en la configuración ˋroot_urlˋ. De forma predeterminada, se establece en false por razones de compatibilidad.

Habilitando esta configuración y usando una subruta en ˋroot_urlˋ arriba, e.g, ˋroot_url = http://localhost:3000/grafanaˋ, se puede acceder a Grafana en ˋhttp://localhost:3000 /grafanaˋ.

====== router_logging

Establézcalo en ˋtrueˋ para que Grafana registre todas las solicitudes HTTP (no solo los errores). Estos se registran como eventos de nivel de información en el registro de Grafana.

====== static_root_path

La ruta al directorio donde se encuentran los archivos de la interfaz (archivos HTML, JS y CSS). El valor predeterminado es ˋpublicˋ, por lo que el binario de Grafana debe ejecutarse con el directorio de trabajo configurado en la ruta de instalación.

====== enable_gzip

Establezca esta opción en ˋtrueˋ para habilitar la compresión HTTP, esto puede mejorar la velocidad de transferencia y la utilización del ancho de banda. Se recomienda que la mayoría de los usuarios lo establezcan como ˋtrueˋ. De forma predeterminada, se establece en ˋfalseˋ por razones de compatibilidad.

====== cert_file

Ruta al archivo de certificado (si ˋprotocolˋ está configurado en ˋhttpsˋ o ˋh2ˋ).

====== cert_key

Ruta al archivo de la clave del certificado (si ˋprotocolˋ está configurado en ˋhttpsˋ o ˋh2ˋ).

====== socket

Ruta donde se debe crear el socket cuando ˋprotocol=socket.ˋ Asegúrese de que Grafana tenga los permisos adecuados antes de cambiar esta configuración.

====== cdn_url

[NOTE] 
====
Disponible en Grafana v7.4 y versiones posteriores.
====

Especifique una dirección URL HTTP completa a la raíz de sus activos de Grafana CDN. Grafana agregará rutas de edición y versión.

Por ejemplo, dada una URL cdn como ˋhttps://cdn.myserver.comˋ, grafana intentará cargar un archivo javascript desde ˋhttp://cdn.myserver.com/grafana-oss/7.4.0/public/build/app.%3chash%3e.js[http://cdn.myserver.com/grafana-oss/7.4.0/public/build/app.<hash>.js]ˋ.

====== read_timeout

Establece el tiempo máximo usando un formato de duración (5s/5m/5ms) antes de que se agote el tiempo de lectura de una solicitud entrante y se cierren las conexiones inactivas. 0 significa que no hay tiempo de espera para leer la solicitud.

===== [database]

Grafana necesita una base de datos para almacenar usuarios y paneles (y otras cosas). De forma predeterminada, está configurado para usar ˋsqlite3ˋ, que es una base de datos incrustada (incluida en el binario principal de Grafana).

====== type

Ya sea ˋmysqlˋ, ˋpostgresˋ o ˋsqlite3ˋ, es su elección.

====== host

Solo aplicable a MySQL o Postgres. Incluye IP o nombre de host y puerto o, en caso de sockets Unix, la ruta hacia él. Por ejemplo, para MySQL ejecutándose en el mismo host que Grafana: ˋhost = 127.0.0.1:3306ˋ o con sockets Unix: ˋhost = /var/run/mysqld/mysqld.sockˋ

====== name

El nombre de la base de datos de Grafana. Déjelo configurado en ˋgrafanaˋ o algún otro nombre.

====== user

El usuario de la base de datos (no aplicable para ˋsqlite3ˋ).

====== Password

La contraseña del usuario de la base de datos (no aplicable para ˋsqlite3ˋ). Si la contraseña contiene ˋ/*ˋ o ˋ;ˋ tienes que envolverlo con comillas triples. Por ejemplo, ˋ"""/*password;"""ˋ

====== url

Use la URL o los otros campos a continuación para configurar la base de datos Ejemplo: ˋmysql://user:secret@host:port/databaseˋ

====== max_idle_conn

El número máximo de conexiones en el grupo de conexiones inactivas.

====== max_open_conn

El número máximo de conexiones abiertas a la base de datos.

====== conn_max_lifetime

Establece la cantidad máxima de tiempo que se puede reutilizar una conexión. El valor predeterminado es 14400 (lo que significa 14400 segundos o 4 horas). Para MySQL, esta configuración debería ser más corta que la variable ˋwait_timeoutˋ.

====== log_queries

Establézcalo en ˋtrueˋ para registrar las llamadas SQL y los tiempos de ejecución.

====== ssl_mode

Para Postgres, use ˋdisableˋ, ˋrequireˋ o ˋverify-fullˋ. Para MySQL, use ˋtrueˋ, ˋfalseˋ o ˋskip-verifyˋ.

====== isolation_level

Solo el controlador MySQL admite niveles de aislamiento en Grafana. En caso de que el valor esté vacío, se aplica el nivel de aislamiento predeterminado del controlador. Las opciones disponibles son “READ-UNCOMMITED”, “READ-COMMITTED”, “REPEATABLE-READ” o “SERIALIZABLE”.

====== ca_cert_path

La ruta al certificado de CA que se utilizará. En muchos sistemas Linux, los certificados se pueden encontrar en ˋ/etc/ssl/certsˋ.

====== client_key_path

La ruta a la clave del cliente. Solo si el servidor requiere autenticación de cliente.

====== client_cert_path

La ruta al certificado de cliente. Solo si el servidor requiere autenticación de cliente.

====== server_cert_name

El campo de nombre común del certificado utilizado por el servidor mysql o postgres. No es necesario si ˋssl_modeˋ está configurado para ˋskip-verifyˋ.

====== path

Solo aplicable para la base de datos ˋsqlite3ˋ. La ruta del archivo donde se almacenará la base de datos.

====== cache_mode

Solo para "sqlite3". Configuración de [caché compartida] utilizada para conectarse a la base de datos. (privado, compartido) Por defecto es ˋprivateˋ.

===== [remote_cache]

====== type

ˋredisˋ, ˋmemcachedˋ o ˋdatabaseˋ. Predeterminado ˋdatabaseˋ

====== connstr

La cadena de conexión de la caché remota. El formato depende del ˋtypeˋ de caché remota. Las opciones son ˋdatabaseˋ, ˋredisˋ y ˋmemcacheˋ.

====== database

Déjelo vacío cuando use ˋdatabaseˋ, ya que usará la base de datos primaria.

====== redis

____
Ejemplo connstr: ˋaddr=127.0.0.1:6379,pool_size=100,db=0,ssl=falseˋ
____

* ˋaddrˋ es el host ˋ:ˋ puerto del servidor redis.
* ˋpool_sizeˋ (opcional) es el número de conexiones subyacentes que se pueden realizar a redis.
* ˋdbˋ (opcional) es el identificador de número de la base de datos redis que desea utilizar.
* ˋsslˋ (opcional) es si se debe usar SSL para conectarse al servidor redis. El valor puede ser ˋtrueˋ, ˋfalseˋ o ˋinsecureˋ. Establecer el valor en ˋinsecureˋ omite la verificación de la cadena de certificados y el nombre de host al realizar la conexión.

====== memcache

Ejemplo connstr: ˋ127.0.0.1:11211ˋ

===== [dataproxy]

====== logging

Esto habilita el registro del proxy de datos, el valor predeterminado es ˋfalseˋ.

====== timeout

Cuánto tiempo debe esperar el proxy de datos antes de que se agote el tiempo de espera. El valor predeterminado es 30 segundos.

Esta configuración también se aplica a las fuentes de datos HTTP de backend centrales donde las solicitudes de consulta usan un cliente HTTP con un tiempo de espera establecido.

====== keep_alive_seconds

Intervalo entre sondas de mantener vivo. El valor predeterminado es ˋ30ˋ segundos. Para obtener más detalles, consulte la documentación de [Dialer.KeepAlive].

====== tls_handshake_timeout_seconds

El período de tiempo que Grafana esperará para un protocolo de enlace TLS exitoso con la fuente de datos. El valor predeterminado es ˋ10ˋ segundos. Para obtener más detalles, consulte la documentación de Transport.TLSHandshakeTimeout.

====== expect_continue_timeout_seconds

El tiempo que Grafana esperará los encabezados de la primera respuesta de una fuente de datos después de escribir los encabezados de la solicitud, si la solicitud tiene un encabezado "Expect: 100-continue". Un valor de 0 dará como resultado que el cuerpo se envíe inmediatamente. El valor predeterminado es ˋ1ˋ segundo. Para obtener más detalles, consulte la documentación de [Transport.ExpectContinueTimeout].

====== max_idle_connections

El número máximo de conexiones inactivas que mantendrá Grafana. El valor predeterminado es 100. Para obtener más detalles, consulte la documentación de [Transport.MaxIdleConns].

====== idle_conn_timeout_seconds

El tiempo que Grafana mantiene las conexiones inactivas antes de cerrarlas. El valor predeterminado es ˋ90ˋ segundos. Para obtener más detalles, consulte la documentación de [Transport.IdleConnTimeout].

====== send_user_header

Si está habilitado y el usuario no es anónimo, el proxy de datos agregará el encabezado X-Grafana-User con el nombre de usuario en la solicitud. El valor predeterminado es ˋfalseˋ.

===== [analytics]

====== reporting_enabled

Cuando está habilitado, Grafana enviará estadísticas de uso anónimas a ˋstats.grafana.orgˋ. No se rastrea ninguna dirección IP, solo contadores simples para rastrear instancias en ejecución, versiones, tablero y recuentos de errores. Es muy útil para nosotros, así que déjelo habilitado. Los contadores se envían cada 24 horas. El valor predeterminado es ˋtrueˋ.

====== check_for_updates

Configure en false para deshabilitar todas las comprobaciones en [https://grafana.com] para las nuevas versiones de los complementos instalados y en el repositorio de Grafana GitHub para buscar una versión más reciente de Grafana. La información de la versión se utiliza en algunas vistas de la interfaz de usuario para notificar que existe una nueva actualización de Grafana o una actualización de complemento. Esta opción no genera actualizaciones automáticas ni envía información confidencial. La verificación se realiza cada 10 minutos.

====== google_analytics_ua_id

Si desea realizar un seguimiento del uso de Grafana a través de Google Analytics, especifique su ID de Universal Analytics aquí. De forma predeterminada, esta función está desactivada.

====== google_tag_manager_id

ID de Google Tag Manager, solo habilitado si ingresa un ID aquí.

===== [security]

====== disable_initial_admin_creation

****
Solo disponible en Grafana v6.5 +.
****

Desactive la creación de un usuario administrador en el primer inicio de Grafana. El valor predeterminado es ˋfalseˋ.

====== admin_user

El nombre del usuario administrador de Grafana predeterminado, que tiene todos los permisos. El valor predeterminado es ˋadminˋ.

====== admin_password

La contraseña del administrador de Grafana predeterminado. Establecer una vez en la primera ejecución. El valor predeterminado es ˋadminˋ.

====== secret_key

Usado para firmar algunas configuraciones de fuentes de datos como secretos y contraseñas, el formato de encriptación usado es AES-256 en modo CFB. No se puede cambiar sin necesidad de actualizar la configuración de la fuente de datos para volver a codificarlos.

====== disable_gravatar

Establézcalo en ˋtrueˋ para deshabilitar el uso de Gravatar para las imágenes de perfil de usuario. El valor predeterminado es ˋfalseˋ.

====== data_source_proxy_whitelist

Defina una lista blanca de direcciones IP o dominios permitidos, con puertos, que se utilizarán en las URL de origen de datos con el proxy de origen de datos de Grafana. Formato: ˋip_or_domain:portˋ separado por espacios. Las fuentes de datos PostgreSQL, MySQL y MSSQL no utilizan el proxy y, por lo tanto, no se ven afectadas por esta configuración.

====== disable_brute_force_login_protection

Configúrelo en ˋtrueˋ para deshabilitar la protección de inicio de sesión por fuerza bruta. El valor predeterminado es ˋfalseˋ.

====== cookie_secure

Establézcalo en ˋtrueˋ si aloja Grafana detrás de HTTPS. El valor predeterminado es ˋfalseˋ.

====== cookie_samesite

Establece el atributo de cookie ˋSameSiteˋ y evita que el navegador envíe esta cookie junto con solicitudes entre sitios. El objetivo principal es mitigar el riesgo de fuga de información de origen cruzado. Esta configuración también proporciona cierta protección contra ataques de falsificación de solicitudes entre sitios (CSRF). [Lea más sobre SameSite aquí]. Los valores válidos son ˋlaxˋ, ˋstrictˋ, ˋnoneˋ y ˋdisabledˋ. El valor predeterminado es ˋlaxˋ. El uso de valor ˋdisabledˋ no agrega ningún atributo de ˋSameSiteˋ a las cookies.

====== allow_embedding

Cuando es ˋfalseˋ, el encabezado HTTP ˋX-Frame-Options: denyˋ se establecerá en las respuestas HTTP de Grafana, lo que indicará a los navegadores que no permitan renderizar Grafana en un ˋ<frame>ˋ, ˋ<iframe>ˋ, ˋ<embed>ˋ u ˋ<object>ˋ. El objetivo principal es mitigar el riesgo de [Clickjacking]. El valor predeterminado es ˋfalseˋ.
 
====== strict_transport_security

Establézcalo en ˋtrueˋ si desea habilitar el encabezado de respuesta HTTP ˋStrict-Transport-Securityˋ (HSTS). Esto solo se envía cuando HTTPS está habilitado en esta configuración. HSTS les dice a los navegadores que solo se debe acceder al sitio mediante HTTPS.

====== stric_transport_security_max_age_seconds

Establece cuánto tiempo un navegador debe almacenar en caché HSTS en segundos. Solo se aplica si strict_transport_security está habilitada. El valor predeterminado es ˋ86400ˋ.

====== strict_transport_security_preload

Establézcalo en ˋtrueˋ para habilitar la opción preloading de HSTS. Solo se aplica si strict_transport_security está habilitada. El valor predeterminado es ˋfalseˋ.

====== strict_transport_security_subdomains

Establézcalo en ˋtrueˋ si desea habilitar la opción HSTS includeSubDomains. Solo se aplica si strict_transport_security está habilitada. El valor predeterminado es ˋfalseˋ.

====== x_content_type_options

Establézcalo en ˋtrueˋ para habilitar el encabezado de respuesta X-Content-Type-Options. El encabezado HTTP de respuesta X-Content-Type-Options es un marcador utilizado por el servidor para indicar que los tipos MIME anunciados en los encabezados Content-Type no deben cambiarse y seguirse. El valor predeterminado es ˋfalseˋ.

====== x_xss_protection

Configúrelo en ˋfalseˋ para deshabilitar el encabezado X-XSS-Protection, que le dice a los navegadores que dejen de cargar las páginas cuando detectan ataques de scripts entre sitios (XSS) reflejados. El valor predeterminado es ˋfalseˋ hasta la próxima versión secundaria, ˋ6.3ˋ.

====== content_security_policy

Establézcalo en ˋtrueˋ para agregar el encabezado Content-Security-Policy a sus solicitudes. CSP permite controlar los recursos que el agente de usuario puede cargar y ayuda a prevenir ataques XSS.

====== content_security_policy_template

Establezca la plantilla de Política de seguridad de contenido utilizada al agregar el encabezado Content-Security-Policy a sus solicitudes. ˋ$NONCEˋ en la plantilla incluye un nonce aleatorio.

===== [snapshots]

====== external_enabled

Establézcalo en ˋfalseˋ para deshabilitar el punto final de publicación de instantáneas externas (el valor predeterminado es ˋtrueˋ).

====== external_snapshot_url

Establezca la raiz URL en una instancia de Grafana donde desee publicar instantáneas externas (el valor predeterminado es [https://snapshots-origin.raintank.io]).

====== external_snapshot_name

Establecer nombre para el botón de instantánea externa. El valor predeterminado es ˋPublish to snapshot.raintank.ioˋ.

====== public_mode

Establézcalo en ˋtrueˋ para permitir que esta instancia de Grafana actúe como un servidor de instantáneas externo y permita solicitudes no autenticadas para crear y eliminar instantáneas. El valor predeterminado es ˋfalseˋ.

====== snapshot_remove_expired

Habilite esta opción para eliminar automáticamente las instantáneas caducadas. El valor predeterminado es ˋtrueˋ.

===== [dashboards]

====== versions_to_keep

Número de versiones del tablero para conservar (por tablero). Predeterminado: ˋ20ˋ, Mínimo: ˋ1ˋ.

====== min_refresh_interval

****
Solo disponible en Grafana v6.7 +.
****

Esta función evita que los usuarios establezcan el intervalo de actualización del tablero en un valor menor que un valor de intervalo dado. El valor de intervalo predeterminado es de 5 segundos. La cadena de intervalo es una secuencia posiblemente firmada de números decimales, seguida de un sufijo de unidad (ms, s, m, h, d), p. Ej. ˋ30sˋ o ˋ1mˋ.

A partir de Grafana v7.3, esto también limita las opciones de intervalo de actualización en Explorar.

====== default_home_dashboard_path

Ruta al tablero de inicio predeterminado. Si este valor está vacío, entonces Grafana usa StaticRootPath + “dashboards/home.json”

===== [users]

====== allow_sign_up

Configúrelo en ˋfalseˋ para prohibir que los usuarios puedan registrarse/crear cuentas de usuario. El valor predeterminado es ˋfalseˋ. El usuario administrador aún puede crear usuarios desde las [Páginas de Administrador de Grafana].

====== allow_org_create

Configúrelo en ˋfalseˋ para prohibir a los usuarios crear nuevas organizaciones. El valor predeterminado es ˋfalseˋ.

====== auto_assign_org

Configúrelo en true para agregar automáticamente nuevos usuarios a la organización principal (id 1). Cuando se establece en ˋfalseˋ, los nuevos usuarios automáticamente hacen que se cree una nueva organización para ese nuevo usuario. El valor predeterminado es ˋtrueˋ.

====== auto_assign_org_id

Establezca este valor para agregar automáticamente nuevos usuarios a la organización proporcionada. Esto requiere que ˋauto_assign_orgˋ se establezca en ˋtrueˋ. Asegúrese de que esta organización ya exista. El valor predeterminado es 1.

====== auto_assign_org_role

El rol que se asignará a los nuevos usuarios en laorganización principal (si la configuración anterior se establece en ˋtrueˋ). El valor predeterminado es ˋViewerˋ, otras opciones válidas son ˋAdminˋ y ˋEditorˋ.e.g.:

ˋauto_assign_org_role = Viewerˋ

====== verify_email_enabled

Requiere validación por correo electrónico antes de que se complete el registro. El valor predeterminado es ˋfalseˋ.

====== login_hint

Texto utilizado como texto de marcador de posición en la página de inicio de sesión para la entrada de inicio de sesión/nombre de usuario.

====== password_hint

Texto utilizado como texto de marcador de posición en la página de inicio de sesión para ingresar la contraseña.

====== default_theme

Establezca el tema de la interfaz de usuario predeterminado: ˋdarkˋ o ˋlightˋ. El valor predeterminado es ˋdarkˋ.

====== home_page

Ruta a una página de inicio personalizada. Los usuarios solo son redirigidos a esto si se usa el tablero de inicio predeterminado. Debe coincidir con una ruta de interfaz y contener una barra al principio.

====== Gestión de usuarios externos

Si administra usuarios de forma externa, puede reemplazar el botón de invitación de usuario para organizaciones con un enlace a un sitio externo junto con una descripción.

====== viewers_can_edit

Los espectadores pueden acceder y utilizar [Explorar] y realizar ediciones temporales en los paneles de los tableros a los que tienen acceso. No pueden guardar sus cambios. El valor predeterminado es ˋfalseˋ.

====== editors_can_admin

Los editores pueden administrar tableros, carpetas y equipos que creen. El valor predeterminado es ˋfalseˋ.

====== user_invite_max_lifetime_duration

El tiempo que dura una invitación de usuario válida antes de caducar. Esta configuración debe expresarse como una duración. Ejemplos: 6h (horas), 2d (días), 1w (semana). El valor predeterminado es ˋ24hˋ (24 horas). La duración mínima admitida es de ˋ15mˋ (15 minutos).

====== hidden_users

Esta es una lista de nombres de usuario separados por comas. Los usuarios especificados aquí están ocultos en la interfaz de usuario de Grafana. Todavía son visibles para los administradores de Grafana y para ellos mismos.

===== [auth]

Grafana ofrece muchas formas de autenticar a los usuarios. Consulte la [Descripción general de la autenticación de Grafana] y otra documentación de autenticación para obtener instrucciones detalladas sobre cómo configurar la autenticación.

====== login_cookie_name

El nombre de la cookie para almacenar el token de autenticación. El valor predeterminado es ˋgrafana_sessionˋ.

====== login_maximum_inactive_lifetime_duration

La vida máxima (duración) que un usuario autenticado puede estar inactivo antes de que se le solicite que inicie sesión en la próxima visita. El valor predeterminado es 7 días (7d). Esta configuración debe expresarse como una duración, p. Ej. 5m (minutos), 6h (horas), 10d (días), 2w (semanas), 1M (mes). La vida útil se restablece en cada rotación de token exitosa (token_rotation_interval_minutes).

====== login_maximum_lifetime_duration

La vida máxima (duración) que un usuario autenticado puede estar dentro desde el tiempo de inicio de sesión antes de que se le solicite iniciar sesión. El valor predeterminado es 30 días (30d). Esta configuración debe expresarse como una duración, por ejemplo: 5m (minutos), 6h (horas), 10d (días), 2w (semanas), 1M (mes).

====== token_rotation_interval_minutes

Con qué frecuencia se rotan los tokens de autenticación para usuarios autenticados cuando el usuario está activo. El valor predeterminado es cada 10 minutos.

====== disable_login_form

Establézcalo en true para deshabilitar (ocultar) el formulario de inicio de sesión, útil si usa OAuth. El valor predeterminado es false.

====== disable_signout_menu

Configúrelo en ˋtrueˋ para deshabilitar el enlace de cierre de sesión en el menú lateral. Esto es útil si usa auth.proxy. El valor predeterminado es ˋfalseˋ.

====== signout_redirect_url

URL a la que redirigir al usuario después de cerrar la sesión.

====== oauth_auto_login

Configure en true para intentar iniciar sesión con OAuth automáticamente, omitiendo la pantalla de inicio de sesión. Esta configuración se ignora si se configuran varios proveedores de OAuth. El valor predeterminado es ˋfalseˋ.

====== oauth_state_cookie_max_age

Cuántos segundos vive la cookie de estado de OAuth antes de ser eliminada. El valor predeterminado es ˋ600ˋ (segundos). Los administradores pueden aumentar este valor si experimentan errores de discrepancia en el estado de inicio de sesión de OAuth.

====== api_key_max_seconds_to_live

Límite de segundos de vida de la clave API antes de su vencimiento. El valor predeterminado es -1 (ilimitado).

====== sigv4_auth_enabled

****
Solo disponible en Grafana 7.3+.
****

Establézcalo en ˋtrueˋ para habilitar la opción de autenticación AWS Signature Version 4 para fuentes de datos basadas en HTTP. El valor predeterminado es ˋfalseˋ.

===== [auth.anonymous]

Consulte [Autenticación Anónima] para obtener instrucciones detalladas.

===== [auth.github]

Consulte la [Autenticación de GitHub OAuth2] para obtener instrucciones detalladas.

===== [auth.gitlab]

Consulte la [Autenticación de Gitlab OAuth2] para obtener instrucciones detalladas.

===== [auth.google]

Consulte la [Autenticación de Google OAuth2] para obtener instrucciones detalladas.

===== [auth.grafananet]

Nombres de claves heredados, todavía en el archivo de configuración para que funcionen en variables env.

===== [auth.grafana_com]

Nombres de claves heredados, todavía en el archivo de configuración para que funcionen en variables env.

===== [auth.azuread]

Consulte la [Autenticación de Azure AD OAuth2] para obtener instrucciones detalladas.

===== [auth.okta]

Consulte la [Autenticación Okta OAuth2] para obtener instrucciones detalladas.

===== [auth.generic_oauth]

Consulte la [Autenticación genética de OAuth] para obtener instrucciones detalladas.

===== [auth.basic]

Consulte [Autenticación Básica] para obtener instrucciones detalladas.

===== [auth.proxy]

Consulte [Autenticación de Proxy] de Autenticación para obtener instrucciones detalladas.

===== [auth.ldap]

Consulte la [Autenticación LDAP] para obtener instrucciones detalladas.

===== [aws]

Puede configurar complementos de AWS principales y externos.

====== allowed_auth_providers

Especifique qué proveedores de autenticación permiten los complementos de AWS. Para obtener una lista de proveedores permitidos, consulte la página de configuración de la fuente de datos para un complemento determinado. Si configura un complemento mediante el aprovisionamiento, solo se permiten los proveedores que se especifican en ˋallowed_auth_providersˋ.

Opciones: ˋdefaultˋ (AWS SDK predeterminado), ˋkeysˋ (acceso y clave secreta), ˋcredentialsˋ (archivo de credenciales), ˋec2_iam_roleˋ (rol EC2 IAM)

====== assume_role_enabled

Establézcalo en ˋfalseˋ para deshabilitar la autenticación de AWS para que no use un rol asumido con credenciales de seguridad temporales. Para obtener detalles sobre asumir roles, consulte la documentación de referencia de la API de AWS sobre la operación [AssumeRole].

Si esta opción está deshabilitada, los campos *Assume Role* y *External Id* se eliminan de la página de configuración de la fuente de datos de AWS. Si el complemento se configura mediante el aprovisionamiento, es posible utilizar un rol asumido siempre que ˋassume_role_enabledˋ esté establecido en ˋtrueˋ.

====== list_metrics_page_limit

Utilice la opción de [Lista de Métricas API] para cargar métricas para espacios de nombres personalizados en la fuente de datos de CloudWatch. De forma predeterminada, el límite de páginas es 500.

===== [auth.jwt]

Consulte la [Autenticación JWT] para obtener más información.

===== [smtp]

Configuración del servidor de correo electrónico.

====== enabled

Habilite esto para permitir que Grafana envíe correo electrónico. El valor predeterminado es ˋfalseˋ.

Si la contraseña contiene /* o ;, entonces debe envolverla con comillas triples. Ejemplo: “""/*password;”""

====== host

El valor predeterminado es ˋlocalhost:25ˋ.

====== user

En caso de autenticación SMTP, el valor predeterminado es ˋemptyˋ.

====== password

En caso de autenticación SMTP, el valor predeterminado es ˋemptyˋ.

====== cert_file

Ruta de archivo a un archivo de certificado, el valor predeterminado es ˋemptyˋ.

====== key_file

Ruta de archivo a un archivo de clave, el valor predeterminado es ˋemptyˋ.

====== skip_verify

Verifique SSL para el servidor SMTP, el valor predeterminado es ˋfalseˋ.

====== from_address

Dirección utilizada al enviar correos electrónicos, la predeterminada es ˋadmin@grafana.localhostˋ.

====== from_name

Nombre que se utilizará al enviar correos electrónicos, el predeterminado es ˋGrafanaˋ.

====== ehlo_identity

Nombre que se utilizará como identidad de cliente para EHLO en el cuadro de diálogo SMTP, el valor predeterminado es ˋ<instance_name>ˋ.

====== startTLS_policy

Ya sea "OpportunisticStartTLS", "MandatoryStartTLS", "NoStartTLS". El valor predeterminado es ˋemptyˋ.

===== [emails]

====== welcome_email_on_sign_up

El valor predeterminado es ˋfalseˋ.

====== templates_pattern

El valor predeterminado es ˋemails/*.htmlˋ.

===== [log]

Opciones de registro de Grafana.

====== mode

Las opciones son console, file y syslog. El valor predeterminado es console y file. Utilice espacios para separar varios modos, p. Ej. ˋconsole fileˋ.

====== level

Las opciones son debug, info, warn, error y critical. El valor predeterminado es ˋinfoˋ.

====== filters

Configuraciones opcionales para establecer diferentes niveles para registradores específicos. Por ejemplo: ˋfilters = sqlstore:debugˋ

===== [log.console]

Solo es aplicable cuando se utiliza console en modo ˋ[log]ˋ.

====== level

Las opciones son debug, info, warn, error y critical. El valor predeterminado se hereda del nivel ˋ[log]ˋ.

====== format

Formato de línea de registro, las opciones válidas son text, console y json. El valor predeterminado es la ˋconsoleˋ.

===== [log.file]

Solo se aplica cuando se utiliza file en el modo ˋ[log].

====== level

Las opciones son debug, info, warn, error y critical. El valor predeterminado se hereda del nivel ˋ[log]ˋ.

====== format

Formato de línea de registro, las opciones válidas son text, console y json. El valor predeterminado es ˋtextˋ.

====== log_rotate

Habilite la rotación automática de registros, las opciones válidas son ˋfalseˋ o ˋtrueˋ. El valor predeterminado es ˋtrueˋ. Cuando está habilitado use ˋmax_linesˋ, ˋmax_size_shiftˋ, ˋdaily_rotateˋ y ˋmax_daysˋ para configurar el comportamiento de la rotación del registro.

====== max_lines

Máximo de líneas por archivo antes de rotarlo. El valor predeterminado es ˋ1000000ˋ.

====== max_size_shift

Tamaño máximo del archivo antes de rotarlo. El valor predeterminado es ˋ28ˋ, lo que significa ˋ1 << 28ˋ, ˋ256 MBˋ.

====== daily_rotate

Habilite la rotación diaria de archivos, las opciones válidas son ˋfalseˋ o ˋtrueˋ. El valor predeterminado es ˋtrueˋ.

====== max­_days

Número máximo de días para mantener los archivos de registro. El valor predeterminado es ˋ7ˋ.

===== [log.syslog]

Solo se aplica cuando se utiliza syslog en el modo ˋ[log]ˋ.

====== level

Las opciones son debug, info, warn, error y critical. El valor predeterminado se hereda del nivel ˋ[log]ˋ.

====== format

Formato de línea de registro, las opciones válidas son text, console y json. El valor predeterminado es ˋtextˋ.

====== network and address

Tipo y dirección de red de Syslog. Puede ser UDP, TCP o UNIX. Si se deja en blanco, se utilizan los puntos finales de UNIX predeterminados.

====== facility

Instalación de Syslog. Las opciones válidas son user, daemon o local0 hasta local7. El valor predeterminado es empty.

====== tag

Etiqueta de Syslog. De forma predeterminada, se utiliza el ˋargv[0]ˋ del proceso.

===== [log.frontend]

*Nota:* esta función está disponible en Grafana 7.4+.

====== enabled

Se inicializa el agente javascript de Sentry. El valor predeterminado es ˋfalseˋ.

====== sentry_dsn

Sentry DSN si desea enviar eventos a Sentry

====== custom_endpoint

Punto final HTTP personalizado al que enviar eventos capturados por el agente Sentry. Por defecto, ˋ/logˋ, registrará los eventos en stdout.

====== sample_rate

Tasa de eventos que se informarán entre ˋ0ˋ (ninguno) y ˋ1ˋ (todos, predeterminado), flotante.

====== log_endpoint_requests_per_second_limit

Límite de solicitudes por segundo aplicado por un período prolongado, para el punto de conexión de ingestión de registros de backend de Grafana, ˋ/logˋ. El valor predeterminado es ˋ3ˋ.

====== log_endpoint_burst_limit

Número máximo de solicitudes aceptadas por intervalo corto de tiempo para el punto de conexión de ingestión de registros de backend de Grafana, ˋ/logˋ. El valor predeterminado es ˋ15ˋ.

===== [quota]

Establezca cuotas en ˋ-1ˋ para hacer ilimitadas.

====== enabled

Habilite las cuotas de uso. El valor predeterminado es ˋfalseˋ.

====== org_user

Limite la cantidad de usuarios permitidos por organización. El valor predeterminado es 10.

====== org_dashboard

Limite la cantidad de tableros permitidos por organización. El valor predeterminado es 100.

====== org_data_source

Limite la cantidad de fuentes de datos permitidas por organización. El valor predeterminado es 10.

====== org_api_key

Limite la cantidad de claves de API que se pueden ingresar por organización. El valor predeterminado es 10.

====== user_org

Limite el número de organizaciones que puede crear un usuario. El valor predeterminado es 10.

====== global_user

Establece un límite global de usuarios. El valor predeterminado es -1 (ilimitado).

====== global_org

Establece un límite global en el número de organizaciones que se pueden crear. El valor predeterminado es -1 (ilimitado).

====== global_dashboard

Establece un límite global en la cantidad de tableros que se pueden crear. El valor predeterminado es -1 (ilimitado).

====== global_api_key

Establece el límite global de claves API que se pueden ingresar. El valor predeterminado es -1 (ilimitado).

====== global_session

Establece un límite global en el número de usuarios que pueden iniciar sesión a la vez. El valor predeterminado es -1 (ilimitado).

===== [alerting]

Para obtener más información sobre la función de Alertas en Grafana, consulte [Descripción general de las alertas].

====== enabled

Configúrelo en ˋfalseˋ para deshabilitar el motor de alertas y ocultar las alertas en la interfaz de usuario de Grafana. El valor predeterminado es ˋtrueˋ.

====== execute_alerts

Desactiva la ejecución de reglas de alerta, pero las alertas siguen estando visibles en la interfaz de usuario de Grafana.

====== error_or_timeout

Configuración predeterminada para nuevas reglas de alerta. De forma predeterminada, los errores y los tiempos de espera se clasifican como alertas. (alerting, keep_state)

====== nodata_or_nullvalues

Define cómo Grafana maneja nodata o valores nulos en las alertas. Las opciones son ˋalertingˋ, ˋno_dataˋ, ˋkeep_stateˋ y ˋokˋ. El valor predeterminado es ˋno_dataˋ.

====== concurrent_render_limit

Las notificaciones de alerta pueden incluir imágenes, pero la representación de muchas imágenes al mismo tiempo puede sobrecargar el servidor. Este límite protege al servidor de la sobrecarga de procesamiento y garantiza que las notificaciones se envíen rápidamente. El valor predeterminado es ˋ5ˋ.

====== evaluation_timeout_seconds

Establece el tiempo de espera del cálculo de la alerta. El valor predeterminado es ˋ30ˋ.

====== notification_timeout_seconds

Establece el tiempo de espera de la notificación de alerta. El valor predeterminado es ˋ30ˋ.

====== max_attempts

Establece un límite máximo de intentos de enviar notificaciones de alerta. El valor predeterminado es ˋ3ˋ.

====== min_interval_seconds

Establece el intervalo mínimo entre evaluaciones de reglas. El valor predeterminado es ˋ1ˋ.

[NOTE] 
====
Esta configuración tiene prioridad sobre la frecuencia de cada regla individual. Si la frecuencia de una regla es menor que este valor, este valor se aplica.
====

====== max_annotation_age =

Configura durante cuánto tiempo se almacenan las anotaciones de alerta. El valor predeterminado es 0, que los mantiene para siempre. Esta configuración debe expresarse como una duración. Ejemplos: 6h (horas), 10d (días), 2w (semanas), 1M (mes).

====== max_annotations_to_keep =

Configura el número máximo de anotaciones de alerta que almacena Grafana. El valor predeterminado es 0, que conserva todas las anotaciones de alerta.

===== [annotations]

====== cleanupjob_batchsize

Configura el tamaño del lote para el trabajo de limpieza de anotaciones. Esta configuración se utiliza para anotaciones de alertas, API y tableros.

===== [annotations.dashboard]

Las anotaciones del tablero significan que las anotaciones están asociadas con el tablero en el que se crean.

====== max_age

Configura cuánto tiempo se almacenan las anotaciones del tablero. El valor predeterminado es 0, que los mantiene para siempre. Esta configuración debe expresarse como una duración. Ejemplos: 6h (horas), 10d (días), 2w (semanas), 1M (mes).

====== max_annotations_to_keep

Configura el número máximo de anotaciones del tablero que almacena Grafana. El valor predeterminado es 0, que conserva todas las anotaciones del tablero.

===== [annotations.api]

Las anotaciones de API significan que las anotaciones se han creado utilizando la API sin ninguna asociación con un tablero.

====== max_age

Configura cuánto tiempo Grafana almacena las anotaciones de la API. El valor predeterminado es 0, que los mantiene para siempre. Esta configuración debe expresarse como una duración. Ejemplos: 6h (horas), 10d (días), 2w (semanas), 1M (mes).

====== max_annotations_to_keep

Configura el número máximo de anotaciones de API que guarda Grafana. El valor predeterminado es 0, que conserva todas las anotaciones de la API.

===== [explore]

Para obtener más información sobre esta función, consulte [Explorar].

====== enabled

Habilite o deshabilite la sección Explorar. El valor predeterminado es ˋenabledˋ.

===== [metrics]

Para obtener instrucciones detalladas, consulte las [Métricas Internas de Grafana].

====== enabled

Habilite los informes de métricas. El valor predeterminado es true. Disponible a través de HTTP API ˋ<URL>/metricsˋ.

====== interval_seconds

Intervalo de descarga/escritura al enviar métricas a la TSDB externa. El valor predeterminado es ˋ10ˋ.

====== disable_total_stats

Si se establece en ˋtrueˋ, la generación de estadísticas totales (ˋstat_totals_* metricsˋ) está deshabilitada. El valor predeterminado es ˋfalseˋ.

====== basic_auth_username y basic_auth_password

Si ambos están configurados, entonces se requiere autenticación básica para acceder al punto final de métricas.

===== [metrics.environment_info]

Agrega dimensiones a la métrica ˋgrafana_environment_infoˋ, que puede mostrar más información sobre la instancia de Grafana.

ˋ; exampleLabel1 = exampleValue1
; exampleLabel2 = exampleValue2ˋ

===== [metrics.graphite]

Utilice estas opciones si desea enviar métricas internas de Grafana a Graphite.

====== address

Habilitar configurando la dirección. El formato es ˋ<Hostname or ip>ˋ:port.

====== prefix

Prefijo métrico de Graphite. El valor predeterminado es ˋprod.grafana.%(instance_name)sˋ.

===== [grafana_net]

====== url

El valor predeterminado es https://grafana.com.

===== [grafana_com]

====== url

El valor predeterminado es https://grafana.com.

===== [tracing.jaeger]

Configure el cliente Jaeger de Grafana para el seguimiento distribuido.

También puede utilizar las variables de entorno ˋJAEGER_*ˋ estándar para configurar Jaeger. Consulte la tabla al final de https://www.jaegertracing.io/docs/1.16/client-features/ para ver la lista completa. Las variables de entorno anularán cualquier configuración proporcionada aquí.

====== address

El host:port de destino para informes de intervalos. (ej: ˋlocalhost:6831ˋ)

Se puede configurar con las variables de entorno ˋJAEGER_AGENT_HOSTˋ y ˋJAEGER_AGENT_PORTˋ.

====== always_included_tag

Lista de etiquetas separadas por comas para incluir en todos los tramos nuevos, como ˋtag1:value1,tag2:value2ˋ.

Se puede configurar con la variable de entorno ˋJAEGER_TAGSˋ (use ˋ=ˋ en lugar de ˋ:ˋ con la variable de entorno).

====== sampler_type

El valor predeterminado es ˋconstˋ.

Especifica el tipo de muestreador: ˋconstˋ, ˋprobabilisticˋ, ˋratelimitingˋ o ˋremoteˋ.

Consulte https://www.jaegertracing.io/docs/1.16/sampling//*client-sampling-configuration para obtener detalles sobre los diferentes tipos de rastreo.

Se puede configurar con la variable de entorno ˋJAEGER_SAMPLER_TYPEˋ.

====== sampler_param

El valor predeterminado es ˋ1ˋ.

Este es el parámetro de configuración del muestreador. Dependiendo del valor de ˋsampler_typeˋ, puede ser ˋ0ˋ, ˋ1ˋ o un valor decimal intermedio.

* Para muestreador ˋconstˋ, ˋ0ˋ o ˋ1ˋ para siempre ˋfalseˋ/ˋtrueˋ respectivamente
* Para el muestreador probabilistic, una probabilidad entre ˋ0ˋ y ˋ1.0ˋ
* Para el muestreador ˋrateLimitingˋ, el número de intervalos por segundo
* Para el muestreador ˋremoteˋ, param es el mismo que para el ˋprobabilisticˋ e indica la frecuencia de muestreo inicial antes de que se reciba la real de la nave nodriza.

Puede establecerse con la variable de entorno ˋJAEGER_SAMPLER_PARAMˋ.

====== sampling_server_url

sampling_server_url es la URL de un administrador de muestreo que proporciona una estrategia de muestreo.

====== zipkin_propagation

El valor predeterminado es ˋfalseˋ.

Controla si se utiliza o no el formato de propagación de intervalo de Zipkin (con encabezados HTTP ˋx-b3-ˋ). De forma predeterminada, se utiliza el formato de Jaeger.

Se puede configurar con la variable de entorno y el valor ˋJAEGER_PROPAGATION=b3ˋ.

====== disable_shared_zipkin_spans

El valor predeterminado es ˋfalseˋ.

Si se establece en ˋtrueˋ, se desactivan los intervalos de RPC compartidos. Dejar esto disponible es la configuración más común cuando se usa Zipkin en cualquier otro lugar de su infraestructura.

===== [external_image_storage]

Estas opciones controlan cómo se deben hacer públicas las imágenes para que puedan compartirse en servicios como Slack o mensajes de correo electrónico.

====== provider

Las opciones son s3, webdav, gcs, azure_blob, local). Si se deja vacío, Grafana ignora la acción de carga.

===== [external_image_storage.s3]

====== endpoint

URL de punto final opcional (nombre de host o URI completo) para anular el punto final S3 generado por defecto. Si desea mantener el valor predeterminado, déjelo vacío. Aún debe proporcionar un valor de ˋregionˋ si especifica un punto final.

====== path_style_access

Establezca esto en true para forzar el direccionamiento de estilo de ruta en las solicitudes de S3, es decir, http://s3.amazonaws.com/BUCKET/KEY, en lugar del predeterminado, que es el direccionamiento de depósito alojado virtual cuando sea posible (http: // BUCKET. s3.amazonaws.com/KEY).

[NOTE] 
====
Esta opción es específica del servicio Amazon S3.
====

====== bucket_url

(Para compatibilidad con versiones anteriores, solo funciona cuando no hay ningún depósito o región configurados) URL del depósito para S3. La región de AWS se puede especificar dentro de la URL o su valor predeterminado es "us-east-1", p. Ej.

* http://grafana.s3.amazonaws.com/
* https://grafana.s3-ap-southeast-2.amazonaws.com/

====== bucket

Nombre del segmento para S3. p.ej. grafana.snapshot.

====== region

Nombre de la región para S3. p.ej. "Us-east-1", "cn-north-1", etc.

====== path

Ruta adicional opcional dentro del depósito, útil para aplicar políticas de vencimiento.

====== access_key

Clave de acceso, p. Ej. AAAAAAAAAAAAAAAAAAAA.

La clave de acceso requiere permisos para el depósito S3 para las acciones "s3: PutObject" y "s3: PutObjectAcl".

====== secret_key

Clave secreta, p. Ej. AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA.

===== [external_image_storage.webdav]

====== url

URL donde Grafana envía la solicitud PUT con imágenes.

====== username

Nombre de usuario de autenticación básico.

====== password

Contraseña de autenticación básica.

====== public_url

URL opcional para enviar a los usuarios en notificaciones. Si la cadena contiene la secuencia $\{file}, se reemplaza con el nombre del archivo cargado. De lo contrario, el nombre del archivo se agrega a la parte de la ruta de la URL, sin modificar ninguna cadena de consulta.

===== [external_image_storage.gcs]

====== key_file

Ruta opcional al archivo de claves JSON asociado con una cuenta de servicio de Google para autenticar y autorizar. Si no se proporciona ningún valor, intenta utilizar las credenciales predeterminadas de la aplicación. Las claves de la cuenta de servicio se pueden crear y descargar desde https://console.developers.google.com/permissions/serviceaccounts.

La Cuenta de Servicio debe tener el rol de "Escritor de Objetos de Almacenamiento". El modelo de control de acceso del depósito debe ser "Establecer permisos a nivel de objeto y de cubo". Grafana mismo hará que las imágenes sean legibles para el público cuando las URL firmadas no estén habilitadas.

====== bucket

Nombre del cubo en Google Cloud Storage.

====== path

Ruta adicional opcional dentro del cubo.

====== enable_signed_urls

Si se establece en true, Grafana crea una [URL firmada] (https://cloud.google.com/storage/docs/access-control/signed-urls) para la imagen cargada en Google Cloud Storage.

====== signed_url_expiration

Establece la caducidad de la URL firmada, cuyo valor predeterminado es de siete días.

===== [external_image_storage.azure_blob]

====== account_name

Nombre de la cuenta de almacenamiento.

====== account_key

Clave de cuenta de almacenamiento

====== container_name

Nombre del contenedor donde almacenar imágenes "Blob" con nombres aleatorios. Es necesario crear el contenedor de blobs de antemano. Solo se admiten contenedores públicos.

===== [external_image_storage.local]

Esta opción no requiere ninguna configuración.

===== [rendering]

Opciones para configurar un servicio de representación de imágenes HTTP remoto, ej: utilizando https://github.com/grafana/grafana-image-renderer.

====== server_url

URL a un servicio de representación de imágenes HTTP remoto, ej: http://localhost:8081/render, permitirá a Grafana representar paneles y tableros en imágenes PNG mediante solicitudes HTTP a un servicio externo.

====== callback_url

Si el servicio de renderizador de imágenes HTTP remoto se ejecuta en un servidor diferente al servidor de Grafana, es posible que deba configurarlo en una URL donde se pueda acceder a Grafana, ej: http://grafana.domain/.

====== concurrent_render_request_limit

El límite de solicitud de procesamiento simultáneo afecta cuando se usa el punto final HTTP /render. La representación de muchas imágenes al mismo tiempo puede sobrecargar el servidor, contra lo que esta configuración puede ayudar a proteger al permitir solo una cierta cantidad de solicitudes simultáneas. El valor predeterminado es ˋ30ˋ.

===== [paneles]

====== enable_alpha

Establézcalo en true si desea probar paneles alfa que aún no están listos para uso general. El valor predeterminado es false.

====== disable_sanitize_html

Si se establece en true, Grafana permitirá etiquetas de script en paneles de texto. No recomendado ya que habilita vulnerabilidades XSS. El valor predeterminado es false. Esta configuración se introdujo en Grafana v6.0.

===== [plugins]

====== enable_alpha

Establézcalo en ˋtrueˋ si desea probar los complementos alfa que aún no están listos para el uso general. El valor predeterminado es ˋfalseˋ.

====== allow_loading_unsigned_plugins

Ingrese una lista separada por comas de identificadores de complementos para identificar los complementos que pueden cargarse incluso si carecen de una firma válida.

====== marketplace_url

url personalizado para instalar/aprender más para complementos empresariales. El valor predeterminado es https://grafana.com/grafana/plugins/.

===== [plugin.grafana-image-renderer]

Para obtener más información, consulte [Renderizado de imágenes].

====== rendering_timezone

Indique a la instancia del navegador sin cabeza que use una zona horaria predeterminada cuando no la proporcione Grafana, por ejemplo: al renderizar la imagen del panel de alerta. Consulte [ICUs metaZones.txt] para obtener una lista de los ID de zona horaria admitidos. Recurre a la variable de entorno TZ si no se establece.

====== rendering_language

Indique a la instancia del navegador sin cabeza que utilice un idioma predeterminado cuando no lo proporcione Grafana, p. Ej. al renderizar la imagen del panel de alerta. Consulte el encabezado HTTP Accept-Language para comprender cómo formatear este valor, ej: ‘fr-CH, fr;q=0.9, en;q=0.8, de;q=0.7, *;q=0.5’.

====== rendering_viewport_device_scale_factor

Indique a la instancia del navegador sin cabeza que utilice un factor de escala de dispositivo predeterminado cuando no lo proporcione Grafana, p. Ej. al renderizar la imagen del panel de alerta. El valor predeterminado es ˋ1ˋ. El uso de un valor más alto producirá imágenes más detalladas (DPI más alto), pero requiere más espacio en disco para almacenar una imagen.

====== rendering_ignore_https_errors

Indique a la instancia del navegador sin cabeza si debe ignorar los errores HTTPS durante la navegación. Los errores HTTPS predeterminados no se ignoran. Debido al riesgo de seguridad, no recomendamos que ignore los errores HTTPS.

====== rendering_verbose_logging

Indique a la instancia del navegador sin cabeza si debe capturar y registrar información detallada al renderizar una imagen. El valor predeterminado es false y solo capturará y registrará mensajes de error.

Cuando está habilitado, los mensajes de depuración también se capturan y registran.

Para que la información detallada se incluya en el registro del servidor Grafana, debe ajustar el nivel del registro de renderizado para depurar, configurar [log].filter = rendering:debug.

====== rendering_dumpio

Indique a la instancia del navegador sin cabeza si debe generar sus mensajes de error y depuración en el proceso en ejecución del servicio de representación remota. El valor predeterminado es ˋfalseˋ.

Puede ser útil establecer esto en true al solucionar problemas.

====== rendering_args

Argumentos adicionales para pasar a la instancia del navegador sin cabeza. El valor predeterminado es –no-sandbox. La lista de indicadores de Chromium se puede encontrar en (https://peter.sh/experiments/chromium-command-line-switches/). Separe varios argumentos con comas.

====== rendering_chrome_bin

Puede configurar el complemento para usar un binario de navegador diferente en lugar de la versión preempaquetada de Chromium.

Tenga en cuenta que esto no es recomendable. Puede encontrar problemas si la versión instalada de Chrome/Chromium no es compatible con el complemento.

====== rendering_mode

Indique cómo se crean las instancias de navegador sin cabeza. El valor predeterminado es ˋdefaultˋ y creará una nueva instancia de navegador en cada solicitud.

El modo clustered se asegurará de que solo un máximo de navegadores/páginas de incógnito puedan ejecutarse al mismo tiempo.

El modo reusable tendrá una instancia de navegador y creará una nueva página de incógnito en cada solicitud.

====== rendering_clustering_mode

Cuando rendering_mode = clustered, puede indicar cuántos navegadores o páginas de incógnito se pueden ejecutar al mismo tiempo. Por defecto es ˋbrowserˋ y se agrupará utilizando instancias de navegador.

El modo ˋcontextˋ se agrupará utilizando páginas de incógnito.

====== rendering_clustering_max_concurrency

Cuando rendering_mode = clustered, puede definir el número máximo de instancias del navegador/páginas de incógnito que se pueden ejecutar al mismo tiempo.

====== rendering_viewport_max_width

Limite el ancho máximo de la ventana gráfica que se puede solicitar.

====== rendering_viewport_max_height

Limite la altura máxima de la ventana gráfica que se puede solicitar.

====== rendering_viewport_max_device_scale_factor

Limite el factor de escala máximo del dispositivo de ventana gráfica que se puede solicitar.

====== grpc_host

Cambie el host de escucha del servidor gRPC. El host predeterminado es ˋ127.0.0.1ˋ.

====== grpc_port

Cambie el puerto de escucha del servidor gRPC. El puerto predeterminado es 0 y asignará automáticamente un puerto que no esté en uso.

===== [enterprise]

Para obtener más información sobre Grafana Enterprise, consulte [Grafana Enterprise].

===== [feature_toggles]

====== enable

Claves de funciones alfa para habilitar, separadas por espacio. Las características alfa disponibles son: ˋngalertˋ

===== [date_formats]

listening port

====
Las siguientes opciones de formato de fecha solo están disponibles en Grafana v7.2+.
====

Esta sección controla los valores predeterminados de todo el sistema para los formatos de fecha utilizados en rangos de tiempo, gráficos y cuadros de entrada de fecha.

Los patrones de formato utilizan tokens de formato [Moment.js].

====== full_date

Formato de fecha completa utilizado por el selector de rango de tiempo y en otros lugares donde se representa una fecha completa.

====== intervals

Estos formatos de intervalos se utilizan en el gráfico para mostrar solo una fecha u hora parcial. Por ejemplo, si solo hay minutos entre las etiquetas de marca del eje Y, se utiliza el formato ˋinterval_minuteˋ.

Predeterminados

interval_second = HH:mm:ss
interval_minute = HH:mm
interval_hour = MM/DD HH:mm
interval_day = MM/DD
interval_month = YYYY-MM
interval_year = YYYYˋ

====== use_browser_locale

Establezca esto en ˋtrueˋ para que los formatos de fecha se deriven automáticamente de la ubicación de su navegador. El valor predeterminado es ˋfalseˋ. Esta es una característica experimental.

====== default_timezone

Se utiliza como zona horaria predeterminada para las preferencias del usuario. Puede ser ˋbrowserˋ para la zona horaria local del navegador o un nombre de zona horaria de la base de datos de la zona horaria de IANA, como ˋUTCˋ o ˋEuropa/Amsterdamˋ.

===== [expressions]

[NOTE]
====
Esta función está disponible en Grafana v7.4 y versiones posteriores.
====

enabled

Establezca esto en ˋfalseˋ para deshabilitar expresiones y ocultarlas en la interfaz de usuario de Grafana. El valor predeterminado es ˋtrueˋ.

=== CLI de Grafana

==== CLI de Grafana

Grafana CLI es un pequeño ejecutable que se incluye con el servidor Grafana. Se puede ejecutar en la misma máquina en la que se ejecuta el servidor Grafana. Grafana CLI tiene comandos plugins y admin, así como opciones globales.

Para enumerar todos los comandos y opciones:

ˋgrafana-cli –hˋ

===== Invocar la CLI de Grafana

Para invocar la CLI de Grafana, agregue la ruta a los binarios de grafana en su variable de entorno ˋPATHˋ. Alternativamente, si su directorio actual es el directorio ˋbinˋ, use ˋ./grafana-cli.ˋ De lo contrario, puede especificar la ruta completa a la CLI. Por ejemplo, en Linux ˋ/usr/share/grafana/bin/grafana-cliˋ y en Windows ˋC:\ProgramFiles\GrafanaLabs\grafana\bin\grafana-cli.exeˋ.

[NOTE]
====
Algunos comandos, como instalar o eliminar complementos, requieren ˋsudoˋ en Linux. Si está en Windows, ejecute Windows PowerShell como administrador.
====

===== Sintaxis del comando de la CLI de Grafana

La sintaxis general de los comandos en la CLI Grafana es:

----
grafana-cli [global options] command [command option] [arguments...]
----

===== Opciones globales

Grafana CLI le permite anular temporalmente ciertas configuraciones predeterminadas de Grafana. A excepción de ˋ--helpˋ y ˋ--versionˋ, la mayoría de las opciones globales solo las utilizan los desarrolladores.

Cada opción global se aplica solo al comando en el que se usa. Por ejemplo, ˋ--pluginsDirˋ ˋvalueˋ no cambia permanentemente donde Grafana guarda los complementos. Solo lo cambia para el comando en el que aplica la opción.

====== Mostrar la ayuda de la CLI de Grafana

ˋ--helpˋ o ˋ-hˋ muestra la ayuda, incluidas las rutas predeterminadas y la información de configuración de Docker.

*Ejemplo:*

----
grafana-cli –h
----

====== Mostrar la versión de la CLI de Grafana

--version o -v imprime la versión de Grafana CLI que se está ejecutando actualmente.

*Ejemplo:*

grafana-cli –v

====== Anular el directorio de complementos predeterminado

ˋ--pluginsDir valueˋ anula la ruta a donde su instancia local de Grafana almacena complementos. Utilice esta opción si desea instalar, actualizar o eliminar un complemento en algún lugar que no sea el directorio predeterminado ("/var/lib/grafana/plugins") [$GF_PLUGIN_DIR].

*Ejemplo:*

----
grafana-cli --pluginsDir "/var/lib/grafana/devplugins" plugins install <plugin-id>
----

====== Anular la URL del repositorio del complemento predeterminado

ˋ--repo valueˋ le permite descargar e instalar o actualizar complementos desde un repositorio que no sea el repositorio predeterminado de Grafana.

*Ejemplo:*

----
grafana-cli --repo "https://example.com/plugins" plugins install <plugin-id>
----

====== Anular la URL .zip del complemento predeterminado

ˋ--pluginUrl valueˋ le permite descargar un archivo .zip que contiene un complemento desde una URL local en lugar de descargarlo desde la fuente predeterminada de Grafana.

*Ejemplo:*

----
grafana-cli --pluginUrl https://company.com/grafana/plugins/<plugin-id>-<plugin-version>.zip plugins install <plugin-id>
----

====== Anular la seguridad de la capa de transporte

*Advertencia:* Desactivar la TLS es un riesgo de seguridad significativo. No recomendamos utilizar esta opción.

ˋ--insecureˋ le permite desactivar la verificación de Seguridad de la capa de transporte (TLS) (inseguro). Es posible que desee hacer esto si está descargando un complemento de una fuente no predeterminada.

*Ejemplo:*

----
grafana-cli --insecure –pluginUrl https://company.com/grafana/plugins/<plugin-id>-<plugin-version>.zip plugins install <plugin-id>
----

====== Habilitar el registro de depuración

ˋ--debugˋ o ˋ-dˋ habilita el registro de depuración. La salida de depuración se devuelve y se muestra en la terminal.

*Ejemplo:*

----
grafana-cli --debug plugins install <plugin-id>
----

====== Anular un ajuste de configuración

ˋ--configOverridesˋ es un argumento de línea de comando que actúa como una anulación de variable de entorno.

Por ejemplo, puede usarlo para redirigir el registro a otro archivo (tal vez para registrar instalaciones de complementos en Grafana Cloud) o al restablecer la contraseña de administrador y tiene valores no predeterminados para algún valor de configuración importante (como dónde se encuentra la base de datos).

*Ejemplo:*

----
grafana-cli --configOverrides cfg:default.paths.log=/dev/null plugins install <plugin-id>
----

====== Anular el valor de la ruta de inicio

Establece la ruta para la ruta de instalación / inicio de Grafana, por defecto es el directorio de trabajo. No es necesario que lo utilice si se encuentra en el directorio de instalación de Grafana cuando utiliza la CLI.

*Ejemplo:*

----
grafana-cli --homepath "/usr/share/grafana" admin reset-admin-password <new password>
----

====== Anular archivo de configuración

ˋ--config valueˋ anula la ubicación predeterminada donde Grafana espera el archivo de configuración. Consulte [Configuración] para obtener más información sobre cómo configurar Grafana y las ubicaciones predeterminadas de los archivos de configuración.

*Ejemplo:*

----
grafana-cli --config "/etc/configuration/" admin reset-admin-password mynewpassword
----

===== Comandos de complementos

Grafana CLI le permite instalar, actualizar y administrar sus complementos de Grafana. Para obtener más información sobre la instalación de complementos, consulte la [página de complementos].

Todos los comandos enumerados se aplican a los repositorios y directorios predeterminados de Grafana. Puede anular los valores predeterminados con Opciones globales.

====== Lista de complementos disponibles

----
grafana-cli plugins list-remote
----

====== Instale la última versión de un complemento

----
grafana-cli plugins install <plugin-id>
----

====== Instalar una versión específica de un complemento

----
grafana-cli plugins install <plugin-id> <version>
----

====== Lista de complementos instalados

----
grafana-cli plugins ls
----

====== Actualizar todos los complementos instalados

----
grafana-cli plugins update-all
----

====== Actualizar un complemento

----
grafana-cli plugins update <plugin-id>
----

====== Quitar un complemento

----
grafana-cli plugins remove <plugin-id>
----

===== Comandos de administrador

Los comandos de administrador solo están disponibles en Grafana 4.1 y versiones posteriores.

====== Mostrar todos los comandos de administrador

----
grafana-cli admin
----

====== Restablecer contraseña de administrador

ˋgrafana-cli admin reset-admin-password <new password>ˋ restablece la contraseña del usuario administrador mediante la CLI. Es posible que deba hacer esto si pierde la contraseña de administrador.

Si se utilizan dos indicadores para establecer la ruta de inicio y la ruta del archivo de configuración, la ejecución del comando devuelve este error:

****
No se pudieron encontrar los valores predeterminados de configuración, asegúrese de que el parámetro de línea de comando homepath esté configurado o que el directorio de trabajo sea homepath
****

Para corregir esto, use la opción global ˋ--homepathˋ para especificar la ruta de inicio predeterminada de Grafana para este comando:

----
grafana-cli --homepath "/usr/share/grafana" admin reset-admin-password <new password>
----

Si no ha perdido la contraseña de administrador, le recomendamos que cambie la contraseña de usuario en las Preferencias de usuario o en la pestaña Administrador del servidor > Usuario.

Si necesita establecer la contraseña en un script, puede usar la API de usuario de Grafana.

====== Migrar datos y cifrar contraseñas

ˋdata-migrationˋ ejecuta un script que migra o limpia datos en su base de datos.

ˋencrypt-datasource-passwordsˋ migra contraseñas de campos no seguros al campo secure_json_data. Devuelve ok a menos que haya un error. Seguro de ejecutar varias veces.

*Ejemplo:*

----
grafana-cli admin data-migration encrypt-datasource-passwords
----

=== Seguridad

==== Seguridad

Si ejecuta servicios web que no son de Grafana en su servidor de Grafana o dentro de su red local, es posible que sean vulnerables a la explotación a través del proxy de la fuente de datos de Grafana u otros métodos.

Para evitar que suceda este tipo de explotación, le recomendamos que aplique una o más de las precauciones que se enumeran a continuación.

===== Limite las direcciones IP / nombres de host para la URL de la fuente de datos

Puede configurar Grafana para permitir que solo determinadas direcciones IP o nombres de host se utilicen como URL de origen de datos y se transfieran a través del proxy de origen de datos de Grafana. Consulte [data_source_proxy_whitelist] para obtener instrucciones de uso.

===== Reglas del cortafuegos

Configure un cortafuegos para restringir que Grafana realice solicitudes de red a servicios web internos sensibles.

Hay muchas herramientas de cortafuegos disponibles, consulte la documentación de su herramienta de seguridad específica. Por ejemplo, los usuarios de Linux pueden usar [iptables].

===== Servidor proxy

Requiera que todas las solicitudes de red que realiza Grafana pasen por un servidor proxy.

===== Limitar los permisos de consulta del visor

Los usuarios con el rol de Espectador pueden ingresar _cualquier consulta posible_ en _cualquiera_ de las fuentes de datos disponibles en la *organización*, no solo las consultas que están definidas en los tableros para los cuales el usuario tiene permisos de Espectador.

*Por ejemplo:* en una instancia de Grafana con una fuente de datos, un tablero y un panel que tiene una consulta definida, puede suponer que un Espectador solo puede ver el resultado de la consulta definida en ese panel. En realidad, el Espectador tiene acceso para enviar cualquier consulta a la fuente de datos. Con una herramienta de línea de comandos como curl (hay muchas herramientas para esto), el Espectador puede realizar su propia consulta a la fuente de datos y potencialmente acceder a datos confidenciales.

Para abordar esta vulnerabilidad, puede restringir el acceso a consultas de fuentes de datos de las siguientes maneras:

* Cree múltiples fuentes de datos con algunas restricciones agregadas en la configuración de la fuente de datos que restringen el acceso (como el nombre de la base de datos o las credenciales). Luego, use la función de Enterprise [Permisos de fuente de datos] para restringir el acceso de los usuarios a la fuente de datos en Grafana.
* Cree una organización en Grafana separada y, en esa organización, cree una fuente de datos separada. Asegúrese de que la fuente de datos tenga alguna configuración de opción / usuario / credenciales que limite el acceso a un subconjunto de los datos. No todas las fuentes de datos tienen la opción de limitar el acceso.

===== Implicaciones de habilitar el acceso anónimo a los tableros

Cuando habilita el acceso anónimo a un tablero, estará disponible públicamente. Esta sección enumera las implicaciones de seguridad de habilitar el acceso anónimo.

* Cualquiera que tenga la URL puede acceder al panel de control.
* Cualquiera puede ver llamadas a la API y enumerar todas las carpetas, tableros y fuentes de datos.
* Cualquiera puede realizar consultas arbitrarias a cualquier fuente de datos con la que esté configurada la instancia de Grafana.
